import{u as W,r as n,a as B,j as e,H as z,L as w,b as m}from"./app-BkiRhpSZ.js";import{A}from"./AuthenticatedLayout-CG5z5mVk.js";import{M as v}from"./Modal-DgeRfhFZ.js";import"./FlashMessage-BDC90HuD.js";import"./transition-i1KYIfVm.js";const H=s=>new Intl.NumberFormat("en-IN",{style:"currency",currency:s,maximumFractionDigits:0});function V(){const{cart:s}=W().props,a=n.useMemo(()=>H(s.currency||"INR"),[s.currency]),[N,c]=n.useState(!1),[o,p]=n.useState(!1),[h,d]=n.useState(null),[f,u]=n.useState({}),y=n.useMemo(()=>s.items.reduce((t,l)=>t+l.quantity,0),[s.items]),j=n.useMemo(()=>s.items.filter(t=>(t.configuration?.mode??"purchase")==="jobwork").length,[s.items]),{data:x,setData:k,post:E}=B({comment:""});n.useEffect(()=>{const t={};s.items.forEach(l=>{t[l.id]=l.configuration?.notes??""}),u(t)},[s.items]);const b=(t,l)=>{const q=Math.max(1,t.quantity+l);m.patch(route("frontend.cart.items.update",t.id),{quantity:q},{preserveScroll:!0,preserveState:!0})},L=(t,l)=>{m.patch(route("frontend.cart.items.update",t.id),{configuration:l},{preserveScroll:!0,preserveState:!0})},C=t=>{m.delete(route("frontend.cart.items.destroy",t.id),{preserveScroll:!0})},M=t=>{u(l=>({...l,[t.id]:t.configuration?.notes??""})),d(t.id)},S=t=>{L(t,{notes:f[t.id]||null}),d(null)},r=s.items.length===0,g=()=>{r||c(!0)},_=()=>{o||r||(p(!0),m.post(route("frontend.quotations.store-from-cart"),{cart_comment:x.comment||null},{preserveScroll:!0,onSuccess:()=>c(!1),onFinish:()=>p(!1)}))},i=h?s.items.find(t=>t.id===h):null;return e.jsxs(A,{children:[e.jsx(z,{title:"Quotation list"}),e.jsxs("div",{className:"space-y-10",id:"cart",children:[e.jsx("header",{className:"rounded-3xl bg-white p-6 shadow-xl ring-1 ring-slate-200/70",children:e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Quotation list"}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Review and submit all quotation requests together for merchandising review."})]}),e.jsxs("button",{type:"button",onClick:g,disabled:r,className:`inline-flex items-center gap-2 rounded-full px-5 py-2 text-sm font-semibold transition ${r?"cursor-not-allowed bg-slate-300 text-slate-500":"bg-elvee-blue text-white shadow-lg shadow-elvee-blue/30 hover:bg-navy"}`,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,className:"h-4 w-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Submit all quotations"]})]})}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-[2fr_1fr]",children:[e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"rounded-2xl bg-white shadow-xl ring-1 ring-slate-200/80",children:r?e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4 p-16 text-sm text-slate-500",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,className:"h-12 w-12 text-slate-300",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),e.jsx("p",{children:"Your cart is empty. Explore the catalogue to add designs."}),e.jsxs(w,{href:route("frontend.catalog.index"),className:"inline-flex items-center gap-2 rounded-full bg-slate-900 px-5 py-2 text-sm font-semibold text-white hover:bg-slate-700",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,className:"h-4 w-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Browse catalogue"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b border-slate-200 bg-slate-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600",children:"Product"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-slate-600",children:"Mode"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-slate-600",children:"Quantity"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-600",children:"Unit Price"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-600",children:"Total"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-slate-600",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:s.items.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50/50 transition",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[t.thumbnail&&e.jsx("img",{src:t.thumbnail,alt:t.name,className:"h-16 w-16 rounded-lg object-cover shadow-sm"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx(w,{href:route("frontend.catalog.show",{product:t.product_id}),className:"text-sm font-semibold text-slate-900 truncate hover:text-feather-gold transition",children:t.name}),e.jsxs("p",{className:"text-xs text-slate-400",children:["SKU ",t.sku]}),t.variant_label&&e.jsx("p",{className:"mt-0.5 text-xs font-medium text-slate-500",children:t.variant_label}),e.jsxs("div",{className:"mt-1 flex items-center gap-2 text-xs text-slate-500",children:[e.jsxs("span",{children:["Base ",a.format(t.price_breakdown.base??0)]}),e.jsx("span",{children:"·"}),e.jsxs("span",{children:["Making ",a.format(t.price_breakdown.making??0)]})]}),(t.line_discount??0)>0&&e.jsxs("p",{className:"mt-1 text-xs font-semibold text-emerald-600",children:["Discount −",a.format(t.line_discount??0),t.price_breakdown.discount_details?.name?` (${t.price_breakdown.discount_details.name})`:""]})]})]})}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("span",{className:`inline-flex items-center gap-1.5 rounded-full px-2.5 py-1 text-xs font-semibold ${(t.configuration?.mode??"purchase")==="jobwork"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:(t.configuration?.mode??"purchase")==="jobwork"?e.jsxs(e.Fragment,{children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,className:"h-3 w-3",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655-5.653a2.548 2.548 0 00-3.586 3.586l4.655 5.653m8.048-8.048l-2.496 3.03a2.548 2.548 0 01-3.586-3.586l2.496-3.03"})}),"Jobwork"]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,className:"h-3 w-3",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z"})}),"Purchase"]})})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>b(t,-1),className:"inline-flex h-7 w-7 items-center justify-center rounded-lg border border-slate-200 text-slate-500 transition hover:border-slate-300 hover:bg-slate-50 hover:text-slate-700","aria-label":"Decrease quantity",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,className:"h-4 w-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 12H4"})})}),e.jsx("span",{className:"min-w-[2rem] text-center text-sm font-semibold text-slate-900",children:t.quantity}),e.jsx("button",{type:"button",onClick:()=>b(t,1),className:"inline-flex h-7 w-7 items-center justify-center rounded-lg border border-slate-200 text-slate-500 transition hover:border-slate-300 hover:bg-slate-50 hover:text-slate-700","aria-label":"Increase quantity",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,className:"h-4 w-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})})]})}),e.jsx("td",{className:"px-4 py-4 text-right text-sm font-medium text-slate-900",children:a.format(t.unit_total)}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsx("p",{className:"text-sm font-semibold text-slate-900",children:a.format(t.line_total)})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>M(t),className:"inline-flex h-8 w-8 items-center justify-center rounded-lg text-slate-500 transition hover:bg-slate-100 hover:text-feather-gold","aria-label":"Edit notes",title:t.configuration?.notes?"View/edit notes":"Add notes",children:t.configuration?.notes?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,className:"h-4 w-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,className:"h-4 w-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})})}),e.jsx("button",{type:"button",onClick:()=>C(t),className:"inline-flex h-8 w-8 items-center justify-center rounded-lg text-slate-500 transition hover:bg-rose-50 hover:text-rose-600","aria-label":"Remove item",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,className:"h-4 w-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})})]})})]},t.id))})]})})})}),e.jsxs("aside",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-2xl bg-white p-6 shadow-xl ring-1 ring-slate-200/80",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Summary"}),e.jsxs("div",{className:"mt-4 space-y-3 text-sm text-slate-600",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{className:"font-medium",children:a.format(s.subtotal)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Tax"}),e.jsx("span",{className:"font-medium",children:a.format(s.tax)})]}),s.discount>0&&e.jsxs("div",{className:"flex items-center justify-between text-emerald-600",children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{className:"font-medium",children:["-",a.format(s.discount)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Shipping"}),e.jsx("span",{className:"font-medium",children:a.format(s.shipping)})]}),e.jsx("div",{className:"border-t border-slate-200 pt-3",children:e.jsxs("div",{className:"flex items-center justify-between text-base font-semibold text-slate-900",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:a.format(s.total)})]})})]})]}),e.jsxs("div",{className:"rounded-2xl bg-white p-6 shadow-xl ring-1 ring-slate-200/80",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Cart Notes"}),e.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Add a comment for all items in this cart"}),e.jsx("textarea",{value:x.comment,onChange:t=>k("comment",t.target.value),className:"mt-3 w-full rounded-xl border border-slate-200 px-3 py-2 text-sm text-slate-700 focus:border-feather-gold focus:outline-none focus:ring-2 focus:ring-feather-gold/20",placeholder:"Add notes for the merchandising team...",rows:4})]}),e.jsxs("button",{type:"button",onClick:g,disabled:r,className:`w-full inline-flex items-center justify-center gap-2 rounded-full px-4 py-3 text-sm font-semibold transition ${r?"cursor-not-allowed bg-slate-300 text-slate-500":"bg-elvee-blue text-white shadow-lg shadow-elvee-blue/30 hover:bg-navy"}`,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,className:"h-4 w-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Submit quotations"]})]})]})]}),e.jsx(v,{show:N,onClose:()=>o?void 0:c(!1),maxWidth:"lg",children:e.jsxs("div",{className:"space-y-5 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Submit all quotation requests?"}),e.jsx("p",{className:"text-sm text-slate-600",children:"We will create separate quotation tickets for each product so the merchandising team can review the details. You can still add more items afterwards."}),e.jsxs("div",{className:"rounded-2xl bg-slate-50 p-4 text-sm text-slate-600",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-slate-800",children:"Products selected:"})," ",s.items.length]}),e.jsxs("p",{className:"mt-1",children:[e.jsx("span",{className:"font-semibold text-slate-800",children:"Total units:"})," ",y]}),j>0&&e.jsxs("p",{className:"mt-1",children:[e.jsx("span",{className:"font-semibold text-slate-800",children:"Jobwork requests:"})," ",j]}),e.jsxs("p",{className:"mt-1",children:[e.jsx("span",{className:"font-semibold text-slate-800",children:"Estimated total:"})," ",a.format(s.total)]}),x.comment&&e.jsxs("div",{className:"mt-3 rounded-lg bg-white p-3",children:[e.jsx("p",{className:"text-xs font-semibold text-slate-700",children:"Cart Notes:"}),e.jsx("p",{className:"mt-1 text-xs text-slate-600",children:x.comment})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>o?void 0:c(!1),className:"inline-flex items-center justify-center rounded-full border border-slate-200 px-4 py-2 text-sm font-semibold text-slate-600 transition hover:border-slate-300 hover:text-slate-900",disabled:o,children:"Cancel"}),e.jsx("button",{type:"button",onClick:_,disabled:o,className:"inline-flex items-center justify-center rounded-full bg-elvee-blue px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-elvee-blue/30 transition hover:bg-navy disabled:cursor-not-allowed disabled:opacity-60",children:o?"Submitting…":"Confirm & submit"})]})]})}),e.jsx(v,{show:h!==null,onClose:()=>d(null),maxWidth:"md",children:i&&e.jsxs("div",{className:"space-y-4 p-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:["Notes for ",i.name]}),e.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["SKU ",i.sku]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Notes"}),e.jsx("textarea",{value:f[i.id]||"",onChange:t=>u(l=>({...l,[i.id]:t.target.value})),className:"mt-2 w-full rounded-xl border border-slate-200 px-3 py-2 text-sm text-slate-700 focus:border-feather-gold focus:outline-none focus:ring-2 focus:ring-feather-gold/20",placeholder:"Share expectations or deadlines...",rows:5})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>d(null),className:"inline-flex items-center justify-center rounded-full border border-slate-200 px-4 py-2 text-sm font-semibold text-slate-600 transition hover:border-slate-300 hover:text-slate-900",children:"Cancel"}),e.jsx("button",{type:"button",onClick:()=>S(i),className:"inline-flex items-center justify-center rounded-full bg-elvee-blue px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-elvee-blue/30 transition hover:bg-navy",children:"Save notes"})]})]})})]})}export{V as default};
