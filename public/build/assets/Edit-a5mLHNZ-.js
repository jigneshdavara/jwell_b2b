import{u as et,a as tt,r as A,j as t,H as st}from"./app-2_233VM5.js";import{R as it}from"./RichTextEditor-DX167VEW.js";import{A as at}from"./AdminLayout-DfkPU0bq.js";const ne=(se=!1)=>({sku:"",label:"",metal_id:"",metal_purity_id:"",diamond_option_key:null,size_cm:"",price_adjustment:"0",is_default:se,metadata:{},metals:[],diamonds:[]}),de=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`local-${Date.now()}-${Math.random().toString(16).slice(2,8)}`,Ne=()=>({key:de(),type_id:"",shape_id:"",color_id:"",clarity_id:"",cut_id:"",weight:"",diamonds_count:""}),lt=()=>({id:void 0,diamond_type_id:"",diamond_shape_id:"",diamond_color_id:"",diamond_clarity_id:"",diamond_cut_id:"",diamonds_count:"",total_carat:""});function mt(){const{props:se}=et(),{product:g,brands:je,categories:ke,productCatalogs:we,diamondCatalog:P,customerGroups:nt,metals:H,metalPurities:F,metalTones:U,errors:E}=se,ve=g?.diamond_options?.length?g.diamond_options.map((e,s)=>({key:e.key??`${de()}-${s}`,type_id:e.type_id??"",shape_id:e.shape_id??"",color_id:e.color_id??"",clarity_id:e.clarity_id??"",cut_id:e.cut_id??"",weight:e.weight!==null&&e.weight!==void 0?String(e.weight):"",diamonds_count:e.diamonds_count!==null&&e.diamonds_count!==void 0?String(e.diamonds_count):""})):[],ze=g?.variants?.length?g.variants.map((e,s)=>({id:e.id,sku:e.sku??"",label:e.label??"",metal_id:e.metal_id??"",metal_purity_id:e.metal_purity_id??"",diamond_option_key:e.diamond_option_key??null,size_cm:e.size_cm?String(e.size_cm):"",price_adjustment:String(e.price_adjustment??0),is_default:e.is_default??s===0,inventory_quantity:e.inventory_quantity!==void 0&&e.inventory_quantity!==null?Number(e.inventory_quantity):0,metadata:e.metadata??{},metals:e.metals?.map(i=>({id:i.id,metal_id:i.metal_id??"",metal_purity_id:i.metal_purity_id??"",metal_tone_id:i.metal_tone_id??"",weight_grams:i.weight_grams?String(i.weight_grams):"",metal_weight:i.metal_weight?String(i.metal_weight):i.weight_grams?String(i.weight_grams):""}))??[],diamonds:e.diamonds?.map(i=>({id:i.id,diamond_type_id:i.diamond_type_id??"",diamond_shape_id:i.diamond_shape_id??"",diamond_color_id:i.diamond_color_id??"",diamond_clarity_id:i.diamond_clarity_id??"",diamond_cut_id:i.diamond_cut_id??"",diamonds_count:i.diamonds_count?String(i.diamonds_count):"",total_carat:i.total_carat?String(i.total_carat):""}))??[]})):[ne(!0)],Ce=g?.making_charge_discount_overrides?.length?g.making_charge_discount_overrides.map((e,s)=>({localKey:`${de()}-${s}`,customer_group_id:e.customer_group_id!==null&&e.customer_group_id!==void 0?Number(e.customer_group_id):"",type:e.type??"percentage",value:e.value!==null&&e.value!==void 0?String(e.value):""})):[],ie=g?.metadata?.size_dimension??null,$e=ie?.unit==="cm"?"cm":"mm",re=Array.isArray(ie?.values)?(ie?.values??[]).map(e=>String(e)):[],Se=re.length>0,Y=tt(()=>({sku:g?.sku??"",name:g?.name??"",description:g?.description??"",brand_id:String(g?.brand_id??""),category_id:String(g?.category_id??""),product_catalog_ids:(g?.product_catalog_ids??[]).map(e=>String(e)),gross_weight:g?.gross_weight?String(g.gross_weight):"",net_weight:g?.net_weight?String(g.net_weight):"",making_charge:g?.making_charge?String(g.making_charge):"",making_charge_discount_type:g?.making_charge_discount_type??null,making_charge_discount_value:g?.making_charge_discount_value!==null&&g?.making_charge_discount_value!==void 0?String(g.making_charge_discount_value):null,making_charge_discount_overrides:Ce,is_jobwork_allowed:g?.is_jobwork_allowed??!1,visibility:g?.visibility??"public",standard_pricing:{labour_brand:g?.standard_pricing?.labour_brand?String(g.standard_pricing.labour_brand):"",diamond_rate:g?.standard_pricing?.diamond_rate?String(g.standard_pricing.diamond_rate):"",gold_rate:g?.standard_pricing?.gold_rate?String(g.standard_pricing.gold_rate):"",colourstone_rate:g?.standard_pricing?.colourstone_rate?String(g.standard_pricing.colourstone_rate):""},variants:ze,is_variant_product:g?.is_variant_product??!0,mixed_metal_tones_per_purity:g?.mixed_metal_tones_per_purity??!1,mixed_metal_purities_per_tone:g?.mixed_metal_purities_per_tone??!1,metal_mix_mode:(()=>{const e=g?.metal_mix_mode;if(!e)return{};if(Array.isArray(e))return e.length===0?{}:{};if(typeof e!="object")return{};const s=Object.keys(e);if(s.length===0)return{};const i={};return s.forEach(r=>{const l=Number(r),d=e[r];!isNaN(l)&&l>0&&(d==="normal"||d==="mix_tones"||d==="mix_purities")&&(i[l]=d)}),i})(),uses_diamond:g?.uses_diamond??!1,diamond_mixing_mode:g?.diamond_mixing_mode&&(g.diamond_mixing_mode==="shared"||g.diamond_mixing_mode==="as_variant")?g.diamond_mixing_mode:"shared",metal_ids:g?.metal_ids??[],metal_purity_ids:g?.metal_purity_ids??[],metal_tone_ids:g?.metal_tone_ids??[],diamond_options:ve,diamond_type_ids:g?.diamond_type_ids??[],diamond_clarity_ids:g?.diamond_clarity_ids??[],diamond_color_ids:g?.diamond_color_ids??[],diamond_shape_ids:g?.diamond_shape_ids??[],diamond_cut_ids:g?.diamond_cut_ids??[],media_uploads:[],removed_media_ids:[],size_dimension_enabled:Se,size_unit:$e,size_values:re})),{setData:w,post:oe,put:Me,processing:me}=Y,_=Y.data,[ce,ue]=A.useState(""),[De,Ee]=A.useState(new Set),[Ve,Ae]=A.useState(new Set);A.useCallback(e=>{Ae(s=>{const i=new Set(s);return i.has(e)?i.delete(e):i.add(e),i})},[]),A.useCallback(e=>{Ee(s=>{const i=new Set(s);return i.has(e)?i.delete(e):i.add(e),i})},[]);const B=e=>Number.isFinite(e)?e.toFixed(3).replace(/\.?0+$/,""):"",_e=(e,s)=>{const i=parseFloat(e);if(!Number.isFinite(i))return"";const r=s==="mm"?i/10:i;return B(r)},J=(e,s)=>{const i=typeof e=="number"?e:parseFloat(e);if(!Number.isFinite(i))return"";const r=s==="mm"?i*10:i;return B(r)},W=A.useMemo(()=>Object.fromEntries(F.map(e=>[e.id,e.name])),[F]),Q=A.useMemo(()=>Object.fromEntries(U.map(e=>[e.id,e.name])),[U]),G=A.useMemo(()=>Object.fromEntries(H.map(e=>[e.id,e.name])),[H]),O=A.useMemo(()=>({types:Object.fromEntries(P.types.map(e=>[e.id,e.name])),shapes:Object.fromEntries(P.shapes.map(e=>[e.id,e.name])),colors:Object.fromEntries(P.colors.map(e=>[e.id,e.name])),clarities:Object.fromEntries(P.clarities.map(e=>[e.id,e.name])),cuts:Object.fromEntries(P.cuts.map(e=>[e.id,e.name]))}),[P]),X=A.useCallback(e=>{if(!e)return"";const s=[];return e.weight&&s.push(`${e.weight} Ct`),e.shape_id&&s.push(O.shapes[Number(e.shape_id)]??""),e.clarity_id&&s.push(O.clarities[Number(e.clarity_id)]??""),e.color_id&&s.push(O.colors[Number(e.color_id)]??""),e.type_id&&s.push(O.types[Number(e.type_id)]??""),e.cut_id&&s.push(O.cuts[Number(e.cut_id)]??""),s.filter(Boolean).join(" - ")},[O]),I=A.useCallback((e,s)=>{let i="";if(e.metals&&e.metals.length>0){const a=e.metals.filter(m=>m.metal_id!==""&&typeof m.metal_id=="number").map(m=>({metal_id:m.metal_id,metal_purity_id:m.metal_purity_id!==""&&m.metal_purity_id!==null?Number(m.metal_purity_id):null,metal_tone_id:m.metal_tone_id!==""&&m.metal_tone_id!==null?Number(m.metal_tone_id):null}));if(a.length===0)i="";else{const m=new Map;a.forEach(v=>{m.has(v.metal_id)||m.set(v.metal_id,[]),m.get(v.metal_id).push(v)});const N=[];m.forEach((v,T)=>{const u=G[T]??"";if(!u)return;const n=new Set(v.map(C=>C.metal_purity_id).filter(Boolean)),p=new Set(v.map(C=>C.metal_tone_id).filter(Boolean));let h="";if(n.size>1&&p.size===1){const C=Array.from(p)[0],D=C?Q[C]??"":"",c=Array.from(n).map(k=>k?W[k]??"":"").filter(Boolean).sort();c.length>0?D?h=`${c.join(" + ")} ${D} ${u}`:h=`${c.join(" + ")} ${u}`:h=u}else if(p.size>1&&n.size===1){const C=Array.from(n)[0],D=C?W[C]??"":"",c=Array.from(p).map(k=>k?Q[k]??"":"").filter(Boolean).sort();c.length>0?D?h=`${D} ${c.join(" + ")} ${u}`:h=`${c.join(" + ")} ${u}`:h=D?`${D} ${u}`:u}else{const C=v[0],D=C.metal_purity_id,c=C.metal_tone_id,k=D?W[D]??"":"",M=c?Q[c]??"":"";k&&M?h=`${k} ${M} ${u}`:k?h=`${k} ${u}`:M?h=`${M} ${u}`:h=u}h&&N.push(h)}),i=N.join(" / ")}}else if(e.metal_id!==""&&typeof e.metal_id=="number"){const a=G[e.metal_id]??"";if(e.metal_purity_id!==""&&typeof e.metal_purity_id=="number"){const m=W[e.metal_purity_id]??"";i=m?`${m} ${a}`:a}else i=a}let r="";if(e.diamonds&&e.diamonds.length>0){const a=[];e.diamonds.forEach(m=>{const N=[];m.diamond_type_id!==""&&m.diamond_type_id!==null&&N.push(O.types[Number(m.diamond_type_id)]||""),m.diamond_clarity_id!==""&&m.diamond_clarity_id!==null&&N.push(O.clarities[Number(m.diamond_clarity_id)]||""),m.diamond_color_id!==""&&m.diamond_color_id!==null&&N.push(O.colors[Number(m.diamond_color_id)]||""),m.diamond_shape_id!==""&&m.diamond_shape_id!==null&&N.push(O.shapes[Number(m.diamond_shape_id)]||""),m.diamond_cut_id!==""&&m.diamond_cut_id!==null&&N.push(O.cuts[Number(m.diamond_cut_id)]||""),m.total_carat&&m.total_carat!==""&&N.push(`${m.total_carat}ct`),N.length>0&&a.push(N.filter(Boolean).join(" — "))}),r=a.join(" / ")}else{const a=s.diamond_options.find(m=>m.key===e.diamond_option_key)??null;r=X(a)}const l=e.metadata??{},d=typeof l.size_value=="string"||typeof l.size_value=="number"?String(l.size_value):"",f=l.size_unit==="mm"||l.size_unit==="cm"?l.size_unit:s.size_unit;let y=s.size_dimension_enabled?f:"cm",j="";s.size_dimension_enabled?d?j=B(Number(d)):e.size_cm&&(j=J(e.size_cm,s.size_unit)):e.size_cm&&(j=B(parseFloat(e.size_cm)),y="cm");const z=j?`${j}${y}`:"",L=[r,i,z].filter(Boolean),V=L.length?L.join(" / "):"Variant",o=i,S=r;let b=null;if(e.diamonds&&e.diamonds.length>0)b=e.diamonds.map(a=>({type_id:a.diamond_type_id!==""&&a.diamond_type_id!==null?Number(a.diamond_type_id):null,shape_id:a.diamond_shape_id!==""&&a.diamond_shape_id!==null?Number(a.diamond_shape_id):null,color_id:a.diamond_color_id!==""&&a.diamond_color_id!==null?Number(a.diamond_color_id):null,clarity_id:a.diamond_clarity_id!==""&&a.diamond_clarity_id!==null?Number(a.diamond_clarity_id):null,cut_id:a.diamond_cut_id!==""&&a.diamond_cut_id!==null?Number(a.diamond_cut_id):null,total_carat:a.total_carat?Number(a.total_carat):null}));else{const a=s.diamond_options.find(m=>m.key===e.diamond_option_key)??null;a&&(b={key:a.key,type_id:a.type_id!==""?Number(a.type_id):null,shape_id:a.shape_id!==""?Number(a.shape_id):null,color_id:a.color_id!==""?Number(a.color_id):null,clarity_id:a.clarity_id!==""?Number(a.clarity_id):null,cut_id:a.cut_id!==""?Number(a.cut_id):null,weight:a.weight?Number(a.weight):null})}const $={metal_id:e.metal_id!==""&&e.metal_id!==null?Number(e.metal_id):null,metal_purity_id:e.metal_purity_id!==""&&e.metal_purity_id!==null?Number(e.metal_purity_id):null,diamond_option_key:e.diamond_option_key??null,diamond:b,size_cm:e.size_cm?Number(e.size_cm):null,auto_label:V};j?($.size_value=j,$.size_unit=y):(delete $.size_value,delete $.size_unit);const x=typeof l.status=="string"&&l.status.trim().length>0?String(l.status):void 0;return x?$.status=x:$.status="enabled",{autoLabel:V,metalTone:o,stoneQuality:S,sizeText:z,metadata:$}},[X,J,B,G,W,Q]),q=A.useCallback(e=>e.variants.map((s,i)=>{const r=I(s,e),l=s.metadata?.auto_label??"",d=!s.label||s.label===l,f=s.metadata?.auto_sku??"",y=(e.sku??"").trim(),z=`${y?y.replace(/[^A-Za-z0-9]/g,"").toUpperCase():"SKU"}-${String(i+1).padStart(2,"0")}`,L=!s.sku||s.sku===f;return{...s,sku:L?z:s.sku,label:d?r.autoLabel:s.label,metadata:{...r.metadata,auto_sku:z},is_default:s.is_default??i===0}}),[I]),ae=A.useMemo(()=>_.metal_ids.length===0?[]:F.filter(e=>_.metal_ids.includes(e.metal_id)),[_.metal_ids,F]),le=A.useMemo(()=>_.metal_ids.length===0?[]:U.filter(e=>_.metal_ids.includes(e.metal_id)),[_.metal_ids,U]);A.useMemo(()=>ae.filter(e=>_.metal_purity_ids.includes(e.id)),[_.metal_purity_ids,ae]),A.useMemo(()=>le.filter(e=>_.metal_tone_ids.includes(e.id)),[_.metal_tone_ids,le]);const xe=A.useMemo(()=>_.diamond_options.map(e=>({key:e.key,label:X(e)||`Option ${e.key.slice(-4)}`})),[X,_.diamond_options]);A.useMemo(()=>xe.reduce((e,s)=>(e[s.key]=s.label,e),{}),[xe]);const Le=e=>{w(s=>{const i={...s,is_variant_product:e,uses_diamond:e?s.uses_diamond:!1,metal_ids:e?s.metal_ids:[],metal_purity_ids:e?s.metal_purity_ids:[],metal_tone_ids:e?s.metal_tone_ids:[],diamond_options:e?s.diamond_options:[],size_dimension_enabled:e?s.size_dimension_enabled:!1,size_values:e?s.size_values:[],size_unit:e?s.size_unit:"mm",variants:e?s.variants.length>0?s.variants:[ne(!0)]:[]};return e||(i.size_dimension_enabled=!1,i.size_values=[],i.size_unit="mm"),i.variants=q(i),i})},Pe=e=>{w(s=>{const i=e&&s.diamond_options.length===0?[Ne()]:e?s.diamond_options:[],r={...s,uses_diamond:e,diamond_mixing_mode:s.diamond_mixing_mode||"shared",diamond_options:i,variants:e?s.variants:s.variants.map(l=>({...l,diamond_option_key:null,diamonds:[]}))};return e||(r.diamond_type_ids=[],r.diamond_clarity_ids=[],r.diamond_color_ids=[],r.diamond_shape_ids=[],r.diamond_cut_ids=[]),r.variants=q(r),r})},Oe=e=>{w(s=>{const i={...s,size_dimension_enabled:e,size_values:e?s.size_values:[],size_unit:e?s.size_unit:"mm",variants:s.variants.map(r=>{if(e)return{...r};const l={...r.metadata??{}};return delete l.size_value,delete l.size_unit,{...r,size_cm:"",metadata:l}})};return i.variants=q(i),i})},pe=e=>{w(s=>{if(s.size_unit===e)return s;const i=s.size_values.map(l=>{const d=_e(l,s.size_unit);return d?J(d,e):l}),r={...s,size_unit:e,size_values:i,variants:s.variants.map(l=>{if(!l.size_cm)return{...l,metadata:{...l.metadata??{},size_unit:e}};const d={...l.metadata??{}},f=J(l.size_cm,e);return f?(d.size_value=f,d.size_unit=e):(delete d.size_value,d.size_unit=e),{...l,metadata:d}})};return r.variants=q(r),r})},Te=()=>{const e=ce.trim();if(!e)return;const s=parseFloat(e);if(!Number.isFinite(s)||s<=0)return;const i=B(s);w(r=>{if(r.size_values.includes(i))return r;const l={...r,size_values:[...r.size_values,i]};return l.variants=q(l),l}),ue("")},qe=e=>{w(s=>{const i={...s,size_values:s.size_values.filter(r=>r!==e)};return i.variants=q(i),i})},Fe=e=>{w(s=>{const r=s.metal_ids.includes(e)?s.metal_ids.filter(y=>y!==e):[...s.metal_ids,e],l=F.filter(y=>y.metal_id===e).map(y=>y.id),d=U.filter(y=>y.metal_id===e).map(y=>y.id),f={...s,metal_ids:r,metal_purity_ids:s.metal_purity_ids.filter(y=>!l.includes(y)),metal_tone_ids:s.metal_tone_ids.filter(y=>!d.includes(y)),metal_mix_mode:s.metal_mix_mode};return f.variants=q(f),f})},Ue=e=>{w(s=>{const r=s.metal_purity_ids.includes(e)?s.metal_purity_ids.filter(l=>l!==e):[...s.metal_purity_ids,e];return{...s,metal_purity_ids:r}})},Be=e=>{w(s=>{const r=s.metal_tone_ids.includes(e)?s.metal_tone_ids.filter(l=>l!==e):[...s.metal_tone_ids,e];return{...s,metal_tone_ids:r}})},Ke=()=>{w(e=>{const s={...e,diamond_options:[...e.diamond_options,Ne()]};return s.variants=q(s),s})},K=(e,s,i)=>{w(r=>{const l=r.diamond_options.map(f=>{if(f.key!==e)return f;if(s==="weight"||s==="diamonds_count")return{...f,[s]:i===null?"":String(i)};const y=i===null||i===""?"":typeof i=="number"?i:i===""?"":Number(i);return{...f,[s]:y}}),d={...r,diamond_options:l};return d.variants=q(d),d})},Re=e=>{w(s=>{const i=s.diamond_options.filter(l=>l.key!==e),r={...s,diamond_options:i,variants:s.variants.map(l=>l.diamond_option_key===e?{...l,diamond_option_key:null}:l)};return r.variants=q(r),r})},We=e=>{w(s=>{if(s.variants.length===1)return s;const i=s.variants.filter((l,d)=>d!==e);i.every(l=>!l.is_default)&&i.length>0&&(i[0].is_default=!0);const r={...s,variants:i};return r.variants=q(r),r})},Z=(e,s,i)=>{w(r=>{const l=r.variants.map((f,y)=>{if(y!==e)return f;const j={...f};switch(s){case"is_default":typeof i=="boolean"&&(j.is_default=i);break;case"metal_id":(i===""||typeof i=="number")&&(j.metal_id=i,(i===""||typeof i!="number")&&(j.metal_purity_id=""));break;case"metal_purity_id":(i===""||typeof i=="number")&&(j.metal_purity_id=i);break;case"diamond_option_key":j.diamond_option_key=i?String(i):null;break;case"size_cm":typeof i=="string"&&(j.size_cm=i);break;case"price_adjustment":typeof i=="string"&&(j.price_adjustment=i);break;case"sku":case"label":typeof i=="string"&&(j[s]=i);break;case"total_weight":i===""||i===null?j[s]="":(typeof i=="string"||typeof i=="number")&&(j[s]=i);break;case"inventory_quantity":if(i===""||i===null)j[s]=0;else if(typeof i=="string"){const z=parseInt(i,10);j[s]=isNaN(z)?0:z}else typeof i=="number"&&(j[s]=i);break}return j}),d={...r,variants:l};return d.variants=q(d),d})},Ge=(e,s)=>{w(i=>{const r=i.variants.map((d,f)=>{if(f!==e)return d;const y={...d.metadata??{}};return Object.entries(s).forEach(([j,z])=>{z===null?delete y[j]:y[j]=z}),{...d,metadata:y}}),l={...i,variants:r};return l.variants=q(l),l})},He=e=>{w(s=>({...s,variants:s.variants.map((i,r)=>({...i,is_default:r===e}))}))},Ye=e=>{w(s=>{const i=s.variants.map((r,l)=>{if(l!==e)return r;const d=r.diamonds||[];return{...r,diamonds:[...d,lt()]}});return{...s,variants:i}})},Qe=(e,s)=>{w(i=>{const r=i.variants.map((l,d)=>{if(d!==e)return l;const f=l.diamonds||[];return{...l,diamonds:f.filter((y,j)=>j!==s)}});return{...i,variants:r}})},R=(e,s,i,r)=>{w(l=>{const d=l.variants.map((f,y)=>{if(y!==e)return f;const z=(f.diamonds||[]).map((L,V)=>V!==s?L:{...L,[i]:r});return{...f,diamonds:z}});return{...l,variants:d}})},ee=(e,s,i,r)=>{w(l=>{const d=l.variants.map((f,y)=>{if(y!==e)return f;const z=(f.metals||[]).map((L,V)=>V!==s?L:{...L,[i]:r});return{...f,metals:z}});return{...l,variants:d}})},te=e=>{const s=new Map;e.metal_ids.length>0&&e.metal_purity_ids.length>0&&e.metal_purity_ids.forEach(a=>{const m=F.find(N=>N.id===a);m&&e.metal_ids.includes(m.metal_id)&&(s.has(m.metal_id)||s.set(m.metal_id,[]),s.get(m.metal_id).push(a))});const i=new Map;e.metal_ids.length>0&&e.metal_tone_ids.length>0&&e.metal_tone_ids.forEach(a=>{const m=U.find(N=>N.id===a);m&&e.metal_ids.includes(m.metal_id)&&(i.has(m.metal_id)||i.set(m.metal_id,[]),i.get(m.metal_id).push(a))});const r=(a,m,N,v)=>{const T=[];return m.length===0&&N.length===0?[[{metal_id:a,metal_purity_id:null,metal_tone_id:null}]]:N.length===0&&m.length>0?m.map(u=>[{metal_id:a,metal_purity_id:u,metal_tone_id:null}]):m.length===0&&N.length>0?N.map(u=>[{metal_id:a,metal_purity_id:null,metal_tone_id:u}]):(v==="normal"?m.forEach(u=>{N.forEach(n=>{T.push([{metal_id:a,metal_purity_id:u,metal_tone_id:n}])})}):v==="mix_tones"?m.forEach(u=>{T.push(N.map(n=>({metal_id:a,metal_purity_id:u,metal_tone_id:n})))}):v==="mix_purities"&&N.forEach(u=>{T.push(m.map(n=>({metal_id:a,metal_purity_id:n,metal_tone_id:u})))}),T)},l=new Map;e.metal_ids.forEach(a=>{const m=s.get(a)||[],N=i.get(a)||[];let v="normal";e.metal_mix_mode&&(v=e.metal_mix_mode[a]||v,v==="normal"&&e.metal_mix_mode[String(a)]&&(v=e.metal_mix_mode[String(a)]||v),v==="normal"&&Object.keys(e.metal_mix_mode).forEach(u=>{const n=Number(u);if(n===a){const p=e.metal_mix_mode[n];(p==="normal"||p==="mix_tones"||p==="mix_purities")&&(v=p)}}));const T=r(a,m,N,v);l.set(a,T)});const d=[];if(e.metal_ids.length>0){const a=v=>{if(v.length===0)return[[]];if(v.length===1)return v[0].map(h=>[h]);const[T,...u]=v,n=a(u),p=[];for(const h of T)for(const C of n)p.push([h,...C]);return p},m=e.metal_ids.map(v=>l.get(v)||[]),N=a(m);d.push(...N.map(v=>v.flat()))}const f=[];e.uses_diamond&&e.diamond_options.length>0?e.diamond_options.forEach(a=>{f.push({key:a.key,type_id:a.type_id!==""?Number(a.type_id):null,clarity_id:a.clarity_id!==""?Number(a.clarity_id):null,color_id:a.color_id!==""?Number(a.color_id):null,shape_id:a.shape_id!==""?Number(a.shape_id):null,cut_id:a.cut_id!==""?Number(a.cut_id):null})}):f.push({key:"",type_id:null,clarity_id:null,color_id:null,shape_id:null,cut_id:null});const y=e.size_dimension_enabled&&e.size_values.length>0?e.size_values:[null],j=e.size_dimension_enabled&&y.length>0&&y[0]!==null,z=e.uses_diamond&&f.length>0&&f[0].key!=="",L=e.diamond_mixing_mode||"shared",V=z&&L==="as_variant";if(d.length===0&&!j&&!V)return e;const o=[],S=[];if(d.length>0?d.forEach(a=>{y.forEach(m=>{S.push({metals:a,size:m??null})})}):j?y.forEach(a=>{S.push({metals:[],size:a??null})}):S.push({metals:[],size:null}),L==="shared"){const a=z?f[0]:{key:"",type_id:null,clarity_id:null,color_id:null,shape_id:null,cut_id:null};S.forEach(m=>{o.push({metals:m.metals,diamond:a,size:m.size})})}else S.forEach(a=>{z?f.forEach(m=>{o.push({metals:a.metals,diamond:m,size:a.size})}):o.push({metals:a.metals,diamond:{key:"",type_id:null,clarity_id:null,color_id:null,shape_id:null,cut_id:null},size:a.size})});if(o.length===0)return e;const b=new Map;e.variants.forEach(a=>{if(!a.metals||a.metals.length===0)return;const m=a.size_cm||"no-size",N=a.diamond_option_key||"no-diamond",T=`${a.metals.filter(u=>u.metal_id!==""&&typeof u.metal_id=="number").map(u=>`${u.metal_id}-${u.metal_purity_id||"null"}-${u.metal_tone_id||"null"}`).sort().join("|")}::${m}::${N}`;b.set(T,{metals:a.metals.map(u=>({metal_id:typeof u.metal_id=="number"?u.metal_id:0,metal_purity_id:u.metal_purity_id!==""&&u.metal_purity_id!==null?typeof u.metal_purity_id=="number"?u.metal_purity_id:Number(u.metal_purity_id):null,metal_tone_id:u.metal_tone_id!==""&&u.metal_tone_id!==null?typeof u.metal_tone_id=="number"?u.metal_tone_id:Number(u.metal_tone_id):null,metal_weight:u.metal_weight||u.weight_grams||"",weight_grams:u.weight_grams||u.metal_weight||""})),diamonds:(a.diamonds||[]).map(u=>({diamond_type_id:u.diamond_type_id!==""&&u.diamond_type_id!==null?typeof u.diamond_type_id=="number"?u.diamond_type_id:Number(u.diamond_type_id):null,diamond_shape_id:u.diamond_shape_id!==""&&u.diamond_shape_id!==null?typeof u.diamond_shape_id=="number"?u.diamond_shape_id:Number(u.diamond_shape_id):null,diamond_color_id:u.diamond_color_id!==""&&u.diamond_color_id!==null?typeof u.diamond_color_id=="number"?u.diamond_color_id:Number(u.diamond_color_id):null,diamond_clarity_id:u.diamond_clarity_id!==""&&u.diamond_clarity_id!==null?typeof u.diamond_clarity_id=="number"?u.diamond_clarity_id:Number(u.diamond_clarity_id):null,diamond_cut_id:u.diamond_cut_id!==""&&u.diamond_cut_id!==null?typeof u.diamond_cut_id=="number"?u.diamond_cut_id:Number(u.diamond_cut_id):null,diamonds_count:u.diamonds_count||"",total_carat:u.total_carat||""}))})});const $=o.map((a,m)=>{const N=ne(m===0),v=a.size||"no-size",T=a.diamond.key||"no-diamond",n=`${a.metals.map(c=>`${c.metal_id}-${c.metal_purity_id||"null"}-${c.metal_tone_id||"null"}`).sort().join("|")}::${v}::${T}`,p=b.get(n);if(N.metals=a.metals.map(c=>{const k=p?.metals.find(M=>M.metal_id===c.metal_id&&M.metal_purity_id===(c.metal_purity_id??null)&&M.metal_tone_id===(c.metal_tone_id??null));return{id:void 0,metal_id:c.metal_id,metal_purity_id:c.metal_purity_id??"",metal_tone_id:c.metal_tone_id??"",weight_grams:k?.weight_grams||"",metal_weight:k?.metal_weight||""}}),a.metals.length>0){const c=a.metals[0];N.metal_id=c.metal_id,c.metal_purity_id!==null&&(N.metal_purity_id=c.metal_purity_id)}if((e.diamond_mixing_mode||"shared")==="shared")e.uses_diamond&&e.diamond_options.length>0?(N.diamonds=e.diamond_options.map(c=>{const k=p?.diamonds.find(M=>M.diamond_type_id===(c.type_id!==""?c.type_id:null)&&M.diamond_shape_id===(c.shape_id!==""?c.shape_id:null)&&M.diamond_color_id===(c.color_id!==""?c.color_id:null)&&M.diamond_clarity_id===(c.clarity_id!==""?c.clarity_id:null)&&M.diamond_cut_id===(c.cut_id!==""?c.cut_id:null));return{id:void 0,diamond_type_id:c.type_id!==""?c.type_id:"",diamond_clarity_id:c.clarity_id!==""?c.clarity_id:"",diamond_color_id:c.color_id!==""?c.color_id:"",diamond_shape_id:c.shape_id!==""?c.shape_id:"",diamond_cut_id:c.cut_id!==""?c.cut_id:"",diamonds_count:k?.diamonds_count||(c.diamonds_count!==""&&c.diamonds_count!==null&&c.diamonds_count!==void 0?c.diamonds_count:""),total_carat:k?.total_carat||c.weight||""}}),N.diamond_option_key=e.diamond_options[0].key||null):(N.diamond_option_key=null,N.diamonds=[]);else{const c=a.diamond.key||null;if(N.diamond_option_key=c,c&&(a.diamond.type_id||a.diamond.clarity_id||a.diamond.color_id||a.diamond.shape_id||a.diamond.cut_id)){const k=p?.diamonds.find(M=>M.diamond_type_id===(a.diamond.type_id??null)&&M.diamond_shape_id===(a.diamond.shape_id??null)&&M.diamond_color_id===(a.diamond.color_id??null)&&M.diamond_clarity_id===(a.diamond.clarity_id??null)&&M.diamond_cut_id===(a.diamond.cut_id??null));N.diamonds=[{id:void 0,diamond_type_id:a.diamond.type_id??"",diamond_clarity_id:a.diamond.clarity_id??"",diamond_color_id:a.diamond.color_id??"",diamond_shape_id:a.diamond.shape_id??"",diamond_cut_id:a.diamond.cut_id??"",diamonds_count:k?.diamonds_count||"",total_carat:k?.total_carat||""}]}else N.diamonds=[]}const C={...N.metadata??{},status:"enabled"};if(a.size){const c=_e(a.size,e.size_unit);N.size_cm=c,C.size_value=a.size,C.size_unit=e.size_unit}else delete C.size_value,delete C.size_unit;const D=e.diamond_mixing_mode||"shared";return N.diamond_option_key&&(C.diamond_option_key=N.diamond_option_key,D==="as_variant"&&(C.diamond={type_id:a.diamond.type_id,clarity_id:a.diamond.clarity_id,color_id:a.diamond.color_id,shape_id:a.diamond.shape_id,cut_id:a.diamond.cut_id})),N.metadata=C,N}),x={...e,variants:$,metal_mix_mode:e.metal_mix_mode||{}};return x.variants=q(x),x},he=()=>{w(e=>te(e))},Ze=e=>{e.preventDefault();const s=(Y.data.media_uploads?.length??0)>0;Y.transform(r=>{const l=r,d={...l};l.media_uploads&&Array.isArray(l.media_uploads)&&l.media_uploads.length>0&&(d.media_uploads=l.media_uploads),d.sku=l.sku||"",d.name=l.name||"",d.description=l.description||"";const f=l.brand_id;if(f!==""&&f!==null&&f!==void 0){const o=Number(f);d.brand_id=isNaN(o)?null:o}else d.brand_id=null;const y=l.category_id;if(y!==""&&y!==null&&y!==void 0){const o=Number(y);d.category_id=isNaN(o)?null:o}else d.category_id=null;d.product_catalog_ids=l.product_catalog_ids.map(o=>Number(o)).filter(o=>!isNaN(o)&&o>0);const j=l.making_charge;if(j===""||j===null||j===void 0)d.making_charge=0;else{const o=Number(j);d.making_charge=isNaN(o)?0:o}d.uses_diamond=l.uses_diamond,d.diamond_mixing_mode=l.diamond_mixing_mode||"shared",d.metal_ids=[...l.metal_ids],d.metal_purity_ids=[...l.metal_purity_ids],d.metal_tone_ids=[...l.metal_tone_ids];const z={};l.metal_mix_mode&&typeof l.metal_mix_mode=="object"&&Object.keys(l.metal_mix_mode).forEach(o=>{const S=Number(o),b=l.metal_mix_mode[S];!isNaN(S)&&S>0&&(b==="normal"||b==="mix_tones"||b==="mix_purities")&&(z[String(S)]=b)}),d.metal_mix_mode=z,d.diamond_type_ids=l.uses_diamond?[...l.diamond_type_ids]:[],d.diamond_clarity_ids=l.uses_diamond?[...l.diamond_clarity_ids]:[],d.diamond_color_ids=l.uses_diamond?[...l.diamond_color_ids]:[],d.diamond_shape_ids=l.uses_diamond?[...l.diamond_shape_ids]:[],d.diamond_cut_ids=l.uses_diamond?[...l.diamond_cut_ids]:[],d.diamond_options=l.uses_diamond?l.diamond_options.map(o=>({key:o.key,type_id:o.type_id!==""?Number(o.type_id):null,shape_id:o.shape_id!==""?Number(o.shape_id):null,color_id:o.color_id!==""?Number(o.color_id):null,clarity_id:o.clarity_id!==""?Number(o.clarity_id):null,cut_id:o.cut_id!==""?Number(o.cut_id):null,weight:o.weight?Number(o.weight):null,diamonds_count:o.diamonds_count?Number(o.diamonds_count):null})):[];const L=o=>o==null||o===""?null:typeof o=="number"?o:Number(o);d.making_charge_discount_type=l.making_charge_discount_type||null,d.making_charge_discount_value=l.making_charge_discount_type?L(l.making_charge_discount_value):null,d.making_charge_discount_overrides=l.making_charge_discount_overrides.map(o=>({customer_group_id:o.customer_group_id!==""?Number(o.customer_group_id):null,type:o.type,value:L(o.value)})).filter(o=>o.customer_group_id!==null&&o.value!==null),d.variants=l.is_variant_product?l.variants.map(o=>{const S=I(o,l),b=(o.metals||[]).length>0?(o.metals||[]).map(x=>({id:x.id,metal_id:x.metal_id!==""&&x.metal_id!==null?Number(x.metal_id):null,metal_purity_id:x.metal_purity_id!==""&&x.metal_purity_id!==null?Number(x.metal_purity_id):null,metal_tone_id:x.metal_tone_id!==""&&x.metal_tone_id!==null?Number(x.metal_tone_id):null,weight_grams:x.weight_grams!==""&&x.weight_grams!==null?x.weight_grams:null,metal_weight:x.metal_weight!==""&&x.metal_weight!==null?x.metal_weight:x.weight_grams!==""&&x.weight_grams!==null?x.weight_grams:null,metadata:{}})).filter(x=>x.metal_id!==null&&x.metal_id>0):[],$=(o.diamonds||[]).map(x=>({id:x.id,diamond_type_id:x.diamond_type_id!==""&&x.diamond_type_id!==null?Number(x.diamond_type_id):null,diamond_shape_id:x.diamond_shape_id!==""&&x.diamond_shape_id!==null?Number(x.diamond_shape_id):null,diamond_color_id:x.diamond_color_id!==""&&x.diamond_color_id!==null?Number(x.diamond_color_id):null,diamond_clarity_id:x.diamond_clarity_id!==""&&x.diamond_clarity_id!==null?Number(x.diamond_clarity_id):null,diamond_cut_id:x.diamond_cut_id!==""&&x.diamond_cut_id!==null?Number(x.diamond_cut_id):null,diamonds_count:x.diamonds_count!==""&&x.diamonds_count!==null?Number(x.diamonds_count):null,total_carat:x.total_carat!==""&&x.total_carat!==null?x.total_carat:null,metadata:{}})).filter(x=>x.diamond_type_id!==null||x.diamond_shape_id!==null||x.diamond_color_id!==null||x.diamond_clarity_id!==null||x.diamond_cut_id!==null);return{id:o.id,sku:o.sku,label:o.label||S.autoLabel,metal_id:b.length===0&&o.metal_id!==""&&o.metal_id!==null&&o.metal_id>0?Number(o.metal_id):null,metal_purity_id:b.length===0&&o.metal_purity_id!==""&&o.metal_purity_id!==null&&o.metal_purity_id>0?Number(o.metal_purity_id):null,metal_tone:S.metalTone||null,stone_quality:S.stoneQuality||null,size:S.sizeText||null,price_adjustment:o.price_adjustment,inventory_quantity:o.inventory_quantity!==void 0&&o.inventory_quantity!==null&&o.inventory_quantity!==""?typeof o.inventory_quantity=="number"?o.inventory_quantity:Number(o.inventory_quantity):0,is_default:o.is_default,metadata:S.metadata,metals:b,diamonds:$}}):[];const V=l.size_values.map(o=>parseFloat(o)).filter(o=>Number.isFinite(o)&&o>0);return l.size_dimension_enabled&&V.length>0?d.metadata={size_dimension:{unit:l.size_unit,values:V}}:d.metadata=null,d.metadata||delete d.metadata,delete d.size_dimension_enabled,delete d.size_unit,delete d.size_values,l.is_variant_product||(d.uses_diamond=!1,d.metal_ids=[],d.metal_purity_ids=[],d.metal_tone_ids=[],d.uses_diamond=!1,d.diamond_type_ids=[],d.diamond_clarity_ids=[],d.diamond_color_ids=[],d.diamond_shape_ids=[],d.diamond_cut_ids=[]),(!d.media_uploads||Array.isArray(d.media_uploads)&&d.media_uploads.length===0)&&delete d.media_uploads,(!d.removed_media_ids||Array.isArray(d.removed_media_ids)&&d.removed_media_ids.length===0)&&delete d.removed_media_ids,l.is_variant_product&&(!d.variants||d.variants.length===0)&&(d.variants=[]),d.sku||(d.sku=""),d.name||(d.name=""),d.brand_id===void 0&&(d.brand_id=null),d.category_id===void 0&&(d.category_id=null),d.making_charge===void 0&&(d.making_charge=0),g?.id&&s&&(d._method="PUT"),d});const i={preserveScroll:!0,forceFormData:s,onFinish:()=>{Y.transform(r=>r)}};g?.id?s?oe(route("admin.products.update",g.id),i):Me(route("admin.products.update",g.id),i):oe(route("admin.products.store"),i)},ge=E.variants,fe=A.useMemo(()=>Object.entries(E??{}).filter(([e])=>e.startsWith("media_uploads")).map(([,e])=>e),[E]),ye=A.useMemo(()=>g?.media?[...g.media].sort((e,s)=>e.position-s.position):[],[g?.media]),Je=e=>{const s=_.removed_media_ids??[],r=s.includes(e)?s.filter(l=>l!==e):[...s,e];w("removed_media_ids",r)},Xe=e=>{const s=e.target.files?Array.from(e.target.files):[];s.length!==0&&(w("media_uploads",[..._.media_uploads??[],...s]),e.target.value="")},Ie=e=>{w("media_uploads",(_.media_uploads??[]).filter((s,i)=>i!==e))},be=e=>(_.removed_media_ids??[]).includes(e);return t.jsxs(at,{children:[t.jsx(st,{title:g?.id?`Edit ${g.name}`:"New Product"}),t.jsxs("form",{onSubmit:Ze,className:"space-y-10",children:[t.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-xl shadow-slate-900/10",children:[t.jsxs("div",{className:"flex flex-col gap-4 border-b border-slate-100 pb-6 sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:g?.id?"Update catalogue record":"Create catalogue record"}),t.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Define product master information, atelier references, and jobwork eligibility."})]}),t.jsx("button",{type:"submit",disabled:me,className:"inline-flex items-center gap-2 rounded-full bg-slate-900 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-slate-900/20 transition hover:bg-slate-700 disabled:cursor-not-allowed disabled:opacity-60",children:me?"Saving…":g?.id?"Save changes":"Create product"})]}),t.jsxs("div",{className:"mt-6 grid gap-6 lg:grid-cols-2",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[t.jsx("span",{children:"SKU *"}),t.jsx("input",{type:"text",value:_.sku,onChange:e=>w("sku",e.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),E.sku&&t.jsx("span",{className:"text-xs text-rose-500",children:E.sku})]}),t.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[t.jsx("span",{children:"Product name *"}),t.jsx("input",{type:"text",value:_.name,onChange:e=>w("name",e.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),E.name&&t.jsx("span",{className:"text-xs text-rose-500",children:E.name})]}),t.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[t.jsx("span",{children:"Brand *"}),t.jsxs("select",{value:_.brand_id,onChange:e=>w("brand_id",e.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[t.jsx("option",{value:"",children:"Select brand"}),Object.entries(je).map(([e,s])=>t.jsx("option",{value:e,children:s},e))]}),E.brand_id&&t.jsx("span",{className:"text-xs text-rose-500",children:E.brand_id})]}),t.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[t.jsx("span",{children:"Category *"}),t.jsxs("select",{value:_.category_id,onChange:e=>w("category_id",e.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[t.jsx("option",{value:"",children:"Select category"}),Object.entries(ke).map(([e,s])=>t.jsx("option",{value:e,children:s},e))]}),E.category_id&&t.jsx("span",{className:"text-xs text-rose-500",children:E.category_id})]}),t.jsxs("div",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[t.jsx("span",{children:"Assign catalogues"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(we).map(([e,s])=>{const i=String(e),r=_.product_catalog_ids.includes(i);return t.jsxs("button",{type:"button",onClick:()=>{r?w("product_catalog_ids",_.product_catalog_ids.filter(l=>l!==i)):w("product_catalog_ids",[..._.product_catalog_ids,i])},className:`inline-flex items-center gap-2 rounded-full px-4 py-2 text-xs font-semibold transition ${r?"bg-sky-600 text-white shadow-sky-600/30":"bg-slate-100 text-slate-600 hover:bg-sky-50 hover:text-sky-600"}`,children:[s,r&&t.jsx("span",{className:"text-[10px] uppercase tracking-[0.3em]",children:"×"})]},e)})}),t.jsx("span",{className:"text-[11px] text-slate-400",children:"Link the product to one or more catalogues for customer-facing navigation."}),E.product_catalog_ids&&t.jsx("span",{className:"text-xs text-rose-500",children:E.product_catalog_ids})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:t.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[t.jsx("span",{children:"Making charge (₹) *"}),t.jsx("input",{type:"number",step:"0.01",min:"0",value:_.making_charge,onChange:e=>w("making_charge",e.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),E.making_charge&&t.jsx("span",{className:"text-xs text-rose-500",children:E.making_charge})]})}),t.jsxs("label",{className:"inline-flex items-center gap-3 rounded-2xl border border-slate-200 px-4 py-3 text-sm text-slate-600",children:[t.jsx("input",{type:"checkbox",checked:_.is_jobwork_allowed,onChange:e=>w("is_jobwork_allowed",e.target.checked),className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),"Jobwork requests allowed for this SKU"]})]})]})]}),t.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-xl shadow-slate-900/10",children:[t.jsx("div",{className:"flex flex-col gap-3 border-b border-slate-100 pb-4 lg:flex-row lg:items-center lg:justify-between",children:t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Product description"}),t.jsx("p",{className:"text-sm text-slate-500",children:"Provide merchandising copy, craftsmanship details, and any atelier notes for this SKU."})]})}),t.jsxs("div",{className:"mt-6",children:[t.jsx(it,{value:_.description,onChange:e=>w("description",e),className:"overflow-hidden rounded-3xl border border-slate-200",placeholder:"Detail the design notes, materials, finish, and atelier craftsmanship."}),E.description&&t.jsx("span",{className:"mt-2 block text-xs text-rose-500",children:E.description})]})]}),t.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-xl shadow-slate-900/10",children:[t.jsx("div",{className:"flex flex-col gap-4 border-b border-slate-100 pb-4 lg:flex-row lg:items-center lg:justify-between",children:t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Product media"}),t.jsx("p",{className:"text-sm text-slate-500",children:"Upload product images or videos for catalogue displays. You can also remove outdated media assets."})]})}),t.jsxs("div",{className:"mt-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-slate-400",children:"Current media"}),t.jsx("div",{className:"mt-3 grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:ye.length>0?ye.map(e=>t.jsxs("div",{className:`relative overflow-hidden rounded-3xl border border-slate-200 bg-slate-50 shadow-sm transition ${be(e.id)?"opacity-50 ring-2 ring-rose-200":""}`,children:[e.type==="video"?t.jsx("video",{src:e.url,className:"h-48 w-full rounded-t-3xl bg-black object-cover",controls:!0,onError:s=>{console.error("Video load error:",e.url),s.target.style.display="none"},children:"Your browser does not support the video tag."}):t.jsx("img",{src:e.url,alt:"Product media",className:"h-48 w-full rounded-t-3xl object-cover",onError:s=>{console.error("Image load error:",e.url),s.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="400" height="300"%3E%3Crect fill="%23ddd" width="400" height="300"/%3E%3Ctext fill="%23999" font-family="sans-serif" font-size="18" x="50%25" y="50%25" text-anchor="middle" dy=".3em"%3EImage not found%3C/text%3E%3C/svg%3E'}}),t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 text-xs text-slate-500",children:[t.jsx("span",{className:"rounded-full bg-white/70 px-3 py-1 font-semibold text-slate-700",children:e.type.toUpperCase()}),t.jsx("button",{type:"button",onClick:()=>Je(e.id),className:"text-rose-500 transition hover:text-rose-600",children:be(e.id)?"Undo removal":"Remove"})]})]},e.id)):t.jsx("p",{className:"rounded-2xl border border-dashed border-slate-200 px-4 py-6 text-sm text-slate-500",children:"No media uploaded yet."})})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-slate-400",children:"Upload new files"}),t.jsxs("label",{className:"mt-3 flex cursor-pointer flex-col items-center justify-center gap-3 rounded-3xl border border-dashed border-slate-300 bg-slate-50 px-6 py-10 text-center text-slate-500 transition hover:border-slate-400 hover:bg-slate-100",children:[t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-slate-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 15a4 4 0 014-4h10a4 4 0 014 4v3a2 2 0 01-2 2H5a2 2 0 01-2-2v-3z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 10l5-5m0 0l5 5m-5-5v12"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"Click to upload"}),t.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"JPEG, PNG, WebP, MP4 up to 50MB each."})]}),t.jsx("input",{type:"file",multiple:!0,accept:"image/*,video/*",onChange:Xe,className:"hidden"})]}),fe.length>0&&t.jsx("ul",{className:"mt-3 space-y-1",children:fe.map((e,s)=>t.jsx("li",{className:"text-xs text-rose-500",children:e},`${s}-${e}`))}),(_.media_uploads??[]).length>0&&t.jsx("ul",{className:"mt-4 space-y-2",children:(_.media_uploads??[]).map((e,s)=>t.jsxs("li",{className:"flex items-center justify-between rounded-2xl border border-slate-200 px-4 py-2 text-sm text-slate-600",children:[t.jsx("span",{className:"truncate",children:e.name}),t.jsx("button",{type:"button",onClick:()=>Ie(s),className:"text-rose-500 transition hover:text-rose-600",children:"Remove"})]},`${e.name}-${s}`))})]})]})]}),t.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-xl shadow-slate-900/10",children:[t.jsxs("div",{className:"flex flex-col gap-3 border-b border-slate-100 pb-4 lg:flex-row lg:items-center lg:justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Variant configuration"}),t.jsx("p",{className:"text-sm text-slate-500",children:"Decide whether this product uses a single price or multiple combinations across metals and diamonds."})]}),t.jsxs("label",{className:"inline-flex items-center gap-3 rounded-2xl border border-slate-200 px-4 py-3 text-sm text-slate-600",children:[t.jsx("input",{type:"checkbox",checked:_.is_variant_product,onChange:e=>Le(e.target.checked),className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),"Variant product (multi-option catalogue)"]})]}),_.is_variant_product?t.jsxs("div",{className:"mt-6 space-y-6",children:[t.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-200 p-4",children:[t.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-slate-500",children:"Size dimension"}),t.jsx("p",{className:"text-xs text-slate-500",children:"Maintain consistent size data across variants. Add numeric values and choose the preferred unit."})]}),t.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-600",children:[t.jsx("input",{type:"checkbox",checked:_.size_dimension_enabled,onChange:e=>Oe(e.target.checked),className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),"Use size dimension"]})]}),_.size_dimension_enabled&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-xs font-semibold uppercase tracking-[0.3em] text-slate-400",children:[t.jsx("span",{children:"Unit"}),t.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-600",children:[t.jsx("input",{type:"radio",name:"size-unit",value:"mm",checked:_.size_unit==="mm",onChange:()=>pe("mm"),className:"h-4 w-4 border-slate-300 text-sky-600 focus:ring-sky-500"}),"Millimetres (mm)"]}),t.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-600",children:[t.jsx("input",{type:"radio",name:"size-unit",value:"cm",checked:_.size_unit==="cm",onChange:()=>pe("cm"),className:"h-4 w-4 border-slate-300 text-sky-600 focus:ring-sky-500"}),"Centimetres (cm)"]})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"number",step:"0.001",min:"0",value:ce,onChange:e=>ue(e.target.value),className:"w-24 rounded-2xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:`e.g. 25${_.size_unit}`}),t.jsx("button",{type:"button",onClick:Te,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 px-4 py-1.5 text-xs font-semibold uppercase tracking-[0.2em] text-slate-600 transition hover:border-slate-400 hover:text-slate-900",children:"Add size"})]}),_.size_values.length===0&&t.jsx("span",{className:"text-xs text-slate-400",children:"Add at least one size value to use in the variant matrix."})]}),_.size_values.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2",children:_.size_values.map(e=>t.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-slate-300 bg-slate-50 px-3 py-1 text-xs font-semibold text-slate-600",children:[e,_.size_unit,t.jsx("button",{type:"button",onClick:()=>qe(e),className:"text-rose-500 transition hover:text-rose-600","aria-label":`Remove size ${e}${_.size_unit}`,children:"×"})]},`${e}-${_.size_unit}`))})]})]}),t.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-200 p-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-slate-500",children:"Metals"}),t.jsx("p",{className:"text-xs text-slate-500",children:"Select metals that can be used in your product variants."})]}),H.length>0?t.jsx("div",{className:"flex flex-wrap gap-3",children:H.map(e=>{const s=_.metal_ids.includes(e.id);return t.jsxs("label",{className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 text-xs font-semibold transition ${s?"border-sky-400 bg-white text-sky-700":"border-slate-200 bg-white text-slate-600 hover:border-slate-300"}`,children:[t.jsx("input",{type:"checkbox",checked:s,onChange:()=>Fe(e.id),className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),e.name]},e.id)})}):t.jsx("p",{className:"text-xs text-slate-400",children:"No metals available yet."})]}),_.metal_ids.length>0&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"space-y-4",children:H.filter(e=>_.metal_ids.includes(e.id)).map(e=>{const s=ae.filter(b=>b.metal_id===e.id),i=le.filter(b=>b.metal_id===e.id),r=s.filter(b=>_.metal_purity_ids.includes(b.id)),l=i.filter(b=>_.metal_tone_ids.includes(b.id)),d=r.length>0,f=l.length>0,y=typeof e.id=="number"?e.id:Number(e.id),j=_.metal_mix_mode?.[y],z=j&&(j==="normal"||j==="mix_tones"||j==="mix_purities")?j:"normal",V=!d&&!f?0:z==="mix_tones"&&d&&f?r.length:z==="mix_purities"&&d&&f?l.length:d&&f?r.length*l.length:d?r.length:f?l.length:0,S=(()=>{if(!d&&!f)return"";const b=r.map(x=>x.name).sort().join(", "),$=l.map(x=>x.name).sort().join(", ");if(z==="normal")if(d&&f){const x=[];return r.forEach(a=>{l.forEach(m=>{x.push(`${a.name} ${m.name}`)})}),`Will create separate variants for each combination: ${x.join(", ")}.`}else{if(d)return`Will create separate variants for: ${b}.`;if(f)return`Will create separate variants for: ${$}.`}else{if(z==="mix_tones"&&d&&f)return`Will create one variant per purity: ${r.map(x=>`${x.name} (${$})`).join(", ")}.`;if(z==="mix_purities"&&d&&f)return`Will create one variant per tone: ${l.map(x=>`${x.name} (${b})`).join(", ")}.`}return""})();return t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm",children:[t.jsxs("div",{className:"mb-4 flex items-center justify-between border-b border-slate-100 pb-3",children:[t.jsxs("h3",{className:"text-base font-semibold text-slate-900",children:["Metal: ",e.name]}),V>0&&t.jsxs("span",{className:"rounded-full bg-sky-50 px-3 py-1 text-xs font-semibold text-sky-700",children:[V," variant",V!==1?"s":""," for this metal"]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"mb-2 block text-xs font-semibold text-slate-600",children:"Purities for this metal"}),s.length>0?t.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(b=>{const $=_.metal_purity_ids.includes(b.id);return t.jsxs("label",{className:`inline-flex cursor-pointer items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold transition ${$?"border-sky-400 bg-sky-50 text-sky-700 shadow-sm":"border-slate-200 bg-white text-slate-600 hover:border-slate-300 hover:bg-slate-50"}`,children:[t.jsx("input",{type:"checkbox",checked:$,onChange:()=>Ue(b.id),className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),b.name]},b.id)})}):t.jsxs("p",{className:"text-xs text-slate-400",children:["No purities available for ",e.name,"."]}),t.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Choose all purities in which this design is available for ",e.name,"."]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-2 block text-xs font-semibold text-slate-600",children:"Tones for this metal"}),i.length>0?t.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(b=>{const $=_.metal_tone_ids.includes(b.id);return t.jsxs("label",{className:`inline-flex cursor-pointer items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold transition ${$?"border-sky-400 bg-sky-50 text-sky-700 shadow-sm":"border-slate-200 bg-white text-slate-600 hover:border-slate-300 hover:bg-slate-50"}`,children:[t.jsx("input",{type:"checkbox",checked:$,onChange:()=>Be(b.id),className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),b.name]},b.id)})}):t.jsxs("p",{className:"text-xs text-slate-400",children:["No tones available for ",e.name,"."]}),t.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Choose all tones in which this design is available for ",e.name,"."]})]}),d&&f&&t.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-4",children:[t.jsx("label",{className:"mb-3 block text-xs font-semibold text-slate-700",children:"Mixing behavior"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("label",{className:"flex cursor-pointer items-start gap-3 rounded-lg border border-slate-200 bg-white p-3 transition hover:border-sky-300 hover:bg-sky-50/50",children:[t.jsx("input",{type:"radio",name:`metal-mix-mode-${e.id}`,value:"normal",checked:z==="normal",onChange:()=>{w(b=>{const $=typeof e.id=="number"?e.id:Number(e.id),x={...b,metal_mix_mode:{...b.metal_mix_mode,[$]:"normal"}};return te(x)})},className:"mt-0.5 h-4 w-4 border-slate-300 text-sky-600 focus:ring-sky-500"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-semibold text-slate-900",children:"Separate variants"}),t.jsx("div",{className:"mt-1 text-xs text-slate-600",children:"Create one variant for each purity × tone combination for this metal."})]})]}),t.jsxs("label",{className:"flex cursor-pointer items-start gap-3 rounded-lg border border-slate-200 bg-white p-3 transition hover:border-sky-300 hover:bg-sky-50/50",children:[t.jsx("input",{type:"radio",name:`metal-mix-mode-${e.id}`,value:"mix_tones",checked:z==="mix_tones",onChange:()=>{w(b=>{const $=typeof e.id=="number"?e.id:Number(e.id),x={...b,metal_mix_mode:{...b.metal_mix_mode,[$]:"mix_tones"}};return te(x)})},className:"mt-0.5 h-4 w-4 border-slate-300 text-sky-600 focus:ring-sky-500"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-semibold text-slate-900",children:"Combine tones per purity"}),t.jsx("div",{className:"mt-1 text-xs text-slate-600",children:"For each purity, combine all selected tones into a single variant. Example: 18K Yellow + White Gold in one variant."})]})]}),t.jsxs("label",{className:"flex cursor-pointer items-start gap-3 rounded-lg border border-slate-200 bg-white p-3 transition hover:border-sky-300 hover:bg-sky-50/50",children:[t.jsx("input",{type:"radio",name:`metal-mix-mode-${e.id}`,value:"mix_purities",checked:z==="mix_purities",onChange:()=>{w(b=>{const $=typeof e.id=="number"?e.id:Number(e.id),x={...b,metal_mix_mode:{...b.metal_mix_mode,[$]:"mix_purities"}};return te(x)})},className:"mt-0.5 h-4 w-4 border-slate-300 text-sky-600 focus:ring-sky-500"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-semibold text-slate-900",children:"Combine purities per tone"}),t.jsx("div",{className:"mt-1 text-xs text-slate-600",children:"For each tone, combine all selected purities into a single variant. Example: 18K + 22K Yellow Gold in one variant."})]})]})]}),S&&t.jsxs("div",{className:"mt-4 rounded-lg bg-sky-50 border border-sky-200 p-3",children:[t.jsx("p",{className:"text-xs font-medium text-sky-900",children:"Preview:"}),t.jsx("p",{className:"mt-1 text-xs text-sky-700",children:S})]})]})]})]},e.id)})}),_.metal_ids.length>0&&t.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"Preview generated variants"}),t.jsxs("p",{className:"mt-1 text-xs text-slate-500",children:["This setup will generate approximately ",t.jsx("span",{className:"font-semibold text-slate-900",children:_.variants.length})," variant",_.variants.length!==1?"s":""," based on your current configuration."]})]}),t.jsx("button",{type:"button",onClick:he,className:"rounded-full border border-slate-300 bg-white px-4 py-2 text-xs font-semibold text-slate-700 transition hover:border-slate-400 hover:bg-slate-50",children:"Regenerate matrix"})]})})]}),t.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-200 p-4",children:[t.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-slate-500",children:"Diamond mixes"}),t.jsx("p",{className:"text-xs text-slate-500",children:"Define reusable diamond combinations that can be referenced by product variants."})]}),t.jsxs("label",{className:"inline-flex items-center gap-3 rounded-2xl border border-slate-200 px-4 py-3 text-sm text-slate-600",children:[t.jsx("input",{type:"checkbox",checked:_.uses_diamond,onChange:e=>Pe(e.target.checked),className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),"Use diamonds in variants"]})]}),_.uses_diamond&&t.jsx("div",{className:"space-y-4",children:t.jsxs(t.Fragment,{children:[_.diamond_options.map((e,s)=>t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[t.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[t.jsxs("h4",{className:"text-sm font-semibold text-slate-900",children:["Configuration #",s+1]}),_.diamond_options.length>1&&t.jsx("button",{type:"button",onClick:()=>Re(e.key),className:"text-xs text-rose-500 transition hover:text-rose-700",children:"Remove"})]}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[t.jsxs("label",{className:"flex flex-col gap-1.5 text-xs font-medium text-slate-600",children:["Type",t.jsxs("select",{value:e.type_id===""?"":e.type_id,onChange:i=>K(e.key,"type_id",i.target.value===""?"":Number(i.target.value)),className:"rounded-xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[t.jsx("option",{value:"",children:"No type"}),P.types.map(i=>t.jsx("option",{value:i.id,children:i.name},i.id))]})]}),t.jsxs("label",{className:"flex flex-col gap-1.5 text-xs font-medium text-slate-600",children:["Shape",t.jsxs("select",{value:e.shape_id===""?"":e.shape_id,onChange:i=>K(e.key,"shape_id",i.target.value===""?"":Number(i.target.value)),className:"rounded-xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[t.jsx("option",{value:"",children:"No shape"}),P.shapes.map(i=>t.jsx("option",{value:i.id,children:i.name},i.id))]})]}),t.jsxs("label",{className:"flex flex-col gap-1.5 text-xs font-medium text-slate-600",children:["Color",t.jsxs("select",{value:e.color_id===""?"":e.color_id,onChange:i=>K(e.key,"color_id",i.target.value===""?"":Number(i.target.value)),className:"rounded-xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[t.jsx("option",{value:"",children:"No color"}),P.colors.map(i=>t.jsx("option",{value:i.id,children:i.name},i.id))]})]}),t.jsxs("label",{className:"flex flex-col gap-1.5 text-xs font-medium text-slate-600",children:["Clarity",t.jsxs("select",{value:e.clarity_id===""?"":e.clarity_id,onChange:i=>K(e.key,"clarity_id",i.target.value===""?"":Number(i.target.value)),className:"rounded-xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[t.jsx("option",{value:"",children:"No clarity"}),P.clarities.map(i=>t.jsx("option",{value:i.id,children:i.name},i.id))]})]}),t.jsxs("label",{className:"flex flex-col gap-1.5 text-xs font-medium text-slate-600",children:["Cut",t.jsxs("select",{value:e.cut_id===""?"":e.cut_id,onChange:i=>K(e.key,"cut_id",i.target.value===""?"":Number(i.target.value)),className:"rounded-xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[t.jsx("option",{value:"",children:"No cut"}),P.cuts.map(i=>t.jsx("option",{value:i.id,children:i.name},i.id))]})]}),t.jsxs("label",{className:"flex flex-col gap-1.5 text-xs font-medium text-slate-600",children:["Weight (Ct)",t.jsx("input",{type:"number",step:"0.01",min:"0",value:e.weight,onChange:i=>K(e.key,"weight",i.target.value),className:"rounded-xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"0.00"})]}),t.jsxs("label",{className:"flex flex-col gap-1.5 text-xs font-medium text-slate-600",children:["Number of Diamonds",t.jsx("input",{type:"number",step:"1",min:"0",value:e.diamonds_count,onChange:i=>K(e.key,"diamonds_count",i.target.value),className:"rounded-xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"0"})]})]})]},e.key)),t.jsxs("button",{type:"button",onClick:Ke,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-4 py-2 text-sm font-semibold text-slate-700 transition hover:border-sky-400 hover:bg-sky-50",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 5v14M5 12h14"})}),"Add diamond option"]})]})})]})]}):t.jsx("p",{className:"mt-6 rounded-2xl border border-dashed border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-600",children:"Variants are disabled. Customers will see the making charge defined above."})]}),_.is_variant_product&&t.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-xl shadow-slate-900/10 ring-1 ring-slate-200/80",children:[t.jsxs("div",{className:"flex flex-col gap-4 border-b border-slate-200 pb-6 lg:flex-row lg:items-center lg:justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"Variant Matrix"}),t.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Configure product variants with metals, diamonds, and specifications. The default variant powers the customer catalogue card pricing."})]}),t.jsxs("button",{type:"button",onClick:he,className:"inline-flex items-center gap-2 rounded-full bg-slate-900 px-4 py-2 text-sm font-semibold text-white shadow-lg shadow-slate-900/20 transition hover:bg-slate-700",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h7"})}),"Generate Matrix"]})]}),ge&&t.jsx("div",{className:"mt-6 rounded-2xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-600 ring-1 ring-rose-200/50",children:ge}),t.jsx("div",{className:"mt-8 overflow-hidden rounded-3xl bg-white shadow-xl shadow-slate-900/10 ring-1 ring-slate-200/80",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-sm",children:[t.jsx("thead",{className:"bg-slate-50 text-xs text-slate-500",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-5 py-3 text-left min-w-[150px]",children:"SKU"}),t.jsx("th",{className:"px-5 py-3 text-left min-w-[300px]",children:"Variant Label"}),t.jsx("th",{className:"px-5 py-3 text-left",children:"Metal"}),t.jsx("th",{className:"px-5 py-3 text-left",children:"Metal Purity"}),t.jsx("th",{className:"px-5 py-3 text-left",children:"Metal Tone"}),t.jsx("th",{className:"px-5 py-3 text-left",children:"Metal Weight (g)"}),t.jsx("th",{className:"px-5 py-3 text-left",children:"Diamond Type"}),t.jsx("th",{className:"px-5 py-3 text-left",children:"Diamond Clarity"}),t.jsx("th",{className:"px-5 py-3 text-left",children:"Diamond Color"}),t.jsx("th",{className:"px-5 py-3 text-left",children:"Diamond Shape"}),t.jsx("th",{className:"px-5 py-3 text-left",children:"Diamond Cut"}),t.jsx("th",{className:"px-5 py-3 text-left",children:"Diamond Weight"}),t.jsx("th",{className:"px-5 py-3 text-left",children:"Size"}),t.jsx("th",{className:"px-5 py-3 text-left",children:"Inventory Quantity"}),t.jsx("th",{className:"px-5 py-3 text-left",children:"Status"}),t.jsx("th",{className:"px-5 py-3 text-left",children:"Default"}),t.jsx("th",{className:"px-5 py-3 text-right",children:"Actions"})]})}),t.jsxs("tbody",{className:"divide-y divide-slate-100 bg-white",children:[_.variants.map((e,s)=>{const i=I(e,_);i.metalTone;const r=(e.metals||[]).filter(n=>n.metal_id!==""&&n.metal_id!==null&&typeof n.metal_id=="number");r.reduce((n,p)=>{const h=parseFloat(p.metal_weight||p.weight_grams||"0");return n+(isNaN(h)?0:h)},0);const l=new Map;r.forEach(n=>{const p=n.metal_id;l.has(p)||l.set(p,[]),l.get(p).push({metal_id:p,metal_purity_id:n.metal_purity_id!==""&&n.metal_purity_id!==null?typeof n.metal_purity_id=="number"?n.metal_purity_id:Number(n.metal_purity_id):null,metal_tone_id:n.metal_tone_id!==""&&n.metal_tone_id!==null?typeof n.metal_tone_id=="number"?n.metal_tone_id:Number(n.metal_tone_id):null})});const d=[],f=[],y=[];l.forEach((n,p)=>{const h=G[p]||"";h&&d.push(h);const C=new Set,D=new Set;if(n.forEach(c=>{if(c.metal_purity_id!==null){const k=typeof c.metal_purity_id=="number"?c.metal_purity_id:Number(c.metal_purity_id);Number.isFinite(k)&&C.add(k)}if(c.metal_tone_id!==null){const k=typeof c.metal_tone_id=="number"?c.metal_tone_id:Number(c.metal_tone_id);Number.isFinite(k)&&D.add(k)}}),C.size>0){const c=Array.from(C).map(k=>{const M=typeof k=="number"?k:Number(k);return Number.isFinite(M)&&W[M]||""}).filter(Boolean).sort();c.length>0&&(C.size>1?f.push(`${c.join(" + ")} (${h})`):f.push(`${c[0]} (${h})`))}if(D.size>0){const c=Array.from(D).map(k=>{const M=typeof k=="number"?k:Number(k);return Number.isFinite(M)&&Q[M]||""}).filter(Boolean).sort();c.length>0&&(D.size>1?y.push(`${c.join(" + ")} (${h})`):y.push(`${c[0]} (${h})`))}});const j=d.length>0?d.join(", "):"—",z=f.length>0?f.join(" / "):"—",L=y.length>0?y.join(" / "):"—";let V=(e.diamonds||[]).filter(n=>n.diamond_type_id!==""&&n.diamond_type_id!==null||n.diamond_clarity_id!==""&&n.diamond_clarity_id!==null||n.diamond_color_id!==""&&n.diamond_color_id!==null||n.diamond_shape_id!==""&&n.diamond_shape_id!==null||n.diamond_cut_id!==""&&n.diamond_cut_id!==null);if(V.length===0&&e.diamond_option_key){const n=_.diamond_options.find(p=>p.key===e.diamond_option_key);n&&(V=[{id:void 0,diamond_type_id:n.type_id!==""?n.type_id:"",diamond_clarity_id:n.clarity_id!==""?n.clarity_id:"",diamond_color_id:n.color_id!==""?n.color_id:"",diamond_shape_id:n.shape_id!==""?n.shape_id:"",diamond_cut_id:n.cut_id!==""?n.cut_id:"",diamonds_count:"",total_carat:n.weight||""}])}const o=[],S=[],b=[],$=[],x=[],a=[];V.forEach(n=>{if(n.diamond_type_id!==""&&n.diamond_type_id!==null){const p=O.types[Number(n.diamond_type_id)];p&&!o.includes(p)&&o.push(p)}if(n.diamond_clarity_id!==""&&n.diamond_clarity_id!==null){const p=O.clarities[Number(n.diamond_clarity_id)];p&&!S.includes(p)&&S.push(p)}if(n.diamond_color_id!==""&&n.diamond_color_id!==null){const p=O.colors[Number(n.diamond_color_id)];p&&!b.includes(p)&&b.push(p)}if(n.diamond_shape_id!==""&&n.diamond_shape_id!==null){const p=O.shapes[Number(n.diamond_shape_id)];p&&!$.includes(p)&&$.push(p)}if(n.diamond_cut_id!==""&&n.diamond_cut_id!==null){const p=O.cuts[Number(n.diamond_cut_id)];p&&!x.includes(p)&&x.push(p)}if(n.total_carat&&n.total_carat!==""){const p=`${n.total_carat}ct`;a.includes(p)||a.push(p)}});const m=e.metadata??{},N=typeof m.size_value=="string"||typeof m.size_value=="number"?String(m.size_value):"",v=m.size_unit==="mm"||m.size_unit==="cm"?m.size_unit:_.size_unit,T=N?`${N}${v}`:e.size_cm?`${B(parseFloat(e.size_cm))}cm`:"—",u=typeof m.status=="string"&&m.status.trim().length>0?String(m.status):"enabled";return i.autoLabel,t.jsxs(t.Fragment,{children:[t.jsxs("tr",{className:`hover:bg-slate-50 ${u==="disabled"?"opacity-70":""} ${e.is_default?"bg-sky-50/30":""}`,children:[t.jsxs("td",{className:"px-5 py-3 align-middle min-w-[150px]",children:[t.jsx("input",{type:"text",value:e.sku,onChange:n=>Z(s,"sku",n.target.value),className:"w-full min-w-[120px] rounded-xl border border-slate-200 px-3 py-1.5 text-sm text-slate-700 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"Variant SKU"}),E[`variants.${s}.sku`]&&t.jsx("p",{className:"mt-1 text-xs text-rose-500",children:E[`variants.${s}.sku`]})]}),t.jsxs("td",{className:"px-5 py-3 align-middle min-w-[300px]",children:[t.jsx("input",{type:"text",value:e.label,onChange:n=>Z(s,"label",n.target.value),className:"w-full min-w-[280px] rounded-xl border border-slate-200 px-3 py-1.5 text-sm text-slate-700 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"Display label"}),E[`variants.${s}.label`]&&t.jsx("p",{className:"mt-1 text-xs text-rose-500",children:E[`variants.${s}.label`]})]}),t.jsx("td",{className:"px-5 py-3 align-middle text-slate-700",children:t.jsx("div",{className:"max-w-xs",children:t.jsx("span",{className:"text-sm font-medium text-slate-800",children:j})})}),t.jsx("td",{className:"px-5 py-3 align-middle text-slate-700",children:t.jsx("div",{className:"max-w-xs",children:t.jsx("span",{className:"text-sm text-slate-700",children:z})})}),t.jsx("td",{className:"px-5 py-3 align-middle text-slate-700",children:t.jsx("div",{className:"max-w-xs",children:t.jsx("span",{className:"text-sm text-slate-700",children:L})})}),t.jsx("td",{className:"px-5 py-3 align-middle text-slate-700",children:t.jsx("div",{className:"space-y-2 min-w-[120px]",children:r.length>0?r.map((n,p)=>{const h=G[n.metal_id]||"Unknown Metal",C=n.metal_purity_id&&typeof n.metal_purity_id=="number"&&F.find(c=>c.id===n.metal_purity_id)?.name||"",D=n.metal_tone_id&&typeof n.metal_tone_id=="number"&&U.find(c=>c.id===n.metal_tone_id)?.name||"";return t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsxs("label",{className:"text-xs font-medium text-slate-600",children:[h,C&&` - ${C}`,D&&` - ${D}`]}),t.jsx("input",{type:"number",step:"0.001",min:"0.001",required:!0,value:n.metal_weight||n.weight_grams||"",onChange:c=>{const k=c.target.value;ee(s,p,"metal_weight",k),(!n.weight_grams||n.weight_grams==="")&&ee(s,p,"weight_grams",k)},className:`w-full rounded-lg border px-2.5 py-1.5 text-xs font-medium transition-colors ${!n.metal_weight&&!n.weight_grams?"border-rose-300 bg-rose-50 focus:border-rose-400 focus:bg-white":"border-slate-200 bg-white focus:border-sky-400"} focus:outline-none focus:ring-1 focus:ring-sky-200`,placeholder:"0.000"}),!n.metal_weight&&!n.weight_grams&&t.jsx("span",{className:"text-[10px] text-rose-500",children:"Required"})]},p)}):t.jsx("span",{className:"text-sm text-slate-400",children:"—"})})}),t.jsx("td",{className:"px-5 py-3 align-middle text-slate-700",children:t.jsx("div",{className:"max-w-xs",children:t.jsx("span",{className:"text-sm text-slate-700",children:o.length>0?o.join(", "):"—"})})}),t.jsx("td",{className:"px-5 py-3 align-middle text-slate-700",children:t.jsx("div",{className:"max-w-xs",children:t.jsx("span",{className:"text-sm text-slate-700",children:S.length>0?S.join(", "):"—"})})}),t.jsx("td",{className:"px-5 py-3 align-middle text-slate-700",children:t.jsx("div",{className:"max-w-xs",children:t.jsx("span",{className:"text-sm text-slate-700",children:b.length>0?b.join(", "):"—"})})}),t.jsx("td",{className:"px-5 py-3 align-middle text-slate-700",children:t.jsx("div",{className:"max-w-xs",children:t.jsx("span",{className:"text-sm text-slate-700",children:$.length>0?$.join(", "):"—"})})}),t.jsx("td",{className:"px-5 py-3 align-middle text-slate-700",children:t.jsx("div",{className:"max-w-xs",children:t.jsx("span",{className:"text-sm text-slate-700",children:x.length>0?x.join(", "):"—"})})}),t.jsx("td",{className:"px-5 py-3 align-middle text-slate-700",children:t.jsx("div",{className:"max-w-xs",children:t.jsx("span",{className:"text-sm text-slate-700",children:a.length>0?a.join(", "):"—"})})}),t.jsx("td",{className:"px-5 py-3 align-middle text-slate-700",children:T}),t.jsx("td",{className:"px-5 py-3 align-middle text-slate-700",children:t.jsx("input",{type:"number",min:"0",step:"1",value:e.inventory_quantity!==void 0&&e.inventory_quantity!==null&&e.inventory_quantity!==""?String(e.inventory_quantity):"",onChange:n=>{const p=n.target.value.trim();if(p==="")Z(s,"inventory_quantity","");else{const h=parseInt(p,10);!isNaN(h)&&h>=0&&Z(s,"inventory_quantity",h)}},onBlur:n=>{n.target.value.trim()===""&&Z(s,"inventory_quantity",0)},className:"w-full min-w-[100px] rounded-xl border border-slate-200 px-3 py-1.5 text-sm text-slate-700 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"0"})}),t.jsx("td",{className:"px-5 py-3 text-slate-700",children:t.jsxs("select",{value:u,onChange:n=>Ge(s,{status:n.target.value}),className:`rounded-xl border px-3 py-1.5 text-sm text-slate-700 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200 ${u==="enabled"?"border-emerald-300 bg-emerald-50":"border-amber-300 bg-amber-50"}`,children:[t.jsx("option",{value:"enabled",children:"Enabled"}),t.jsx("option",{value:"disabled",children:"Disabled"})]})}),t.jsx("td",{className:"px-5 py-3 text-slate-700",children:t.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-600",children:[t.jsx("input",{type:"radio",name:"default-variant-table",checked:e.is_default,onChange:()=>He(s),className:"h-4 w-4 text-sky-600 focus:ring-sky-500"}),t.jsx("span",{children:e.is_default?"Default":"Set default"})]})}),t.jsx("td",{className:"px-5 py-3 text-right",children:t.jsx("button",{type:"button",onClick:()=>We(s),className:"inline-flex items-center justify-center rounded-full border border-rose-200 p-2 text-rose-600 transition hover:border-rose-300 hover:text-rose-700","aria-label":"Remove variant",children:t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,className:"h-4 w-4",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 7h12m-9 3v6m6-6v6M10 4h4a1 1 0 0 1 1 1v1H9V5a1 1 0 0 1 1-1Z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 7h14l-.8 11.2A2 2 0 0 1 16.2 20H7.8a2 2 0 0 1-1.99-1.8L5 7Z"})]})})})]},e.id??`variant-${s}`),Ve.has(s)&&t.jsx("tr",{children:t.jsx("td",{colSpan:17,className:"px-5 py-4",children:t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[t.jsx("div",{className:"mb-4 flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-semibold text-slate-900",children:"Metals for this Variant"}),t.jsxs("p",{className:"mt-1 text-xs text-slate-600",children:[t.jsx("span",{className:"font-semibold text-rose-600",children:"Required:"})," Enter metal weight (in grams) for each metal in this variant."]})]})}),r.length===0?t.jsx("p",{className:"text-xs text-slate-400",children:"No metals assigned to this variant."}):t.jsx("div",{className:"space-y-3",children:r.map((n,p)=>{const h=G[n.metal_id]||"Unknown Metal",C=n.metal_purity_id&&typeof n.metal_purity_id=="number"&&F.find(c=>c.id===n.metal_purity_id)?.name||"",D=n.metal_tone_id&&typeof n.metal_tone_id=="number"&&U.find(c=>c.id===n.metal_tone_id)?.name||"";return t.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[t.jsx("div",{className:"mb-3 flex items-center justify-between",children:t.jsxs("span",{className:"text-xs font-semibold text-slate-600",children:[h,C&&` — ${C}`,D&&` — ${D}`]})}),t.jsx("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:t.jsxs("label",{className:"flex flex-col gap-1.5",children:[t.jsxs("span",{className:"text-xs font-semibold text-slate-700 flex items-center gap-1",children:[t.jsx("span",{children:"Metal Weight (g)"}),t.jsx("span",{className:"text-rose-500 font-bold text-sm",title:"Required field",children:"*"})]}),t.jsx("input",{type:"number",step:"0.001",min:"0.001",required:!0,value:n.metal_weight||n.weight_grams||"",onChange:c=>{const k=c.target.value;ee(s,p,"metal_weight",k),(!n.weight_grams||n.weight_grams==="")&&ee(s,p,"weight_grams",k)},className:`rounded-xl border-2 px-3 py-2 text-sm font-medium transition-colors ${!n.metal_weight&&!n.weight_grams?"border-rose-300 bg-rose-50 focus:border-rose-400 focus:bg-white":"border-slate-200 bg-white focus:border-sky-400"} focus:outline-none focus:ring-2 focus:ring-sky-200`,placeholder:"Enter weight (required)"}),!n.metal_weight&&!n.weight_grams&&t.jsx("span",{className:"text-xs text-rose-600 font-medium",children:"⚠️ This field is required"})]})})]},p)})})]})})}),De.has(s)&&t.jsx("tr",{children:t.jsx("td",{colSpan:17,className:"px-5 py-4",children:t.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[t.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-semibold text-slate-900",children:"Diamonds for this Variant"}),_.diamond_mixing_mode==="shared"&&t.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"This variant uses the shared diamond list defined above. All variants share the same diamonds."}),_.diamond_mixing_mode==="as_variant"&&t.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"This variant has its specific diamond from the diamond mixes list. Each variant-diamond combination is a separate sellable variant."})]}),_.diamond_mixing_mode==="shared"&&t.jsx("p",{className:"mb-4 text-xs text-slate-500",children:'In "shared" mode, diamonds are managed in the "Diamond mixes" section above. All variants use the same diamond list.'}),_.diamond_mixing_mode==="as_variant"&&t.jsxs("button",{type:"button",onClick:()=>Ye(s),className:"inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-3 py-1.5 text-xs font-semibold text-slate-700 transition hover:border-sky-400 hover:bg-sky-50",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 5v14M5 12h14"})}),"Add Diamond"]})]}),V.length===0?t.jsx("p",{className:"text-xs text-slate-400",children:_.diamond_mixing_mode==="shared"?"No diamonds assigned to this variant from the shared matrix.":'No diamonds added to this variant. Click "Add Diamond" to add one.'}):t.jsx("div",{className:"space-y-3",children:V.map((n,p)=>t.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4",children:[t.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[t.jsxs("span",{className:"text-xs font-semibold text-slate-600",children:["Diamond #",p+1]}),_.diamond_mixing_mode==="as_variant"&&t.jsx("button",{type:"button",onClick:()=>Qe(s,p),className:"text-xs text-rose-500 transition hover:text-rose-700",children:"Remove"})]}),t.jsxs("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:[t.jsxs("label",{className:"flex flex-col gap-1.5 text-xs font-medium text-slate-600",children:["Type",t.jsxs("select",{value:n.diamond_type_id===""?"":n.diamond_type_id,onChange:h=>R(s,p,"diamond_type_id",h.target.value===""?"":Number(h.target.value)),disabled:_.diamond_mixing_mode==="shared",className:`rounded-xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200 ${_.diamond_mixing_mode==="shared"?"bg-slate-50 cursor-not-allowed":""}`,children:[t.jsx("option",{value:"",children:"Select type"}),P.types.map(h=>t.jsx("option",{value:h.id,children:h.name},h.id))]})]}),t.jsxs("label",{className:"flex flex-col gap-1.5 text-xs font-medium text-slate-600",children:["Clarity",t.jsxs("select",{value:n.diamond_clarity_id===""?"":n.diamond_clarity_id,onChange:h=>R(s,p,"diamond_clarity_id",h.target.value===""?"":Number(h.target.value)),disabled:_.diamond_mixing_mode==="shared",className:`rounded-xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200 ${_.diamond_mixing_mode==="shared"?"bg-slate-50 cursor-not-allowed":""}`,children:[t.jsx("option",{value:"",children:"Select clarity"}),P.clarities.map(h=>t.jsx("option",{value:h.id,children:h.name},h.id))]})]}),t.jsxs("label",{className:"flex flex-col gap-1.5 text-xs font-medium text-slate-600",children:["Color",t.jsxs("select",{value:n.diamond_color_id===""?"":n.diamond_color_id,onChange:h=>R(s,p,"diamond_color_id",h.target.value===""?"":Number(h.target.value)),disabled:_.diamond_mixing_mode==="shared",className:`rounded-xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200 ${_.diamond_mixing_mode==="shared"?"bg-slate-50 cursor-not-allowed":""}`,children:[t.jsx("option",{value:"",children:"Select color"}),P.colors.map(h=>t.jsx("option",{value:h.id,children:h.name},h.id))]})]}),t.jsxs("label",{className:"flex flex-col gap-1.5 text-xs font-medium text-slate-600",children:["Shape",t.jsxs("select",{value:n.diamond_shape_id===""?"":n.diamond_shape_id,onChange:h=>R(s,p,"diamond_shape_id",h.target.value===""?"":Number(h.target.value)),disabled:_.diamond_mixing_mode==="shared",className:`rounded-xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200 ${_.diamond_mixing_mode==="shared"?"bg-slate-50 cursor-not-allowed":""}`,children:[t.jsx("option",{value:"",children:"Select shape"}),P.shapes.map(h=>t.jsx("option",{value:h.id,children:h.name},h.id))]})]}),t.jsxs("label",{className:"flex flex-col gap-1.5 text-xs font-medium text-slate-600",children:["Cut",t.jsxs("select",{value:n.diamond_cut_id===""?"":n.diamond_cut_id,onChange:h=>R(s,p,"diamond_cut_id",h.target.value===""?"":Number(h.target.value)),disabled:_.diamond_mixing_mode==="shared",className:`rounded-xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200 ${_.diamond_mixing_mode==="shared"?"bg-slate-50 cursor-not-allowed":""}`,children:[t.jsx("option",{value:"",children:"Select cut"}),P.cuts.map(h=>t.jsx("option",{value:h.id,children:h.name},h.id))]})]}),t.jsxs("label",{className:"flex flex-col gap-1.5 text-xs font-medium text-slate-600",children:["Total Carat",t.jsx("input",{type:"number",step:"0.01",min:"0",value:n.total_carat,onChange:h=>R(s,p,"total_carat",h.target.value),disabled:_.diamond_mixing_mode==="shared",className:`rounded-xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200 ${_.diamond_mixing_mode==="shared"?"bg-slate-50 cursor-not-allowed":""}`,placeholder:"0.00"})]}),t.jsxs("label",{className:"flex flex-col gap-1.5 text-xs font-medium text-slate-600",children:["Number of Diamonds",t.jsx("input",{type:"number",step:"1",min:"0",value:n.diamonds_count,onChange:h=>R(s,p,"diamonds_count",h.target.value),disabled:_.diamond_mixing_mode==="shared",className:`rounded-xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200 ${_.diamond_mixing_mode==="shared"?"bg-slate-50 cursor-not-allowed":""}`,placeholder:"0"})]})]})]},p))})]})})})]})}),_.variants.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:17,className:"px-5 py-6 text-center text-xs uppercase tracking-[0.1em] text-slate-400",children:"No variants configured. Generate matrix to create variants."})})]})]})})})]})]})]})}export{mt as default};
