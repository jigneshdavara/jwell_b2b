import{u as c,a as m,r as h,j as e,H as u,L as p}from"./app-UdF9nnLx.js";import{A as j}from"./AdminLayout-DyC34ZeJ.js";function N(){const{order:t,statusOptions:n}=c().props,{data:a,setData:l,post:r,processing:i}=m({status:t.status,meta:{comment:""}}),o=s=>{s.preventDefault(),r(route("admin.orders.update-status",t.id),{preserveScroll:!0})},x=h.useMemo(()=>{if(t.payments.length===0)return"No payments recorded";const s=t.payments[0];return`${s.status??"Pending"} · ₹ ${s.amount.toLocaleString("en-IN")}`},[t.payments]),d=s=>s?new Date(s).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return e.jsxs(j,{children:[e.jsx(u,{title:`Order ${t.reference}`}),e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"rounded-3xl bg-white p-6 shadow-xl shadow-slate-900/10 ring-1 ring-slate-200/80",children:e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400",children:"Order reference"}),e.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:t.reference}),e.jsxs("p",{className:"mt-1 text-sm text-slate-500",children:[t.user?.name??"Guest"," · ",t.user?.email??"—"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"inline-flex items-center rounded-full bg-indigo-50 px-4 py-1 text-xs font-semibold text-indigo-700",children:t.status_label}),e.jsxs("p",{className:"mt-2 text-xs text-slate-400",children:["Payment state: ",x]})]})]})}),e.jsxs("div",{className:"grid gap-4 lg:grid-cols-[2fr_1fr]",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("form",{onSubmit:o,className:"space-y-4 rounded-3xl bg-white p-6 shadow-xl shadow-slate-900/10 ring-1 ring-slate-200/80",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Update status"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[e.jsx("span",{className:"font-semibold text-slate-800",children:"Workflow stage"}),e.jsx("select",{className:"rounded-2xl border border-slate-300 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",value:a.status,onChange:s=>l("status",s.target.value),children:n.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[e.jsx("span",{className:"font-semibold text-slate-800",children:"Operator note"}),e.jsx("textarea",{className:"min-h-[100px] rounded-2xl border border-slate-300 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",value:a.meta.comment??"",onChange:s=>l("meta",{...a.meta,comment:s.target.value}),placeholder:"Optional note shared with production & support"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(p,{href:route("admin.orders.index"),className:"rounded-full border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-600 transition hover:border-slate-400 hover:text-slate-900",children:"Back"}),e.jsx("button",{type:"submit",disabled:i,className:"rounded-full bg-slate-900 px-5 py-2 text-sm font-semibold text-white shadow shadow-slate-900/20 transition hover:bg-slate-700 disabled:cursor-not-allowed disabled:opacity-60",children:"Save status"})]})]}),e.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-xl shadow-slate-900/10 ring-1 ring-slate-200/80",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Line items"}),e.jsx("div",{className:"mt-4 divide-y divide-slate-200",children:t.items.map(s=>e.jsxs("div",{className:"flex flex-col gap-3 py-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-900",children:s.name}),e.jsxs("p",{className:"text-xs text-slate-500",children:["SKU: ",s.sku]})]}),e.jsxs("div",{className:"text-sm text-slate-600 md:text-right",children:[e.jsxs("p",{children:["Qty: ",s.quantity]}),e.jsxs("p",{children:["Total: ₹ ",s.total_price.toLocaleString("en-IN")]})]})]},s.id))})]}),e.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-xl shadow-slate-900/10 ring-1 ring-slate-200/80",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Status history"}),e.jsxs("div",{className:"mt-4 space-y-3 text-sm text-slate-600",children:[t.status_history.length===0&&e.jsx("p",{className:"text-xs text-slate-400",children:"No status updates recorded yet."}),t.status_history.map(s=>e.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-slate-200 px-4 py-3",children:[e.jsx("span",{className:"font-semibold text-slate-800",children:s.status.replace(/_/g," ")}),e.jsx("span",{className:"text-xs text-slate-400",children:d(s.created_at)})]},s.id))]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-xl shadow-slate-900/10 ring-1 ring-slate-200/80",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Totals"}),e.jsxs("dl",{className:"mt-4 space-y-2 text-sm text-slate-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{children:"Subtotal"}),e.jsxs("dd",{children:["₹ ",t.subtotal_amount.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{children:"Tax"}),e.jsxs("dd",{children:["₹ ",t.tax_amount.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{children:"Discount"}),e.jsxs("dd",{children:["-₹ ",t.discount_amount.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"flex justify-between text-base font-semibold text-slate-900",children:[e.jsx("dt",{children:"Grand Total"}),e.jsxs("dd",{children:["₹ ",t.total_amount.toLocaleString("en-IN")]})]})]})]}),e.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-xl shadow-slate-900/10 ring-1 ring-slate-200/80",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Payments"}),e.jsxs("div",{className:"mt-4 space-y-2 text-sm text-slate-600",children:[t.payments.length===0&&e.jsx("p",{className:"text-xs text-slate-400",children:"No payments captured."}),t.payments.map(s=>e.jsxs("div",{className:"rounded-2xl border border-slate-200 px-4 py-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-semibold text-slate-800",children:s.status}),e.jsx("span",{className:"text-xs text-slate-400",children:d(s.created_at)})]}),e.jsxs("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:["₹ ",s.amount.toLocaleString("en-IN")]})]},s.id)),t.status==="pending_payment"&&e.jsx("p",{className:"text-xs text-amber-600",children:"Waiting for customer to complete payment."}),t.status==="paid"&&e.jsx("p",{className:"text-xs text-emerald-600",children:"Payment confirmed."})]})]}),e.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-xl shadow-slate-900/10 ring-1 ring-slate-200/80",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Price breakdown"}),e.jsx("pre",{className:"mt-4 max-h-64 overflow-auto rounded-2xl bg-slate-900/95 p-4 text-xs text-slate-100",children:JSON.stringify(t.price_breakdown??{},null,2)})]})]})]})]})]})}export{N as default};
