import{u as w,a as c,j as e,H as k,b as C}from"./app-DlYpOb3X.js";import{A as D}from"./AuthenticatedLayout-CC4xX56_.js";import"./ApplicationLogo-D6j-nJf5.js";import"./FlashMessage-CnsLhOfR.js";const h={pending:{title:"Awaiting compliance review",description:"Our team is validating your documents. We will reach out within 24 working hours.",badge:"bg-amber-100 text-amber-700"},review:{title:"Action required from you",description:"Please update the details below or upload the requested documents so we can proceed.",badge:"bg-rose-100 text-rose-700"},rejected:{title:"Application declined",description:"Update your details and resubmit for another review or contact support for clarification.",badge:"bg-rose-100 text-rose-700"},approved:{title:"KYC approved",description:"Access the catalogue, jobwork, and wholesale pricing instantly.",badge:"bg-emerald-100 text-emerald-700"}};function U(){const{user:l,profile:r,documents:x,documentTypes:u,messages:m,can_customer_reply:d}=w().props,t=c({business_name:r?.business_name??"",business_website:r?.business_website??"",gst_number:r?.gst_number??"",pan_number:r?.pan_number??"",registration_number:r?.registration_number??"",address_line1:r?.address_line1??"",address_line2:r?.address_line2??"",city:r?.city??"",state:r?.state??"",postal_code:r?.postal_code??"",country:r?.country??"India",contact_name:r?.contact_name??l.name,contact_phone:r?.contact_phone??l.phone??""}),o=c({document_type:u[0]??"gst_certificate",document_file:null}),n=c({message:""}),p=h[l.kyc_status]??h.pending,g={approved:"bg-emerald-100 text-emerald-700",rejected:"bg-rose-100 text-rose-700",needs_revision:"bg-amber-100 text-amber-700",pending:"bg-slate-100 text-slate-700"},b=s=>{s.preventDefault(),t.patch(route("onboarding.kyc.profile.update"),{preserveScroll:!0})},f=s=>{const i=s.target.files?.[0]??null;o.setData("document_file",i)},j=s=>{s.preventDefault(),o.post(route("onboarding.kyc.documents.store"),{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{o.reset("document_file");const i=document.getElementById("document_file");i&&(i.value="")}})},y=s=>{s.preventDefault(),!(!n.data.message.trim()||!d)&&n.post(route("onboarding.kyc.messages.store"),{preserveScroll:!0,onSuccess:()=>n.reset("message")})},v=s=>s?new Date(s).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",N=s=>{C.delete(route("onboarding.kyc.documents.destroy",s),{preserveScroll:!0})},_=l.kyc_status==="approved";return e.jsxs(D,{children:[e.jsx(k,{title:"KYC onboarding"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-slate-900 via-slate-800 to-blue-900 p-8 text-white shadow-2xl",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top_left,_rgba(56,189,248,0.25),_transparent_40%),_radial-gradient(circle_at_bottom_right,_rgba(249,115,22,0.25),_transparent_45%)]"}),e.jsxs("div",{className:"relative z-10 flex flex-col gap-6 lg:flex-row lg:items-start lg:justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-white/70",children:"Elvee onboarding"}),e.jsx("h1",{className:"mt-2 text-3xl font-semibold",children:"KYC verification status"}),e.jsx("p",{className:"mt-3 max-w-2xl text-sm text-white/80",children:p.description}),l.kyc_notes&&e.jsxs("div",{className:"mt-4 rounded-2xl bg-white/10 p-4 text-sm text-amber-200",children:[e.jsx("p",{className:"font-semibold text-amber-300",children:"Reviewer notes"}),e.jsx("p",{className:"mt-2 whitespace-pre-line",children:l.kyc_notes})]})]}),e.jsxs("div",{className:"flex flex-col items-start gap-3 lg:items-end",children:[e.jsx("span",{className:`rounded-full px-4 py-1 text-xs font-semibold ${p.badge}`,children:l.kyc_status==="review"?"needs attention":l.kyc_status}),_?e.jsxs("a",{href:route("dashboard"),className:"inline-flex items-center gap-2 rounded-full bg-white px-4 py-2 text-sm font-semibold text-slate-900 shadow-lg shadow-slate-900/20",children:["Go to dashboard",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}):e.jsx("span",{className:"text-xs text-white/70",children:"Access unlocks after approval"})]})]})]}),e.jsxs("section",{className:"grid gap-8 lg:grid-cols-[1.4fr_1fr]",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("form",{onSubmit:b,className:"space-y-5 rounded-3xl bg-white p-6 shadow-xl ring-1 ring-slate-200/70",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Business profile"}),e.jsx("button",{type:"submit",disabled:t.processing,className:"rounded-full bg-slate-900 px-4 py-2 text-sm font-semibold text-white shadow shadow-slate-900/20 transition hover:bg-slate-700 disabled:cursor-not-allowed disabled:opacity-60",children:t.processing?"Saving…":"Save changes"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:[e.jsx("span",{children:"Business / store name"}),e.jsx("input",{type:"text",value:t.data.business_name,onChange:s=>t.setData("business_name",s.target.value),className:"rounded-2xl border border-slate-300 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",required:!0}),e.jsx(a,{message:t.errors.business_name})]}),e.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:[e.jsx("span",{children:"Website"}),e.jsx("input",{type:"text",value:t.data.business_website,onChange:s=>t.setData("business_website",s.target.value),className:"rounded-2xl border border-slate-300 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"https://example.com"}),e.jsx(a,{message:t.errors.business_website})]}),e.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:[e.jsx("span",{children:"GST number"}),e.jsx("input",{type:"text",value:t.data.gst_number,onChange:s=>t.setData("gst_number",s.target.value.toUpperCase()),className:"rounded-2xl border border-slate-300 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"Optional"}),e.jsx(a,{message:t.errors.gst_number})]}),e.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:[e.jsx("span",{children:"PAN"}),e.jsx("input",{type:"text",value:t.data.pan_number,onChange:s=>t.setData("pan_number",s.target.value.toUpperCase()),className:"rounded-2xl border border-slate-300 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"Optional"}),e.jsx(a,{message:t.errors.pan_number})]}),e.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:[e.jsx("span",{children:"Registration number"}),e.jsx("input",{type:"text",value:t.data.registration_number,onChange:s=>t.setData("registration_number",s.target.value),className:"rounded-2xl border border-slate-300 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"MSME / CIN"}),e.jsx(a,{message:t.errors.registration_number})]}),e.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:[e.jsx("span",{children:"Contact person"}),e.jsx("input",{type:"text",value:t.data.contact_name,onChange:s=>t.setData("contact_name",s.target.value),className:"rounded-2xl border border-slate-300 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),e.jsx(a,{message:t.errors.contact_name})]}),e.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:[e.jsx("span",{children:"Contact phone"}),e.jsx("input",{type:"text",value:t.data.contact_phone,onChange:s=>t.setData("contact_phone",s.target.value),className:"rounded-2xl border border-slate-300 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),e.jsx(a,{message:t.errors.contact_phone})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:[e.jsx("span",{children:"Address line 1"}),e.jsx("input",{type:"text",value:t.data.address_line1,onChange:s=>t.setData("address_line1",s.target.value),className:"rounded-2xl border border-slate-300 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),e.jsx(a,{message:t.errors.address_line1})]}),e.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:[e.jsx("span",{children:"Address line 2"}),e.jsx("input",{type:"text",value:t.data.address_line2,onChange:s=>t.setData("address_line2",s.target.value),className:"rounded-2xl border border-slate-300 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),e.jsx(a,{message:t.errors.address_line2})]}),e.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:[e.jsx("span",{children:"City"}),e.jsx("input",{type:"text",value:t.data.city,onChange:s=>t.setData("city",s.target.value),className:"rounded-2xl border border-slate-300 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),e.jsx(a,{message:t.errors.city})]}),e.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:[e.jsx("span",{children:"State"}),e.jsx("input",{type:"text",value:t.data.state,onChange:s=>t.setData("state",s.target.value),className:"rounded-2xl border border-slate-300 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),e.jsx(a,{message:t.errors.state})]}),e.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:[e.jsx("span",{children:"Postal code"}),e.jsx("input",{type:"text",value:t.data.postal_code,onChange:s=>t.setData("postal_code",s.target.value),className:"rounded-2xl border border-slate-300 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),e.jsx(a,{message:t.errors.postal_code})]}),e.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:[e.jsx("span",{children:"Country"}),e.jsx("input",{type:"text",value:t.data.country,onChange:s=>t.setData("country",s.target.value),className:"rounded-2xl border border-slate-300 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),e.jsx(a,{message:t.errors.country})]})]})]}),e.jsxs("form",{onSubmit:j,className:"space-y-5 rounded-3xl bg-white p-6 shadow-xl ring-1 ring-slate-200/70",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Upload supporting documents"}),e.jsx("button",{type:"submit",disabled:o.processing,className:"rounded-full bg-slate-900 px-4 py-2 text-sm font-semibold text-white shadow shadow-slate-900/20 transition hover:bg-slate-700 disabled:cursor-not-allowed disabled:opacity-60",children:o.processing?"Uploading…":"Upload"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:[e.jsx("span",{children:"Document type"}),e.jsx("select",{value:o.data.document_type,onChange:s=>o.setData("document_type",s.target.value),className:"rounded-2xl border border-slate-300 px-4 py-2 capitalize focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:u.map(s=>e.jsx("option",{value:s,children:s.replace(/_/g," ")},s))}),e.jsx(a,{message:o.errors.document_type})]}),e.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:[e.jsx("span",{children:"Attachment (PDF/JPG/PNG, max 8MB)"}),e.jsx("input",{id:"document_file",type:"file",accept:"application/pdf,image/jpeg,image/png",onChange:f,className:"rounded-2xl border border-slate-300 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",required:!0}),e.jsx(a,{message:o.errors.document_file})]})]})]})]}),e.jsxs("aside",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-xl ring-1 ring-slate-200/70",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Messages from compliance"}),e.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Track clarifications sent by the compliance desk. Respond when you have the requested information."}),e.jsx("div",{className:"mt-4 space-y-3 max-h-64 overflow-y-auto rounded-2xl bg-slate-50 p-4 text-sm text-slate-700",children:m.length===0?e.jsx("p",{className:"text-xs text-slate-500",children:"No messages yet. Compliance will reach out if anything is pending."}):m.map(s=>{const i=s.sender_type==="admin";return e.jsxs("div",{className:`flex flex-col gap-1 ${i?"items-start text-left":"items-end text-right"}`,children:[e.jsxs("span",{className:"text-[11px] text-slate-400",children:[i?s.admin?.name??"Compliance team":"You",s.created_at?` · ${v(s.created_at)}`:""]}),e.jsx("div",{className:`max-w-full rounded-2xl px-4 py-3 text-sm ${i?"bg-sky-100 text-sky-900 ring-1 ring-sky-200":"bg-slate-900 text-white"}`,children:e.jsx("p",{className:"whitespace-pre-line",children:s.message})})]},s.id)})}),!d&&e.jsx("p",{className:"mt-3 rounded-2xl bg-slate-50 px-4 py-3 text-xs text-slate-500",children:"Replies are disabled by the compliance team. You can still review their updates above."}),d&&e.jsxs("form",{onSubmit:y,className:"mt-4 space-y-2",children:[e.jsxs("label",{className:"flex flex-col gap-2 text-xs text-slate-600",children:[e.jsx("span",{className:"font-semibold text-slate-700",children:"Send a reply"}),e.jsx("textarea",{value:n.data.message,onChange:s=>n.setData("message",s.target.value),className:"min-h-[90px] rounded-2xl border border-slate-300 px-4 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"Share the update or clarification you have for the compliance team.",disabled:n.processing}),e.jsx(a,{message:n.errors.message})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:n.processing||!n.data.message.trim(),className:"inline-flex items-center rounded-full bg-slate-900 px-4 py-2 text-xs font-semibold text-white shadow shadow-slate-900/20 transition hover:bg-slate-700 disabled:cursor-not-allowed disabled:opacity-60",children:n.processing?"Sending…":"Send message"})})]})]}),e.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-xl ring-1 ring-slate-200/70",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:"Submitted documents"}),e.jsxs("div",{className:"mt-4 space-y-3 text-sm",children:[x.length===0&&e.jsx("p",{className:"rounded-2xl bg-slate-50 p-4 text-slate-500",children:"Upload your GST, PAN, trade license or store photos to speed up verification."}),x.map(s=>e.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-800",children:s.type.replace(/_/g," ")}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Uploaded ",s.uploaded_at?new Date(s.uploaded_at).toLocaleString("en-IN"):"recently"]})]}),e.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold capitalize ${g[s.status]??g.pending}`,children:s.status})]}),s.remarks&&e.jsxs("p",{className:"mt-2 text-xs text-rose-500",children:["Remarks: ",s.remarks]}),e.jsxs("div",{className:"mt-3 flex items-center gap-3 text-xs font-semibold",children:[s.url&&e.jsxs(e.Fragment,{children:[e.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"text-sky-600 hover:text-sky-500",children:"View file"}),s.download_url&&e.jsx("a",{href:s.download_url,className:"text-slate-500 hover:text-slate-700",children:"Download"})]}),e.jsx("button",{type:"button",onClick:()=>N(s.id),className:"text-rose-500 hover:text-rose-600",children:"Delete"})]})]},s.id))]})]}),e.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-xl ring-1 ring-slate-200/70",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-500",children:"Need help?"}),e.jsxs("p",{className:"mt-3 text-sm text-slate-600",children:["Write to ",e.jsx("a",{href:"mailto:compliance@elvee.in",className:"font-semibold text-sky-600",children:"compliance@elvee.in"})," ","for expedited verification or assistance with additional paperwork."]})]})]})]})]})]})}function a({message:l}){return l?e.jsx("span",{className:"text-xs text-rose-500",children:l}):null}export{U as default};
