import{u as Oe,a as Ue,r as h,j as s,H as Pe}from"./app-BPfwiKJb.js";import{R as Ee}from"./RichTextEditor-EnIVHmSh.js";import{A as Fe}from"./AdminLayout-C7QSrqtK.js";const E=(L=!1)=>({sku:"",label:"",gold_purity_id:"",silver_purity_id:"",diamond_option_key:null,size_cm:"",price_adjustment:"0",is_default:L,metadata:{}}),A=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`local-${Date.now()}-${Math.random().toString(16).slice(2,8)}`,F=()=>({key:A(),type_id:"",shape_id:"",color_id:"",clarity_id:"",cut_id:"",weight:""});function Ke(){const{props:L}=Oe(),{product:d,brands:se,categories:te,productCatalogs:ae,goldPurities:N,silverPurities:v,diamondCatalog:b,customerGroups:Ae,errors:u}=L,ie=d?.diamond_options?.length?d.diamond_options.map((e,t)=>({key:e.key??`${A()}-${t}`,type_id:e.type_id??"",shape_id:e.shape_id??"",color_id:e.color_id??"",clarity_id:e.clarity_id??"",cut_id:e.cut_id??"",weight:e.weight!==null&&e.weight!==void 0?String(e.weight):""})):[],le=d?.variants?.length?d.variants.map((e,t)=>({id:e.id,sku:e.sku??"",label:e.label??"",gold_purity_id:e.gold_purity_id??"",silver_purity_id:e.silver_purity_id??"",diamond_option_key:e.diamond_option_key??null,size_cm:e.size_cm?String(e.size_cm):"",price_adjustment:String(e.price_adjustment??0),is_default:e.is_default??t===0,metadata:e.metadata??{}})):[E(!0)],re=d?.making_charge_discount_overrides?.length?d.making_charge_discount_overrides.map((e,t)=>({localKey:`${A()}-${t}`,customer_group_id:e.customer_group_id!==null&&e.customer_group_id!==void 0?Number(e.customer_group_id):"",type:e.type??"percentage",value:e.value!==null&&e.value!==void 0?String(e.value):""})):[],V=d?.metadata?.size_dimension??null,ne=V?.unit==="cm"?"cm":"mm",R=Array.isArray(V?.values)?(V?.values??[]).map(e=>String(e)):[],oe=R.length>0,O=Ue(()=>({sku:d?.sku??"",name:d?.name??"",description:d?.description??"",brand_id:String(d?.brand_id??""),category_id:String(d?.category_id??""),product_catalog_ids:(d?.product_catalog_ids??[]).map(e=>String(e)),gross_weight:d?.gross_weight?String(d.gross_weight):"",net_weight:d?.net_weight?String(d.net_weight):"",gold_weight:d?.gold_weight?String(d.gold_weight):"",silver_weight:d?.silver_weight?String(d.silver_weight):"",other_material_weight:d?.other_material_weight?String(d.other_material_weight):"",total_weight:d?.total_weight?String(d.total_weight):"",base_price:d?.base_price?String(d.base_price):"",making_charge:d?.making_charge?String(d.making_charge):"",making_charge_discount_type:d?.making_charge_discount_type??null,making_charge_discount_value:d?.making_charge_discount_value!==null&&d?.making_charge_discount_value!==void 0?String(d.making_charge_discount_value):null,making_charge_discount_overrides:re,is_jobwork_allowed:d?.is_jobwork_allowed??!1,visibility:d?.visibility??"public",standard_pricing:{labour_brand:d?.standard_pricing?.labour_brand?String(d.standard_pricing.labour_brand):"",diamond_rate:d?.standard_pricing?.diamond_rate?String(d.standard_pricing.diamond_rate):"",gold_rate:d?.standard_pricing?.gold_rate?String(d.standard_pricing.gold_rate):"",colourstone_rate:d?.standard_pricing?.colourstone_rate?String(d.standard_pricing.colourstone_rate):""},variants:le,is_variant_product:d?.is_variant_product??!0,uses_gold:d?.uses_gold??!1,uses_silver:d?.uses_silver??!1,uses_diamond:d?.uses_diamond??!1,gold_purity_ids:d?.gold_purity_ids??[],silver_purity_ids:d?.silver_purity_ids??[],diamond_options:ie,media_uploads:[],removed_media_ids:[],size_dimension_enabled:oe,size_unit:ne,size_values:R})),{setData:m,post:B,put:G,processing:K}=O,n=O.data,[T,W]=h.useState(""),y=e=>Number.isFinite(e)?e.toFixed(3).replace(/\.?0+$/,""):"",H=(e,t)=>{const a=parseFloat(e);if(!Number.isFinite(a))return"";const i=t==="mm"?a/10:a;return y(i)},S=(e,t)=>{const a=typeof e=="number"?e:parseFloat(e);if(!Number.isFinite(a))return"";const i=t==="mm"?a*10:a;return y(i)};h.useEffect(()=>{m(e=>{const t=l=>{const o=parseFloat(l);return Number.isFinite(o)?o:0},a=t(e.gold_weight)+t(e.silver_weight)+t(e.other_material_weight),i=a===0?"":a.toFixed(3).replace(/\.?0+$/,"");return e.total_weight===i?e:{...e,total_weight:i}})},[n.gold_weight,n.silver_weight,n.other_material_weight]);const U=h.useMemo(()=>Object.fromEntries(N.map(e=>[e.id,e.name])),[N]),P=h.useMemo(()=>Object.fromEntries(v.map(e=>[e.id,e.name])),[v]),k=h.useMemo(()=>({types:Object.fromEntries(b.types.map(e=>[e.id,e.name])),shapes:Object.fromEntries(b.shapes.map(e=>[e.id,e.name])),colors:Object.fromEntries(b.colors.map(e=>[e.id,e.name])),clarities:Object.fromEntries(b.clarities.map(e=>[e.id,e.name])),cuts:Object.fromEntries(b.cuts.map(e=>[e.id,e.name]))}),[b]),C=h.useCallback(e=>{if(!e)return"";const t=[];return e.weight&&t.push(`${e.weight} Ct`),e.shape_id&&t.push(k.shapes[Number(e.shape_id)]??""),e.clarity_id&&t.push(k.clarities[Number(e.clarity_id)]??""),e.color_id&&t.push(k.colors[Number(e.color_id)]??""),e.type_id&&t.push(k.types[Number(e.type_id)]??""),e.cut_id&&t.push(k.cuts[Number(e.cut_id)]??""),t.filter(Boolean).join(" - ")},[k]),$=h.useCallback((e,t)=>{const a=e.gold_purity_id!==""&&e.gold_purity_id!==null?U[Number(e.gold_purity_id)]??"":"",i=e.silver_purity_id!==""&&e.silver_purity_id!==null?P[Number(e.silver_purity_id)]??"":"",l=t.diamond_options.find(Ve=>Ve.key===e.diamond_option_key)??null,o=C(l),r=e.metadata??{},p=typeof r.size_value=="string"||typeof r.size_value=="number"?String(r.size_value):"",x=r.size_unit==="mm"||r.size_unit==="cm"?r.size_unit:t.size_unit;let g=t.size_dimension_enabled?x:"cm",c="";t.size_dimension_enabled?p?c=y(Number(p)):e.size_cm&&(c=S(e.size_cm,t.size_unit)):e.size_cm&&(c=y(parseFloat(e.size_cm)),g="cm");const f=c?`${c}${g}`:"",D=[o,a,i,f].filter(Boolean),I=D.length?D.join(" / "):"Variant",De=[a,i].filter(Boolean).join(" + "),Le=o,j={gold_purity_id:e.gold_purity_id!==""&&e.gold_purity_id!==null?Number(e.gold_purity_id):null,silver_purity_id:e.silver_purity_id!==""&&e.silver_purity_id!==null?Number(e.silver_purity_id):null,diamond_option_key:e.diamond_option_key??null,diamond:l?{key:l.key,type_id:l.type_id!==""?Number(l.type_id):null,shape_id:l.shape_id!==""?Number(l.shape_id):null,color_id:l.color_id!==""?Number(l.color_id):null,clarity_id:l.clarity_id!==""?Number(l.clarity_id):null,cut_id:l.cut_id!==""?Number(l.cut_id):null,weight:l.weight?Number(l.weight):null}:null,size_cm:e.size_cm?Number(e.size_cm):null,auto_label:I};c?(j.size_value=c,j.size_unit=g):(delete j.size_value,delete j.size_unit);const ee=typeof r.status=="string"&&r.status.trim().length>0?String(r.status):void 0;return ee?j.status=ee:j.status="enabled",{autoLabel:I,metalTone:De,stoneQuality:Le,sizeText:f,metadata:j}},[C,S,y,U,P]),_=h.useCallback(e=>e.variants.map((t,a)=>{const i=$(t,e),l=t.metadata?.auto_label??"",o=!t.label||t.label===l,r=t.metadata?.auto_sku??"",p=(e.sku??"").trim(),g=`${p?p.replace(/[^A-Za-z0-9]/g,"").toUpperCase():"SKU"}-${String(a+1).padStart(2,"0")}`,c=!t.sku||t.sku===r;return{...t,sku:c?g:t.sku,label:o?i.autoLabel:t.label,metadata:{...i.metadata,auto_sku:g},is_default:t.is_default??a===0}}),[$]),de=h.useMemo(()=>N.filter(e=>n.gold_purity_ids.includes(e.id)),[n.gold_purity_ids,N]),ce=h.useMemo(()=>v.filter(e=>n.silver_purity_ids.includes(e.id)),[n.silver_purity_ids,v]),M=h.useMemo(()=>n.diamond_options.map(e=>({key:e.key,label:C(e)||`Option ${e.key.slice(-4)}`})),[C,n.diamond_options]),q=h.useMemo(()=>M.reduce((e,t)=>(e[t.key]=t.label,e),{}),[M]),ue=e=>{m(t=>{const a={...t,is_variant_product:e,uses_gold:e?t.uses_gold:!1,uses_silver:e?t.uses_silver:!1,uses_diamond:e?t.uses_diamond:!1,gold_purity_ids:e?t.gold_purity_ids:[],silver_purity_ids:e?t.silver_purity_ids:[],diamond_options:e?t.diamond_options:[],size_dimension_enabled:e?t.size_dimension_enabled:!1,size_values:e?t.size_values:[],size_unit:e?t.size_unit:"mm",variants:e?t.variants.length>0?t.variants:[E(!0)]:[]};return e||(a.size_dimension_enabled=!1,a.size_values=[],a.size_unit="mm"),a.variants=_(a),a})},me=e=>{m(t=>{const a={...t,uses_gold:e,gold_purity_ids:e?t.gold_purity_ids:[],variants:e?t.variants:t.variants.map(i=>({...i,gold_purity_id:""}))};return a.variants=_(a),a})},xe=e=>{m(t=>{const a={...t,uses_silver:e,silver_purity_ids:e?t.silver_purity_ids:[],variants:e?t.variants:t.variants.map(i=>({...i,silver_purity_id:""}))};return a.variants=_(a),a})},pe=e=>{m(t=>{const a=e&&t.diamond_options.length===0?[F()]:e?t.diamond_options:[],i={...t,uses_diamond:e,diamond_options:a,variants:e?t.variants:t.variants.map(l=>({...l,diamond_option_key:null}))};return i.variants=_(i),i})},_e=e=>{m(t=>{const a={...t,size_dimension_enabled:e,size_values:e?t.size_values:[],size_unit:e?t.size_unit:"mm",variants:t.variants.map(i=>{if(e)return{...i};const l={...i.metadata??{}};return delete l.size_value,delete l.size_unit,{...i,size_cm:"",metadata:l}})};return a.variants=_(a),a})},Z=e=>{m(t=>{if(t.size_unit===e)return t;const a=t.size_values.map(l=>{const o=H(l,t.size_unit);return o?S(o,e):l}),i={...t,size_unit:e,size_values:a,variants:t.variants.map(l=>{if(!l.size_cm)return{...l,metadata:{...l.metadata??{},size_unit:e}};const o={...l.metadata??{}},r=S(l.size_cm,e);return r?(o.size_value=r,o.size_unit=e):(delete o.size_value,o.size_unit=e),{...l,metadata:o}})};return i.variants=_(i),i})},ge=()=>{const e=T.trim();if(!e)return;const t=parseFloat(e);if(!Number.isFinite(t)||t<=0)return;const a=y(t);m(i=>{if(i.size_values.includes(a))return i;const l={...i,size_values:[...i.size_values,a]};return l.variants=_(l),l}),W("")},he=e=>{m(t=>{const a={...t,size_values:t.size_values.filter(i=>i!==e)};return a.variants=_(a),a})},be=e=>{m(t=>{const i=t.gold_purity_ids.includes(e)?t.gold_purity_ids.filter(o=>o!==e):[...t.gold_purity_ids,e],l={...t,gold_purity_ids:i,variants:t.variants.map(o=>typeof o.gold_purity_id=="number"&&!i.includes(o.gold_purity_id)?{...o,gold_purity_id:""}:o)};return l.variants=_(l),l})},fe=e=>{m(t=>{const i=t.silver_purity_ids.includes(e)?t.silver_purity_ids.filter(o=>o!==e):[...t.silver_purity_ids,e],l={...t,silver_purity_ids:i,variants:t.variants.map(o=>typeof o.silver_purity_id=="number"&&!i.includes(o.silver_purity_id)?{...o,silver_purity_id:""}:o)};return l.variants=_(l),l})},ye=()=>{m(e=>{const t={...e,diamond_options:[...e.diamond_options,F()]};return t.variants=_(t),t})},w=(e,t,a)=>{m(i=>{const l=i.diamond_options.map(r=>{if(r.key!==e)return r;if(t==="weight")return{...r,weight:a===null?"":String(a)};const p=a===null||a===""?"":typeof a=="number"?a:a===""?"":Number(a);return{...r,[t]:p}}),o={...i,diamond_options:l};return o.variants=_(o),o})},je=e=>{m(t=>{const a=t.diamond_options.filter(l=>l.key!==e),i={...t,diamond_options:a,variants:t.variants.map(l=>l.diamond_option_key===e?{...l,diamond_option_key:null}:l)};return i.variants=_(i),i})},Ne=e=>{m(t=>{if(t.variants.length===1)return t;const a=t.variants.filter((l,o)=>o!==e);a.every(l=>!l.is_default)&&a.length>0&&(a[0].is_default=!0);const i={...t,variants:a};return i.variants=_(i),i})},z=(e,t,a)=>{m(i=>{const l=i.variants.map((r,p)=>{if(p!==e)return r;const x={...r};switch(t){case"is_default":typeof a=="boolean"&&(x.is_default=a);break;case"gold_purity_id":(a===""||typeof a=="number")&&(x.gold_purity_id=a);break;case"silver_purity_id":(a===""||typeof a=="number")&&(x.silver_purity_id=a);break;case"diamond_option_key":x.diamond_option_key=a?String(a):null;break;case"size_cm":typeof a=="string"&&(x.size_cm=a);break;case"price_adjustment":typeof a=="string"&&(x.price_adjustment=a);break;case"sku":case"label":typeof a=="string"&&(x[t]=a);break}return x}),o={...i,variants:l};return o.variants=_(o),o})},ve=(e,t)=>{m(a=>{const i=a.variants.map((o,r)=>{if(r!==e)return o;const p={...o.metadata??{}};return Object.entries(t).forEach(([x,g])=>{g===null?delete p[x]:p[x]=g}),{...o,metadata:p}}),l={...a,variants:i};return l.variants=_(l),l})},ke=e=>{m(t=>({...t,variants:t.variants.map((a,i)=>({...a,is_default:i===e}))}))},we=()=>{m(e=>{const t=e.uses_gold?e.gold_purity_ids:[null],a=e.uses_silver?e.silver_purity_ids:[null],i=e.uses_diamond?e.diamond_options.map(x=>x.key):[null],l=e.size_dimension_enabled&&e.size_values.length>0?e.size_values:[null];if(e.uses_gold&&t.length===0||e.uses_silver&&a.length===0||e.uses_diamond&&i.length===0||e.size_dimension_enabled&&l.length===0)return e;const o=[];if(t.forEach(x=>{a.forEach(g=>{i.forEach(c=>{l.forEach(f=>{o.push({gold:x??"",silver:g??"",diamond:c??null,size:f??null})})})})}),o.length===0)return e;const r=o.map((x,g)=>{const c=E(g===0);x.gold!==""&&x.gold!==null&&(c.gold_purity_id=x.gold),x.silver!==""&&x.silver!==null&&(c.silver_purity_id=x.silver),x.diamond&&(c.diamond_option_key=x.diamond);const f={...c.metadata??{},status:"enabled"};if(x.size){const D=H(x.size,e.size_unit);c.size_cm=D,f.size_value=x.size,f.size_unit=e.size_unit}else delete f.size_value,delete f.size_unit;return c.metadata=f,c}),p={...e,variants:r};return p.variants=_(p),p})};h.useEffect(()=>{n.uses_diamond&&n.diamond_options.length===0&&m(e=>{const t={...e,diamond_options:[F()]};return t.variants=_(t),t})},[n.uses_diamond,n.diamond_options.length,_,m]);const ze=e=>{e.preventDefault(),O.transform(t=>{const a=t,i={...a};i.uses_gold=a.uses_gold,i.uses_silver=a.uses_silver,i.uses_diamond=a.uses_diamond,i.gold_purity_ids=a.uses_gold?[...a.gold_purity_ids]:[],i.silver_purity_ids=a.uses_silver?[...a.silver_purity_ids]:[],i.diamond_options=a.uses_diamond?a.diamond_options.map(r=>({key:r.key,type_id:r.type_id!==""?Number(r.type_id):null,shape_id:r.shape_id!==""?Number(r.shape_id):null,color_id:r.color_id!==""?Number(r.color_id):null,clarity_id:r.clarity_id!==""?Number(r.clarity_id):null,cut_id:r.cut_id!==""?Number(r.cut_id):null,weight:r.weight?Number(r.weight):null})):[];const l=r=>r==null||r===""?null:typeof r=="number"?r:Number(r);i.making_charge_discount_type=a.making_charge_discount_type||null,i.making_charge_discount_value=a.making_charge_discount_type?l(a.making_charge_discount_value):null,i.gold_weight=l(a.gold_weight),i.silver_weight=l(a.silver_weight),i.other_material_weight=l(a.other_material_weight),i.total_weight=l(a.total_weight),i.making_charge_discount_overrides=a.making_charge_discount_overrides.map(r=>({customer_group_id:r.customer_group_id!==""?Number(r.customer_group_id):null,type:r.type,value:l(r.value)})).filter(r=>r.customer_group_id!==null&&r.value!==null),i.variants=a.is_variant_product?a.variants.map(r=>{const p=$(r,a);return{id:r.id,sku:r.sku,label:r.label||p.autoLabel,metal_tone:p.metalTone||null,stone_quality:p.stoneQuality||null,size:p.sizeText||null,price_adjustment:r.price_adjustment,is_default:r.is_default,metadata:p.metadata}}):[];const o=a.size_values.map(r=>parseFloat(r)).filter(r=>Number.isFinite(r)&&r>0);return a.size_dimension_enabled&&o.length>0?i.metadata={size_dimension:{unit:a.size_unit,values:o}}:i.metadata=null,i.metadata||delete i.metadata,delete i.size_dimension_enabled,delete i.size_unit,delete i.size_values,a.is_variant_product||(i.uses_gold=!1,i.uses_silver=!1,i.uses_diamond=!1),(i.media_uploads?.length??0)===0&&delete i.media_uploads,(i.removed_media_ids?.length??0)===0&&delete i.removed_media_ids,i}),d?.id?(n.media_uploads?.length??0)>0?G(route("admin.products.update",d.id),{forceFormData:!0}):G(route("admin.products.update",d.id)):(n.media_uploads?.length??0)>0?B(route("admin.products.store"),{forceFormData:!0}):B(route("admin.products.store"))},J=u.variants,Q=h.useMemo(()=>Object.entries(u??{}).filter(([e])=>e.startsWith("media_uploads")).map(([,e])=>e),[u]),Y=h.useMemo(()=>d?.media?[...d.media].sort((e,t)=>e.position-t.position):[],[d?.media]),Se=e=>{const t=n.removed_media_ids??[],i=t.includes(e)?t.filter(l=>l!==e):[...t,e];m("removed_media_ids",i)},Ce=e=>{const t=e.target.files?Array.from(e.target.files):[];t.length!==0&&(m("media_uploads",[...n.media_uploads??[],...t]),e.target.value="")},$e=e=>{m("media_uploads",(n.media_uploads??[]).filter((t,a)=>a!==e))},X=e=>(n.removed_media_ids??[]).includes(e),Me=h.useMemo(()=>[{key:"labour_brand",label:"Labour brand / atelier",type:"text"},{key:"diamond_rate",label:"Diamond rate (₹/ct)",type:"number"},{key:"gold_rate",label:"Gold rate (₹/g)",type:"number"},{key:"colourstone_rate",label:"Colour stone rate (₹/ct)",type:"number"}],[]);return s.jsxs(Fe,{children:[s.jsx(Pe,{title:d?.id?`Edit ${d.name}`:"New Product"}),s.jsxs("form",{onSubmit:ze,className:"space-y-10",children:[s.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-xl shadow-slate-900/10",children:[s.jsxs("div",{className:"flex flex-col gap-4 border-b border-slate-100 pb-6 sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:d?.id?"Update catalogue record":"Create catalogue record"}),s.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Define product master information, atelier references, and jobwork eligibility."})]}),s.jsx("button",{type:"submit",disabled:K,className:"inline-flex items-center gap-2 rounded-full bg-slate-900 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-slate-900/20 transition hover:bg-slate-700 disabled:cursor-not-allowed disabled:opacity-60",children:K?"Saving…":d?.id?"Save changes":"Create product"})]}),s.jsxs("div",{className:"mt-6 grid gap-6 lg:grid-cols-2",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:"SKU *"}),s.jsx("input",{type:"text",value:n.sku,onChange:e=>m("sku",e.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),u.sku&&s.jsx("span",{className:"text-xs text-rose-500",children:u.sku})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:"Product name *"}),s.jsx("input",{type:"text",value:n.name,onChange:e=>m("name",e.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),u.name&&s.jsx("span",{className:"text-xs text-rose-500",children:u.name})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:"Brand *"}),s.jsxs("select",{value:n.brand_id,onChange:e=>m("brand_id",e.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[s.jsx("option",{value:"",children:"Select brand"}),Object.entries(se).map(([e,t])=>s.jsx("option",{value:e,children:t},e))]}),u.brand_id&&s.jsx("span",{className:"text-xs text-rose-500",children:u.brand_id})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:"Category *"}),s.jsxs("select",{value:n.category_id,onChange:e=>m("category_id",e.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[s.jsx("option",{value:"",children:"Select category"}),Object.entries(te).map(([e,t])=>s.jsx("option",{value:e,children:t},e))]}),u.category_id&&s.jsx("span",{className:"text-xs text-rose-500",children:u.category_id})]}),s.jsxs("div",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:"Assign catalogues"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(ae).map(([e,t])=>{const a=String(e),i=n.product_catalog_ids.includes(a);return s.jsxs("button",{type:"button",onClick:()=>{i?m("product_catalog_ids",n.product_catalog_ids.filter(l=>l!==a)):m("product_catalog_ids",[...n.product_catalog_ids,a])},className:`inline-flex items-center gap-2 rounded-full px-4 py-2 text-xs font-semibold transition ${i?"bg-sky-600 text-white shadow-sky-600/30":"bg-slate-100 text-slate-600 hover:bg-sky-50 hover:text-sky-600"}`,children:[t,i&&s.jsx("span",{className:"text-[10px] uppercase tracking-[0.3em]",children:"×"})]},e)})}),s.jsx("span",{className:"text-[11px] text-slate-400",children:"Link the product to one or more catalogues for customer-facing navigation."}),u.product_catalog_ids&&s.jsx("span",{className:"text-xs text-rose-500",children:u.product_catalog_ids})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:"Gold weight (g)"}),s.jsx("input",{type:"number",step:"0.001",value:n.gold_weight,onChange:e=>m("gold_weight",e.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"0.000"}),u.gold_weight&&s.jsx("span",{className:"text-xs text-rose-500",children:u.gold_weight})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:"Silver weight (g)"}),s.jsx("input",{type:"number",step:"0.001",value:n.silver_weight,onChange:e=>m("silver_weight",e.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"0.000"}),u.silver_weight&&s.jsx("span",{className:"text-xs text-rose-500",children:u.silver_weight})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:"Other material weight (g)"}),s.jsx("input",{type:"number",step:"0.001",value:n.other_material_weight,onChange:e=>m("other_material_weight",e.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"0.000"}),u.other_material_weight&&s.jsx("span",{className:"text-xs text-rose-500",children:u.other_material_weight})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:"Total weight (g)"}),s.jsx("input",{type:"text",value:n.total_weight,readOnly:!0,className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-2 text-slate-700 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"Auto"}),u.total_weight&&s.jsx("span",{className:"text-xs text-rose-500",children:u.total_weight}),s.jsx("span",{className:"text-[11px] text-slate-400",children:"Auto sum of gold, silver, and other material weights."})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:"Base price (₹) *"}),s.jsx("input",{type:"number",step:"0.01",value:n.base_price,onChange:e=>m("base_price",e.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),u.base_price&&s.jsx("span",{className:"text-xs text-rose-500",children:u.base_price})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:"Making charge (₹) *"}),s.jsx("input",{type:"number",step:"0.01",value:n.making_charge,onChange:e=>m("making_charge",e.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),u.making_charge&&s.jsx("span",{className:"text-xs text-rose-500",children:u.making_charge})]})]}),s.jsxs("label",{className:"inline-flex items-center gap-3 rounded-2xl border border-slate-200 px-4 py-3 text-sm text-slate-600",children:[s.jsx("input",{type:"checkbox",checked:n.is_jobwork_allowed,onChange:e=>m("is_jobwork_allowed",e.target.checked),className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),"Jobwork requests allowed for this SKU"]})]})]})]}),s.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-xl shadow-slate-900/10",children:[s.jsx("div",{className:"flex flex-col gap-3 border-b border-slate-100 pb-4 lg:flex-row lg:items-center lg:justify-between",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Product description"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Provide merchandising copy, craftsmanship details, and any atelier notes for this SKU."})]})}),s.jsxs("div",{className:"mt-6",children:[s.jsx(Ee,{value:n.description,onChange:e=>m("description",e),className:"overflow-hidden rounded-3xl border border-slate-200",placeholder:"Detail the design notes, materials, finish, and atelier craftsmanship."}),u.description&&s.jsx("span",{className:"mt-2 block text-xs text-rose-500",children:u.description})]})]}),s.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-xl shadow-slate-900/10",children:[s.jsx("div",{className:"flex flex-col gap-4 border-b border-slate-100 pb-4 lg:flex-row lg:items-center lg:justify-between",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Product media"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Upload product images or videos for catalogue displays. You can also remove outdated media assets."})]})}),s.jsxs("div",{className:"mt-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-slate-400",children:"Current media"}),s.jsx("div",{className:"mt-3 grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:Y.length>0?Y.map(e=>s.jsxs("div",{className:`relative overflow-hidden rounded-3xl border border-slate-200 bg-slate-50 shadow-sm transition ${X(e.id)?"opacity-50 ring-2 ring-rose-200":""}`,children:[e.type==="video"?s.jsx("video",{src:e.url,className:"h-48 w-full rounded-t-3xl bg-black object-cover",controls:!0,children:"Your browser does not support the video tag."}):s.jsx("img",{src:e.url,alt:"Product media",className:"h-48 w-full rounded-t-3xl object-cover"}),s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 text-xs text-slate-500",children:[s.jsx("span",{className:"rounded-full bg-white/70 px-3 py-1 font-semibold text-slate-700",children:e.type.toUpperCase()}),s.jsx("button",{type:"button",onClick:()=>Se(e.id),className:"text-rose-500 transition hover:text-rose-600",children:X(e.id)?"Undo removal":"Remove"})]})]},e.id)):s.jsx("p",{className:"rounded-2xl border border-dashed border-slate-200 px-4 py-6 text-sm text-slate-500",children:"No media uploaded yet."})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-slate-400",children:"Upload new files"}),s.jsxs("label",{className:"mt-3 flex cursor-pointer flex-col items-center justify-center gap-3 rounded-3xl border border-dashed border-slate-300 bg-slate-50 px-6 py-10 text-center text-slate-500 transition hover:border-slate-400 hover:bg-slate-100",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-slate-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 15a4 4 0 014-4h10a4 4 0 014 4v3a2 2 0 01-2 2H5a2 2 0 01-2-2v-3z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 10l5-5m0 0l5 5m-5-5v12"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"Click to upload"}),s.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"JPEG, PNG, WebP, MP4 up to 50MB each."})]}),s.jsx("input",{type:"file",multiple:!0,accept:"image/*,video/*",onChange:Ce,className:"hidden"})]}),Q.length>0&&s.jsx("ul",{className:"mt-3 space-y-1",children:Q.map((e,t)=>s.jsx("li",{className:"text-xs text-rose-500",children:e},`${t}-${e}`))}),(n.media_uploads??[]).length>0&&s.jsx("ul",{className:"mt-4 space-y-2",children:(n.media_uploads??[]).map((e,t)=>s.jsxs("li",{className:"flex items-center justify-between rounded-2xl border border-slate-200 px-4 py-2 text-sm text-slate-600",children:[s.jsx("span",{className:"truncate",children:e.name}),s.jsx("button",{type:"button",onClick:()=>$e(t),className:"text-rose-500 transition hover:text-rose-600",children:"Remove"})]},`${e.name}-${t}`))})]})]})]}),s.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-xl shadow-slate-900/10",children:[s.jsxs("div",{className:"flex flex-col gap-3 border-b border-slate-100 pb-4 lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Variant configuration"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Decide whether this product uses a single price or multiple combinations across metals and diamonds."})]}),s.jsxs("label",{className:"inline-flex items-center gap-3 rounded-2xl border border-slate-200 px-4 py-3 text-sm text-slate-600",children:[s.jsx("input",{type:"checkbox",checked:n.is_variant_product,onChange:e=>ue(e.target.checked),className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),"Variant product (multi-option catalogue)"]})]}),n.is_variant_product?s.jsxs("div",{className:"mt-6 space-y-6",children:[s.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-200 p-4",children:[s.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-slate-500",children:"Size dimension"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Maintain consistent size data across variants. Add numeric values and choose the preferred unit."})]}),s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-600",children:[s.jsx("input",{type:"checkbox",checked:n.size_dimension_enabled,onChange:e=>_e(e.target.checked),className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),"Use size dimension"]})]}),n.size_dimension_enabled&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-xs font-semibold uppercase tracking-[0.3em] text-slate-400",children:[s.jsx("span",{children:"Unit"}),s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-600",children:[s.jsx("input",{type:"radio",name:"size-unit",value:"mm",checked:n.size_unit==="mm",onChange:()=>Z("mm"),className:"h-4 w-4 border-slate-300 text-sky-600 focus:ring-sky-500"}),"Millimetres (mm)"]}),s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-600",children:[s.jsx("input",{type:"radio",name:"size-unit",value:"cm",checked:n.size_unit==="cm",onChange:()=>Z("cm"),className:"h-4 w-4 border-slate-300 text-sky-600 focus:ring-sky-500"}),"Centimetres (cm)"]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"number",step:"0.001",min:"0",value:T,onChange:e=>W(e.target.value),className:"w-24 rounded-2xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:`e.g. 25${n.size_unit}`}),s.jsx("button",{type:"button",onClick:ge,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 px-4 py-1.5 text-xs font-semibold uppercase tracking-[0.2em] text-slate-600 transition hover:border-slate-400 hover:text-slate-900",children:"Add size"})]}),n.size_values.length===0&&s.jsx("span",{className:"text-xs text-slate-400",children:"Add at least one size value to use in the variant matrix."})]}),n.size_values.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2",children:n.size_values.map(e=>s.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-slate-300 bg-slate-50 px-3 py-1 text-xs font-semibold text-slate-600",children:[e,n.size_unit,s.jsx("button",{type:"button",onClick:()=>he(e),className:"text-rose-500 transition hover:text-rose-600","aria-label":`Remove size ${e}${n.size_unit}`,children:"×"})]},`${e}-${n.size_unit}`))})]})]}),s.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-200 p-4",children:[s.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-slate-500",children:"Gold purities"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Choose which gold purities can appear in your variant matrix."})]}),s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-600",children:[s.jsx("input",{type:"checkbox",checked:n.uses_gold,onChange:e=>me(e.target.checked),className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),"Use gold in variants"]})]}),n.uses_gold&&s.jsx("div",{className:"rounded-2xl bg-slate-50 p-4",children:N.length>0?s.jsx("div",{className:"flex flex-wrap gap-3",children:N.map(e=>{const t=n.gold_purity_ids.includes(e.id);return s.jsxs("label",{className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 text-xs font-semibold transition ${t?"border-sky-400 bg-white text-sky-700":"border-slate-200 bg-white text-slate-600 hover:border-slate-300"}`,children:[s.jsx("input",{type:"checkbox",checked:t,onChange:()=>be(e.id),className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),e.name]},e.id)})}):s.jsx("p",{className:"text-xs text-slate-400",children:"No gold purities available yet."})})]}),s.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-200 p-4",children:[s.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-slate-500",children:"Silver purities"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Optional silver fineness values that can pair with your variants."})]}),s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-600",children:[s.jsx("input",{type:"checkbox",checked:n.uses_silver,onChange:e=>xe(e.target.checked),className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),"Use silver in variants"]})]}),n.uses_silver&&s.jsx("div",{className:"rounded-2xl bg-slate-50 p-4",children:v.length>0?s.jsx("div",{className:"flex flex-wrap gap-3",children:v.map(e=>{const t=n.silver_purity_ids.includes(e.id);return s.jsxs("label",{className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 text-xs font-semibold transition ${t?"border-sky-400 bg-white text-sky-700":"border-slate-200 bg-white text-slate-600 hover:border-slate-300"}`,children:[s.jsx("input",{type:"checkbox",checked:t,onChange:()=>fe(e.id),className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),e.name]},e.id)})}):s.jsx("p",{className:"text-xs text-slate-400",children:"No silver purities available yet."})})]}),s.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-200 p-4",children:[s.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-slate-500",children:"Diamond mixes"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Define reusable diamond combinations that variants can reference (type, shape, clarity, weight, etc.)."})]}),s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-600",children:[s.jsx("input",{type:"checkbox",checked:n.uses_diamond,onChange:e=>pe(e.target.checked),className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),"Use diamonds in variants"]})]}),n.uses_diamond&&s.jsxs("div",{className:"space-y-4",children:[n.diamond_options.map((e,t)=>s.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs uppercase tracking-[0.3em] text-slate-400",children:[s.jsxs("span",{children:["Configuration #",t+1]}),n.diamond_options.length>1&&s.jsx("button",{type:"button",onClick:()=>je(e.key),className:"text-rose-500 hover:text-rose-600",children:"Remove"})]}),s.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-2 xl:grid-cols-3",children:[s.jsxs("label",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.3em] text-slate-500",children:["Type",s.jsxs("select",{value:e.type_id,onChange:a=>w(e.key,"type_id",a.target.value===""?"":Number(a.target.value)),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[s.jsx("option",{value:"",children:"No type"}),b.types.map(a=>s.jsx("option",{value:a.id,children:a.name},a.id))]})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.3em] text-slate-500",children:["Shape",s.jsxs("select",{value:e.shape_id,onChange:a=>w(e.key,"shape_id",a.target.value===""?"":Number(a.target.value)),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[s.jsx("option",{value:"",children:"No shape"}),b.shapes.map(a=>s.jsx("option",{value:a.id,children:a.name},a.id))]})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.3em] text-slate-500",children:["Color",s.jsxs("select",{value:e.color_id,onChange:a=>w(e.key,"color_id",a.target.value===""?"":Number(a.target.value)),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[s.jsx("option",{value:"",children:"No color"}),b.colors.map(a=>s.jsx("option",{value:a.id,children:a.name},a.id))]})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.3em] text-slate-500",children:["Clarity",s.jsxs("select",{value:e.clarity_id,onChange:a=>w(e.key,"clarity_id",a.target.value===""?"":Number(a.target.value)),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[s.jsx("option",{value:"",children:"No clarity"}),b.clarities.map(a=>s.jsx("option",{value:a.id,children:a.name},a.id))]})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.3em] text-slate-500",children:["Cut",s.jsxs("select",{value:e.cut_id,onChange:a=>w(e.key,"cut_id",a.target.value===""?"":Number(a.target.value)),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[s.jsx("option",{value:"",children:"No cut"}),b.cuts.map(a=>s.jsx("option",{value:a.id,children:a.name},a.id))]})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.3em] text-slate-500",children:["Weight (Ct)",s.jsx("input",{type:"number",step:"0.01",value:e.weight,onChange:a=>w(e.key,"weight",a.target.value),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm text-slate-700 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"})]})]})]},e.key)),s.jsxs("button",{type:"button",onClick:ye,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 px-4 py-2 text-xs font-semibold text-slate-600 transition hover:border-slate-400 hover:text-slate-900",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 5v14M5 12h14"})}),"Add diamond option"]})]})]})]}):s.jsx("p",{className:"mt-6 rounded-2xl border border-dashed border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-600",children:"Variants are disabled. Customers will see the base price and making charge defined above."})]}),n.is_variant_product&&s.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-xl shadow-slate-900/10",children:[s.jsxs("div",{className:"flex flex-col gap-3 border-b border-slate-100 pb-4 lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Variant matrix"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Configure connected dropdowns. Default variant powers the customer catalogue card pricing."})]}),s.jsxs("button",{type:"button",onClick:we,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-600 transition hover:border-slate-400 hover:text-slate-900",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h7"})}),"Generate matrix"]})]}),J&&s.jsx("p",{className:"mt-4 rounded-2xl bg-rose-50 px-4 py-3 text-sm text-rose-600",children:J}),s.jsx("div",{className:"mt-8 overflow-x-auto rounded-2xl border border-slate-200",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-sm",children:[s.jsx("thead",{className:"bg-slate-50 text-xs uppercase tracking-[0.1em] text-slate-500",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left",children:"SKU"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Variant label"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Price adj (₹)"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Gold"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Silver"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Diamond"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Size"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Status"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Default"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Actions"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-100 bg-white",children:[n.variants.map((e,t)=>{const a=e.gold_purity_id!==""&&e.gold_purity_id!==null?U[Number(e.gold_purity_id)]??"—":"—",i=e.silver_purity_id!==""&&e.silver_purity_id!==null?P[Number(e.silver_purity_id)]??"—":"—",l=e.diamond_option_key&&q[e.diamond_option_key]?q[e.diamond_option_key]:e.diamond_option_key?"Configured mix":"—",o=e.metadata??{},r=typeof o.size_value=="string"||typeof o.size_value=="number"?String(o.size_value):"",p=o.size_unit==="mm"||o.size_unit==="cm"?o.size_unit:n.size_unit,x=r?`${r}${p}`:e.size_cm?`${y(parseFloat(e.size_cm))}cm`:"—",g=typeof o.status=="string"&&o.status.trim().length>0?String(o.status):"enabled";return $(e,n).autoLabel,s.jsxs("tr",{className:`hover:bg-slate-50 ${g==="disabled"?"opacity-70":""}`,children:[s.jsxs("td",{className:"px-4 py-3 align-middle",children:[s.jsx("input",{type:"text",value:e.sku,onChange:c=>z(t,"sku",c.target.value),className:"w-full rounded-xl border border-slate-200 px-3 py-1.5 text-sm text-slate-700 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"Variant SKU"}),u[`variants.${t}.sku`]&&s.jsx("p",{className:"mt-1 text-xs text-rose-500",children:u[`variants.${t}.sku`]})]}),s.jsxs("td",{className:"px-4 py-3 align-middle",children:[s.jsx("input",{type:"text",value:e.label,onChange:c=>z(t,"label",c.target.value),className:"w-full rounded-xl border border-slate-200 px-3 py-1.5 text-sm text-slate-700 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"Display label"}),u[`variants.${t}.label`]&&s.jsx("p",{className:"mt-1 text-xs text-rose-500",children:u[`variants.${t}.label`]})]}),s.jsxs("td",{className:"px-4 py-3 align-middle",children:[s.jsx("input",{type:"number",step:"0.01",value:e.price_adjustment,onChange:c=>z(t,"price_adjustment",c.target.value),className:"w-28 rounded-xl border border-slate-200 px-3 py-1.5 text-sm text-slate-700 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),u[`variants.${t}.price_adjustment`]&&s.jsx("p",{className:"mt-1 text-xs text-rose-500",children:u[`variants.${t}.price_adjustment`]})]}),s.jsx("td",{className:"px-4 py-3 align-middle text-slate-700",children:n.uses_gold?s.jsxs(s.Fragment,{children:[s.jsxs("select",{value:e.gold_purity_id===""?"":e.gold_purity_id,onChange:c=>z(t,"gold_purity_id",c.target.value===""?"":Number(c.target.value)),className:"w-full rounded-xl border border-slate-200 px-3 py-1.5 text-sm text-slate-700 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[s.jsx("option",{value:"",children:"Select"}),de.map(c=>s.jsx("option",{value:c.id,children:c.name},c.id))]}),u[`variants.${t}.gold_purity_id`]&&s.jsx("p",{className:"mt-1 text-xs text-rose-500",children:u[`variants.${t}.gold_purity_id`]})]}):a}),s.jsx("td",{className:"px-4 py-3 align-middle text-slate-700",children:n.uses_silver?s.jsxs(s.Fragment,{children:[s.jsxs("select",{value:e.silver_purity_id===""?"":e.silver_purity_id,onChange:c=>z(t,"silver_purity_id",c.target.value===""?"":Number(c.target.value)),className:"w-full rounded-xl border border-slate-200 px-3 py-1.5 text-sm text-slate-700 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[s.jsx("option",{value:"",children:"Select"}),ce.map(c=>s.jsx("option",{value:c.id,children:c.name},c.id))]}),u[`variants.${t}.silver_purity_id`]&&s.jsx("p",{className:"mt-1 text-xs text-rose-500",children:u[`variants.${t}.silver_purity_id`]})]}):i}),s.jsx("td",{className:"px-4 py-3 align-middle text-slate-700",children:n.uses_diamond?s.jsxs(s.Fragment,{children:[s.jsxs("select",{value:e.diamond_option_key??"",onChange:c=>z(t,"diamond_option_key",c.target.value||""),className:"w-full rounded-xl border border-slate-200 px-3 py-1.5 text-sm text-slate-700 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[s.jsx("option",{value:"",children:"Select"}),M.length===0&&s.jsx("option",{value:"",disabled:!0,children:"No options configured"}),M.map(c=>s.jsx("option",{value:c.key,children:c.label},c.key))]}),u[`variants.${t}.diamond_option_key`]&&s.jsx("p",{className:"mt-1 text-xs text-rose-500",children:u[`variants.${t}.diamond_option_key`]})]}):l}),s.jsx("td",{className:"px-4 py-3 align-middle text-slate-700",children:x}),s.jsx("td",{className:"px-4 py-3 text-slate-700",children:s.jsxs("select",{value:g,onChange:c=>ve(t,{status:c.target.value}),className:"rounded-xl border border-slate-200 px-3 py-1.5 text-sm text-slate-700 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[s.jsx("option",{value:"enabled",children:"Enabled"}),s.jsx("option",{value:"disabled",children:"Disabled"})]})}),s.jsx("td",{className:"px-4 py-3 text-slate-700",children:s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-600",children:[s.jsx("input",{type:"radio",name:"default-variant-table",checked:e.is_default,onChange:()=>ke(t),className:"h-4 w-4 text-sky-600 focus:ring-sky-500"}),s.jsx("span",{children:e.is_default?"Default":"Set default"})]})}),s.jsx("td",{className:"px-4 py-3 text-right",children:s.jsx("button",{type:"button",onClick:()=>Ne(t),className:"inline-flex items-center justify-center rounded-full border border-rose-200 p-2 text-rose-600 transition hover:border-rose-300 hover:text-rose-700","aria-label":"Remove variant",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,className:"h-4 w-4",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 7h12m-9 3v6m6-6v6M10 4h4a1 1 0 0 1 1 1v1H9V5a1 1 0 0 1 1-1Z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 7h14l-.8 11.2A2 2 0 0 1 16.2 20H7.8a2 2 0 0 1-1.99-1.8L5 7Z"})]})})})]},e.id??`summary-${t}`)}),n.variants.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:10,className:"px-4 py-6 text-center text-xs uppercase tracking-[0.1em] text-slate-400",children:"No variants configured."})})]})]})})]}),s.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-xl shadow-slate-900/10",children:[s.jsx("div",{className:"flex items-center justify-between border-b border-slate-100 pb-4",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Pricing references"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Keep your atelier and rate cards handy for quick quoting."})]})}),s.jsx("div",{className:"mt-6 grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:Me.map(e=>s.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:e.label}),s.jsx("input",{type:e.type,value:n.standard_pricing[e.key],onChange:t=>m("standard_pricing",{...n.standard_pricing,[e.key]:t.target.value}),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),u[`standard_pricing.${e.key}`]&&s.jsx("span",{className:"text-xs text-rose-500",children:u[`standard_pricing.${e.key}`]})]},e.key))})]})]})]})}export{Ke as default};
