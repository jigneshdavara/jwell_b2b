import{u as Ve,a as Oe,r as g,j as s,H as Ue}from"./app-CPxam-6j.js";import{R as Le}from"./RichTextEditor-DgV1_Gzm.js";import{A as Pe}from"./AdminLayout-CgpCltH7.js";const D=(V=!1)=>({sku:"",label:"",gold_purity_id:"",silver_purity_id:"",diamond_option_key:null,size_cm:"",price_adjustment:"0",is_default:V,metadata:{}}),F=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`local-${Date.now()}-${Math.random().toString(16).slice(2,8)}`,E=()=>({key:F(),type_id:"",shape_id:"",color_id:"",clarity_id:"",cut_id:"",weight:""});function Ge(){const{props:V}=Ve(),{product:d,brands:ee,categories:se,goldPurities:j,silverPurities:N,diamondCatalog:h,customerGroups:Ee,errors:c}=V,te=d?.diamond_options?.length?d.diamond_options.map((e,t)=>({key:e.key??`${F()}-${t}`,type_id:e.type_id??"",shape_id:e.shape_id??"",color_id:e.color_id??"",clarity_id:e.clarity_id??"",cut_id:e.cut_id??"",weight:e.weight!==null&&e.weight!==void 0?String(e.weight):""})):[],ae=d?.variants?.length?d.variants.map((e,t)=>({id:e.id,sku:e.sku??"",label:e.label??"",gold_purity_id:e.gold_purity_id??"",silver_purity_id:e.silver_purity_id??"",diamond_option_key:e.diamond_option_key??null,size_cm:e.size_cm?String(e.size_cm):"",price_adjustment:String(e.price_adjustment??0),is_default:e.is_default??t===0,metadata:e.metadata??{}})):[D(!0)],ie=d?.making_charge_discount_overrides?.length?d.making_charge_discount_overrides.map((e,t)=>({localKey:`${F()}-${t}`,customer_group_id:e.customer_group_id!==null&&e.customer_group_id!==void 0?Number(e.customer_group_id):"",type:e.type??"percentage",value:e.value!==null&&e.value!==void 0?String(e.value):""})):[],O=d?.metadata?.size_dimension??null,le=O?.unit==="cm"?"cm":"mm",R=Array.isArray(O?.values)?(O?.values??[]).map(e=>String(e)):[],re=R.length>0,U=Oe(()=>({sku:d?.sku??"",name:d?.name??"",description:d?.description??"",brand_id:String(d?.brand_id??""),category_id:String(d?.category_id??""),gross_weight:d?.gross_weight?String(d.gross_weight):"",net_weight:d?.net_weight?String(d.net_weight):"",gold_weight:d?.gold_weight?String(d.gold_weight):"",silver_weight:d?.silver_weight?String(d.silver_weight):"",other_material_weight:d?.other_material_weight?String(d.other_material_weight):"",total_weight:d?.total_weight?String(d.total_weight):"",base_price:d?.base_price?String(d.base_price):"",making_charge:d?.making_charge?String(d.making_charge):"",making_charge_discount_type:d?.making_charge_discount_type??null,making_charge_discount_value:d?.making_charge_discount_value!==null&&d?.making_charge_discount_value!==void 0?String(d.making_charge_discount_value):null,making_charge_discount_overrides:ie,is_jobwork_allowed:d?.is_jobwork_allowed??!1,visibility:d?.visibility??"public",standard_pricing:{labour_brand:d?.standard_pricing?.labour_brand?String(d.standard_pricing.labour_brand):"",diamond_rate:d?.standard_pricing?.diamond_rate?String(d.standard_pricing.diamond_rate):"",gold_rate:d?.standard_pricing?.gold_rate?String(d.standard_pricing.gold_rate):"",colourstone_rate:d?.standard_pricing?.colourstone_rate?String(d.standard_pricing.colourstone_rate):""},variants:ae,is_variant_product:d?.is_variant_product??!0,uses_gold:d?.uses_gold??!1,uses_silver:d?.uses_silver??!1,uses_diamond:d?.uses_diamond??!1,gold_purity_ids:d?.gold_purity_ids??[],silver_purity_ids:d?.silver_purity_ids??[],diamond_options:te,media_uploads:[],removed_media_ids:[],size_dimension_enabled:re,size_unit:le,size_values:R})),{setData:u,post:A,put:G,processing:B}=U,r=U.data,[T,K]=g.useState(""),b=e=>Number.isFinite(e)?e.toFixed(3).replace(/\.?0+$/,""):"",W=(e,t)=>{const a=parseFloat(e);if(!Number.isFinite(a))return"";const i=t==="mm"?a/10:a;return b(i)},C=(e,t)=>{const a=typeof e=="number"?e:parseFloat(e);if(!Number.isFinite(a))return"";const i=t==="mm"?a*10:a;return b(i)};g.useEffect(()=>{u(e=>{const t=l=>{const o=parseFloat(l);return Number.isFinite(o)?o:0},a=t(e.gold_weight)+t(e.silver_weight)+t(e.other_material_weight),i=a===0?"":a.toFixed(3).replace(/\.?0+$/,"");return e.total_weight===i?e:{...e,total_weight:i}})},[r.gold_weight,r.silver_weight,r.other_material_weight]);const L=g.useMemo(()=>Object.fromEntries(j.map(e=>[e.id,e.name])),[j]),P=g.useMemo(()=>Object.fromEntries(N.map(e=>[e.id,e.name])),[N]),v=g.useMemo(()=>({types:Object.fromEntries(h.types.map(e=>[e.id,e.name])),shapes:Object.fromEntries(h.shapes.map(e=>[e.id,e.name])),colors:Object.fromEntries(h.colors.map(e=>[e.id,e.name])),clarities:Object.fromEntries(h.clarities.map(e=>[e.id,e.name])),cuts:Object.fromEntries(h.cuts.map(e=>[e.id,e.name]))}),[h]),S=g.useCallback(e=>{if(!e)return"";const t=[];return e.weight&&t.push(`${e.weight} Ct`),e.shape_id&&t.push(v.shapes[Number(e.shape_id)]??""),e.clarity_id&&t.push(v.clarities[Number(e.clarity_id)]??""),e.color_id&&t.push(v.colors[Number(e.color_id)]??""),e.type_id&&t.push(v.types[Number(e.type_id)]??""),e.cut_id&&t.push(v.cuts[Number(e.cut_id)]??""),t.filter(Boolean).join(" - ")},[v]),$=g.useCallback((e,t)=>{const a=e.gold_purity_id!==""&&e.gold_purity_id!==null?L[Number(e.gold_purity_id)]??"":"",i=e.silver_purity_id!==""&&e.silver_purity_id!==null?P[Number(e.silver_purity_id)]??"":"",l=t.diamond_options.find(De=>De.key===e.diamond_option_key)??null,o=S(l),n=e.metadata??{},p=typeof n.size_value=="string"||typeof n.size_value=="number"?String(n.size_value):"",m=n.size_unit==="mm"||n.size_unit==="cm"?n.size_unit:t.size_unit;let y=t.size_dimension_enabled?m:"cm",_="";t.size_dimension_enabled?p?_=b(Number(p)):e.size_cm&&(_=C(e.size_cm,t.size_unit)):e.size_cm&&(_=b(parseFloat(e.size_cm)),y="cm");const w=_?`${_}${y}`:"",Z=[o,a,i,w].filter(Boolean),I=Z.length?Z.join(" / "):"Variant",$e=[a,i].filter(Boolean).join(" + "),Me=o,z={gold_purity_id:e.gold_purity_id!==""&&e.gold_purity_id!==null?Number(e.gold_purity_id):null,silver_purity_id:e.silver_purity_id!==""&&e.silver_purity_id!==null?Number(e.silver_purity_id):null,diamond_option_key:e.diamond_option_key??null,diamond:l?{key:l.key,type_id:l.type_id!==""?Number(l.type_id):null,shape_id:l.shape_id!==""?Number(l.shape_id):null,color_id:l.color_id!==""?Number(l.color_id):null,clarity_id:l.clarity_id!==""?Number(l.clarity_id):null,cut_id:l.cut_id!==""?Number(l.cut_id):null,weight:l.weight?Number(l.weight):null}:null,size_cm:e.size_cm?Number(e.size_cm):null,auto_label:I};return _?(z.size_value=_,z.size_unit=y):(delete z.size_value,delete z.size_unit),{autoLabel:I,metalTone:$e,stoneQuality:Me,sizeText:w,metadata:z}},[S,C,b,L,P]),x=g.useCallback(e=>e.variants.map((t,a)=>{const i=$(t,e),l=t.metadata?.auto_label??"",o=!t.label||t.label===l;return{...t,label:o?i.autoLabel:t.label,metadata:i.metadata,is_default:t.is_default??a===0}}),[$]),ne=g.useMemo(()=>j.filter(e=>r.gold_purity_ids.includes(e.id)),[r.gold_purity_ids,j]),de=g.useMemo(()=>N.filter(e=>r.silver_purity_ids.includes(e.id)),[r.silver_purity_ids,N]),M=g.useMemo(()=>r.diamond_options.map(e=>({key:e.key,label:S(e)||`Option ${e.key.slice(-4)}`})),[S,r.diamond_options]),q=g.useMemo(()=>M.reduce((e,t)=>(e[t.key]=t.label,e),{}),[M]),oe=e=>{u(t=>{const a={...t,is_variant_product:e,uses_gold:e?t.uses_gold:!1,uses_silver:e?t.uses_silver:!1,uses_diamond:e?t.uses_diamond:!1,gold_purity_ids:e?t.gold_purity_ids:[],silver_purity_ids:e?t.silver_purity_ids:[],diamond_options:e?t.diamond_options:[],size_dimension_enabled:e?t.size_dimension_enabled:!1,size_values:e?t.size_values:[],size_unit:e?t.size_unit:"mm",variants:e?t.variants.length>0?t.variants:[D(!0)]:[]};return e||(a.size_dimension_enabled=!1,a.size_values=[],a.size_unit="mm"),a.variants=x(a),a})},ce=e=>{u(t=>{const a={...t,uses_gold:e,gold_purity_ids:e?t.gold_purity_ids:[],variants:e?t.variants:t.variants.map(i=>({...i,gold_purity_id:""}))};return a.variants=x(a),a})},ue=e=>{u(t=>{const a={...t,uses_silver:e,silver_purity_ids:e?t.silver_purity_ids:[],variants:e?t.variants:t.variants.map(i=>({...i,silver_purity_id:""}))};return a.variants=x(a),a})},me=e=>{u(t=>{const a=e&&t.diamond_options.length===0?[E()]:e?t.diamond_options:[],i={...t,uses_diamond:e,diamond_options:a,variants:e?t.variants:t.variants.map(l=>({...l,diamond_option_key:null}))};return i.variants=x(i),i})},xe=e=>{u(t=>{const a={...t,size_dimension_enabled:e,size_values:e?t.size_values:[],size_unit:e?t.size_unit:"mm",variants:t.variants.map(i=>{if(e)return{...i};const l={...i.metadata??{}};return delete l.size_value,delete l.size_unit,{...i,size_cm:"",metadata:l}})};return a.variants=x(a),a})},H=e=>{u(t=>{if(t.size_unit===e)return t;const a=t.size_values.map(l=>{const o=W(l,t.size_unit);return o?C(o,e):l}),i={...t,size_unit:e,size_values:a,variants:t.variants.map(l=>{if(!l.size_cm)return{...l,metadata:{...l.metadata??{},size_unit:e}};const o={...l.metadata??{}},n=C(l.size_cm,e);return n?(o.size_value=n,o.size_unit=e):(delete o.size_value,o.size_unit=e),{...l,metadata:o}})};return i.variants=x(i),i})},pe=()=>{const e=T.trim();if(!e)return;const t=parseFloat(e);if(!Number.isFinite(t)||t<=0)return;const a=b(t);u(i=>{if(i.size_values.includes(a))return i;const l={...i,size_values:[...i.size_values,a]};return l.variants=x(l),l}),K("")},_e=e=>{u(t=>{const a={...t,size_values:t.size_values.filter(i=>i!==e)};return a.variants=x(a),a})},ge=e=>{u(t=>{const i=t.gold_purity_ids.includes(e)?t.gold_purity_ids.filter(o=>o!==e):[...t.gold_purity_ids,e],l={...t,gold_purity_ids:i,variants:t.variants.map(o=>typeof o.gold_purity_id=="number"&&!i.includes(o.gold_purity_id)?{...o,gold_purity_id:""}:o)};return l.variants=x(l),l})},he=e=>{u(t=>{const i=t.silver_purity_ids.includes(e)?t.silver_purity_ids.filter(o=>o!==e):[...t.silver_purity_ids,e],l={...t,silver_purity_ids:i,variants:t.variants.map(o=>typeof o.silver_purity_id=="number"&&!i.includes(o.silver_purity_id)?{...o,silver_purity_id:""}:o)};return l.variants=x(l),l})},be=()=>{u(e=>{const t={...e,diamond_options:[...e.diamond_options,E()]};return t.variants=x(t),t})},k=(e,t,a)=>{u(i=>{const l=i.diamond_options.map(n=>{if(n.key!==e)return n;if(t==="weight")return{...n,weight:a===null?"":String(a)};const p=a===null||a===""?"":typeof a=="number"?a:a===""?"":Number(a);return{...n,[t]:p}}),o={...i,diamond_options:l};return o.variants=x(o),o})},fe=e=>{u(t=>{const a=t.diamond_options.filter(l=>l.key!==e),i={...t,diamond_options:a,variants:t.variants.map(l=>l.diamond_option_key===e?{...l,diamond_option_key:null}:l)};return i.variants=x(i),i})},ye=e=>{u(t=>{if(t.variants.length===1)return t;const a=t.variants.filter((l,o)=>o!==e);a.every(l=>!l.is_default)&&a.length>0&&(a[0].is_default=!0);const i={...t,variants:a};return i.variants=x(i),i})},f=(e,t,a)=>{u(i=>{const l=i.variants.map((n,p)=>{if(p!==e)return n;const m={...n};switch(t){case"is_default":typeof a=="boolean"&&(m.is_default=a);break;case"gold_purity_id":(a===""||typeof a=="number")&&(m.gold_purity_id=a);break;case"silver_purity_id":(a===""||typeof a=="number")&&(m.silver_purity_id=a);break;case"diamond_option_key":m.diamond_option_key=a?String(a):null;break;case"size_cm":typeof a=="string"&&(m.size_cm=a);break;case"price_adjustment":typeof a=="string"&&(m.price_adjustment=a);break;case"sku":case"label":typeof a=="string"&&(m[t]=a);break}return m}),o={...i,variants:l};return o.variants=x(o),o})},je=e=>{u(t=>({...t,variants:t.variants.map((a,i)=>({...a,is_default:i===e}))}))},Ne=()=>{u(e=>{const t={...e,variants:[...e.variants,D(e.variants.length===0)]};return t.variants=x(t),t})},ve=()=>{u(e=>{const t=e.uses_gold?e.gold_purity_ids:[null],a=e.uses_silver?e.silver_purity_ids:[null],i=e.uses_diamond?e.diamond_options.map(m=>m.key):[null],l=e.size_dimension_enabled&&e.size_values.length>0?e.size_values:[null];if(e.uses_gold&&t.length===0||e.uses_silver&&a.length===0||e.uses_diamond&&i.length===0||e.size_dimension_enabled&&l.length===0)return e;const o=[];if(t.forEach(m=>{a.forEach(y=>{i.forEach(_=>{l.forEach(w=>{o.push({gold:m??"",silver:y??"",diamond:_??null,size:w??null})})})})}),o.length===0)return e;const n=o.map((m,y)=>{const _=D(y===0);if(m.gold!==""&&m.gold!==null&&(_.gold_purity_id=m.gold),m.silver!==""&&m.silver!==null&&(_.silver_purity_id=m.silver),m.diamond&&(_.diamond_option_key=m.diamond),m.size){const w=W(m.size,e.size_unit);_.size_cm=w,_.metadata={..._.metadata??{},size_value:m.size,size_unit:e.size_unit}}return _}),p={...e,variants:n};return p.variants=x(p),p})};g.useEffect(()=>{r.uses_diamond&&r.diamond_options.length===0&&u(e=>{const t={...e,diamond_options:[E()]};return t.variants=x(t),t})},[r.uses_diamond,r.diamond_options.length,x,u]);const ke=e=>{e.preventDefault(),U.transform(t=>{const a=t,i={...a};i.uses_gold=a.uses_gold,i.uses_silver=a.uses_silver,i.uses_diamond=a.uses_diamond,i.gold_purity_ids=a.uses_gold?[...a.gold_purity_ids]:[],i.silver_purity_ids=a.uses_silver?[...a.silver_purity_ids]:[],i.diamond_options=a.uses_diamond?a.diamond_options.map(n=>({key:n.key,type_id:n.type_id!==""?Number(n.type_id):null,shape_id:n.shape_id!==""?Number(n.shape_id):null,color_id:n.color_id!==""?Number(n.color_id):null,clarity_id:n.clarity_id!==""?Number(n.clarity_id):null,cut_id:n.cut_id!==""?Number(n.cut_id):null,weight:n.weight?Number(n.weight):null})):[];const l=n=>n==null||n===""?null:typeof n=="number"?n:Number(n);i.making_charge_discount_type=a.making_charge_discount_type||null,i.making_charge_discount_value=a.making_charge_discount_type?l(a.making_charge_discount_value):null,i.gold_weight=l(a.gold_weight),i.silver_weight=l(a.silver_weight),i.other_material_weight=l(a.other_material_weight),i.total_weight=l(a.total_weight),i.making_charge_discount_overrides=a.making_charge_discount_overrides.map(n=>({customer_group_id:n.customer_group_id!==""?Number(n.customer_group_id):null,type:n.type,value:l(n.value)})).filter(n=>n.customer_group_id!==null&&n.value!==null),i.variants=a.is_variant_product?a.variants.map(n=>{const p=$(n,a);return{id:n.id,sku:n.sku,label:n.label||p.autoLabel,metal_tone:p.metalTone||null,stone_quality:p.stoneQuality||null,size:p.sizeText||null,price_adjustment:n.price_adjustment,is_default:n.is_default,metadata:p.metadata}}):[];const o=a.size_values.map(n=>parseFloat(n)).filter(n=>Number.isFinite(n)&&n>0);return a.size_dimension_enabled&&o.length>0?i.metadata={size_dimension:{unit:a.size_unit,values:o}}:i.metadata=null,i.metadata||delete i.metadata,delete i.size_dimension_enabled,delete i.size_unit,delete i.size_values,a.is_variant_product||(i.uses_gold=!1,i.uses_silver=!1,i.uses_diamond=!1),(i.media_uploads?.length??0)===0&&delete i.media_uploads,(i.removed_media_ids?.length??0)===0&&delete i.removed_media_ids,i}),d?.id?(r.media_uploads?.length??0)>0?G(route("admin.products.update",d.id),{forceFormData:!0}):G(route("admin.products.update",d.id)):(r.media_uploads?.length??0)>0?A(route("admin.products.store"),{forceFormData:!0}):A(route("admin.products.store"))},J=c.variants,Q=g.useMemo(()=>Object.entries(c??{}).filter(([e])=>e.startsWith("media_uploads")).map(([,e])=>e),[c]),Y=g.useMemo(()=>d?.media?[...d.media].sort((e,t)=>e.position-t.position):[],[d?.media]),we=e=>{const t=r.removed_media_ids??[],i=t.includes(e)?t.filter(l=>l!==e):[...t,e];u("removed_media_ids",i)},ze=e=>{const t=e.target.files?Array.from(e.target.files):[];t.length!==0&&(u("media_uploads",[...r.media_uploads??[],...t]),e.target.value="")},Ce=e=>{u("media_uploads",(r.media_uploads??[]).filter((t,a)=>a!==e))},X=e=>(r.removed_media_ids??[]).includes(e),Se=g.useMemo(()=>[{key:"labour_brand",label:"Labour brand / atelier",type:"text"},{key:"diamond_rate",label:"Diamond rate (₹/ct)",type:"number"},{key:"gold_rate",label:"Gold rate (₹/g)",type:"number"},{key:"colourstone_rate",label:"Colour stone rate (₹/ct)",type:"number"}],[]);return s.jsxs(Pe,{children:[s.jsx(Ue,{title:d?.id?`Edit ${d.name}`:"New Product"}),s.jsxs("form",{onSubmit:ke,className:"space-y-10",children:[s.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-xl shadow-slate-900/10",children:[s.jsxs("div",{className:"flex flex-col gap-4 border-b border-slate-100 pb-6 sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:d?.id?"Update catalogue record":"Create catalogue record"}),s.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Define product master information, atelier references, and jobwork eligibility."})]}),s.jsx("button",{type:"submit",disabled:B,className:"inline-flex items-center gap-2 rounded-full bg-slate-900 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-slate-900/20 transition hover:bg-slate-700 disabled:cursor-not-allowed disabled:opacity-60",children:B?"Saving…":d?.id?"Save changes":"Create product"})]}),s.jsxs("div",{className:"mt-6 grid gap-6 lg:grid-cols-2",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:"SKU *"}),s.jsx("input",{type:"text",value:r.sku,onChange:e=>u("sku",e.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),c.sku&&s.jsx("span",{className:"text-xs text-rose-500",children:c.sku})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:"Product name *"}),s.jsx("input",{type:"text",value:r.name,onChange:e=>u("name",e.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),c.name&&s.jsx("span",{className:"text-xs text-rose-500",children:c.name})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:"Brand *"}),s.jsxs("select",{value:r.brand_id,onChange:e=>u("brand_id",e.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[s.jsx("option",{value:"",children:"Select brand"}),Object.entries(ee).map(([e,t])=>s.jsx("option",{value:e,children:t},e))]}),c.brand_id&&s.jsx("span",{className:"text-xs text-rose-500",children:c.brand_id})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:"Category *"}),s.jsxs("select",{value:r.category_id,onChange:e=>u("category_id",e.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[s.jsx("option",{value:"",children:"Select category"}),Object.entries(se).map(([e,t])=>s.jsx("option",{value:e,children:t},e))]}),c.category_id&&s.jsx("span",{className:"text-xs text-rose-500",children:c.category_id})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:"Gold weight (g)"}),s.jsx("input",{type:"number",step:"0.001",value:r.gold_weight,onChange:e=>u("gold_weight",e.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"0.000"}),c.gold_weight&&s.jsx("span",{className:"text-xs text-rose-500",children:c.gold_weight})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:"Silver weight (g)"}),s.jsx("input",{type:"number",step:"0.001",value:r.silver_weight,onChange:e=>u("silver_weight",e.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"0.000"}),c.silver_weight&&s.jsx("span",{className:"text-xs text-rose-500",children:c.silver_weight})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:"Other material weight (g)"}),s.jsx("input",{type:"number",step:"0.001",value:r.other_material_weight,onChange:e=>u("other_material_weight",e.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"0.000"}),c.other_material_weight&&s.jsx("span",{className:"text-xs text-rose-500",children:c.other_material_weight})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:"Total weight (g)"}),s.jsx("input",{type:"text",value:r.total_weight,readOnly:!0,className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-2 text-slate-700 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"Auto"}),c.total_weight&&s.jsx("span",{className:"text-xs text-rose-500",children:c.total_weight}),s.jsx("span",{className:"text-[11px] text-slate-400",children:"Auto sum of gold, silver, and other material weights."})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:"Base price (₹) *"}),s.jsx("input",{type:"number",step:"0.01",value:r.base_price,onChange:e=>u("base_price",e.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),c.base_price&&s.jsx("span",{className:"text-xs text-rose-500",children:c.base_price})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:"Making charge (₹) *"}),s.jsx("input",{type:"number",step:"0.01",value:r.making_charge,onChange:e=>u("making_charge",e.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),c.making_charge&&s.jsx("span",{className:"text-xs text-rose-500",children:c.making_charge})]})]}),s.jsxs("label",{className:"inline-flex items-center gap-3 rounded-2xl border border-slate-200 px-4 py-3 text-sm text-slate-600",children:[s.jsx("input",{type:"checkbox",checked:r.is_jobwork_allowed,onChange:e=>u("is_jobwork_allowed",e.target.checked),className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),"Jobwork requests allowed for this SKU"]})]})]})]}),s.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-xl shadow-slate-900/10",children:[s.jsx("div",{className:"flex flex-col gap-3 border-b border-slate-100 pb-4 lg:flex-row lg:items-center lg:justify-between",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Product description"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Provide merchandising copy, craftsmanship details, and any atelier notes for this SKU."})]})}),s.jsxs("div",{className:"mt-6",children:[s.jsx(Le,{value:r.description,onChange:e=>u("description",e),className:"overflow-hidden rounded-3xl border border-slate-200",placeholder:"Detail the design notes, materials, finish, and atelier craftsmanship."}),c.description&&s.jsx("span",{className:"mt-2 block text-xs text-rose-500",children:c.description})]})]}),s.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-xl shadow-slate-900/10",children:[s.jsx("div",{className:"flex flex-col gap-4 border-b border-slate-100 pb-4 lg:flex-row lg:items-center lg:justify-between",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Product media"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Upload product images or videos for catalogue displays. You can also remove outdated media assets."})]})}),s.jsxs("div",{className:"mt-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-slate-400",children:"Current media"}),s.jsx("div",{className:"mt-3 grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:Y.length>0?Y.map(e=>s.jsxs("div",{className:`relative overflow-hidden rounded-3xl border border-slate-200 bg-slate-50 shadow-sm transition ${X(e.id)?"opacity-50 ring-2 ring-rose-200":""}`,children:[e.type==="video"?s.jsx("video",{src:e.url,className:"h-48 w-full rounded-t-3xl bg-black object-cover",controls:!0,children:"Your browser does not support the video tag."}):s.jsx("img",{src:e.url,alt:"Product media",className:"h-48 w-full rounded-t-3xl object-cover"}),s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 text-xs text-slate-500",children:[s.jsx("span",{className:"rounded-full bg-white/70 px-3 py-1 font-semibold text-slate-700",children:e.type.toUpperCase()}),s.jsx("button",{type:"button",onClick:()=>we(e.id),className:"text-rose-500 transition hover:text-rose-600",children:X(e.id)?"Undo removal":"Remove"})]})]},e.id)):s.jsx("p",{className:"rounded-2xl border border-dashed border-slate-200 px-4 py-6 text-sm text-slate-500",children:"No media uploaded yet."})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-slate-400",children:"Upload new files"}),s.jsxs("label",{className:"mt-3 flex cursor-pointer flex-col items-center justify-center gap-3 rounded-3xl border border-dashed border-slate-300 bg-slate-50 px-6 py-10 text-center text-slate-500 transition hover:border-slate-400 hover:bg-slate-100",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-slate-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 15a4 4 0 014-4h10a4 4 0 014 4v3a2 2 0 01-2 2H5a2 2 0 01-2-2v-3z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 10l5-5m0 0l5 5m-5-5v12"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"Click to upload"}),s.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"JPEG, PNG, WebP, MP4 up to 50MB each."})]}),s.jsx("input",{type:"file",multiple:!0,accept:"image/*,video/*",onChange:ze,className:"hidden"})]}),Q.length>0&&s.jsx("ul",{className:"mt-3 space-y-1",children:Q.map((e,t)=>s.jsx("li",{className:"text-xs text-rose-500",children:e},`${t}-${e}`))}),(r.media_uploads??[]).length>0&&s.jsx("ul",{className:"mt-4 space-y-2",children:(r.media_uploads??[]).map((e,t)=>s.jsxs("li",{className:"flex items-center justify-between rounded-2xl border border-slate-200 px-4 py-2 text-sm text-slate-600",children:[s.jsx("span",{className:"truncate",children:e.name}),s.jsx("button",{type:"button",onClick:()=>Ce(t),className:"text-rose-500 transition hover:text-rose-600",children:"Remove"})]},`${e.name}-${t}`))})]})]})]}),s.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-xl shadow-slate-900/10",children:[s.jsxs("div",{className:"flex flex-col gap-3 border-b border-slate-100 pb-4 lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Variant configuration"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Decide whether this product uses a single price or multiple combinations across metals and diamonds."})]}),s.jsxs("label",{className:"inline-flex items-center gap-3 rounded-2xl border border-slate-200 px-4 py-3 text-sm text-slate-600",children:[s.jsx("input",{type:"checkbox",checked:r.is_variant_product,onChange:e=>oe(e.target.checked),className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),"Variant product (multi-option catalogue)"]})]}),r.is_variant_product?s.jsxs("div",{className:"mt-6 space-y-6",children:[s.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-200 p-4",children:[s.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-slate-500",children:"Size dimension"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Maintain consistent size data across variants. Add numeric values and choose the preferred unit."})]}),s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-600",children:[s.jsx("input",{type:"checkbox",checked:r.size_dimension_enabled,onChange:e=>xe(e.target.checked),className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),"Use size dimension"]})]}),r.size_dimension_enabled&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-xs font-semibold uppercase tracking-[0.3em] text-slate-400",children:[s.jsx("span",{children:"Unit"}),s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-600",children:[s.jsx("input",{type:"radio",name:"size-unit",value:"mm",checked:r.size_unit==="mm",onChange:()=>H("mm"),className:"h-4 w-4 border-slate-300 text-sky-600 focus:ring-sky-500"}),"Millimetres (mm)"]}),s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-600",children:[s.jsx("input",{type:"radio",name:"size-unit",value:"cm",checked:r.size_unit==="cm",onChange:()=>H("cm"),className:"h-4 w-4 border-slate-300 text-sky-600 focus:ring-sky-500"}),"Centimetres (cm)"]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"number",step:"0.001",min:"0",value:T,onChange:e=>K(e.target.value),className:"w-24 rounded-2xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:`e.g. 25${r.size_unit}`}),s.jsx("button",{type:"button",onClick:pe,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 px-4 py-1.5 text-xs font-semibold uppercase tracking-[0.2em] text-slate-600 transition hover:border-slate-400 hover:text-slate-900",children:"Add size"})]}),r.size_values.length===0&&s.jsx("span",{className:"text-xs text-slate-400",children:"Add at least one size value to use in the variant matrix."})]}),r.size_values.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2",children:r.size_values.map(e=>s.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-slate-300 bg-slate-50 px-3 py-1 text-xs font-semibold text-slate-600",children:[e,r.size_unit,s.jsx("button",{type:"button",onClick:()=>_e(e),className:"text-rose-500 transition hover:text-rose-600","aria-label":`Remove size ${e}${r.size_unit}`,children:"×"})]},`${e}-${r.size_unit}`))})]})]}),s.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-200 p-4",children:[s.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-slate-500",children:"Gold purities"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Choose which gold purities can appear in your variant matrix."})]}),s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-600",children:[s.jsx("input",{type:"checkbox",checked:r.uses_gold,onChange:e=>ce(e.target.checked),className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),"Use gold in variants"]})]}),r.uses_gold&&s.jsx("div",{className:"rounded-2xl bg-slate-50 p-4",children:j.length>0?s.jsx("div",{className:"flex flex-wrap gap-3",children:j.map(e=>{const t=r.gold_purity_ids.includes(e.id);return s.jsxs("label",{className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 text-xs font-semibold transition ${t?"border-sky-400 bg-white text-sky-700":"border-slate-200 bg-white text-slate-600 hover:border-slate-300"}`,children:[s.jsx("input",{type:"checkbox",checked:t,onChange:()=>ge(e.id),className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),e.name]},e.id)})}):s.jsx("p",{className:"text-xs text-slate-400",children:"No gold purities available yet."})})]}),s.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-200 p-4",children:[s.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-slate-500",children:"Silver purities"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Optional silver fineness values that can pair with your variants."})]}),s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-600",children:[s.jsx("input",{type:"checkbox",checked:r.uses_silver,onChange:e=>ue(e.target.checked),className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),"Use silver in variants"]})]}),r.uses_silver&&s.jsx("div",{className:"rounded-2xl bg-slate-50 p-4",children:N.length>0?s.jsx("div",{className:"flex flex-wrap gap-3",children:N.map(e=>{const t=r.silver_purity_ids.includes(e.id);return s.jsxs("label",{className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 text-xs font-semibold transition ${t?"border-sky-400 bg-white text-sky-700":"border-slate-200 bg-white text-slate-600 hover:border-slate-300"}`,children:[s.jsx("input",{type:"checkbox",checked:t,onChange:()=>he(e.id),className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),e.name]},e.id)})}):s.jsx("p",{className:"text-xs text-slate-400",children:"No silver purities available yet."})})]}),s.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-200 p-4",children:[s.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-slate-500",children:"Diamond mixes"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Define reusable diamond combinations that variants can reference (type, shape, clarity, weight, etc.)."})]}),s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-600",children:[s.jsx("input",{type:"checkbox",checked:r.uses_diamond,onChange:e=>me(e.target.checked),className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),"Use diamonds in variants"]})]}),r.uses_diamond&&s.jsxs("div",{className:"space-y-4",children:[r.diamond_options.map((e,t)=>s.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs uppercase tracking-[0.3em] text-slate-400",children:[s.jsxs("span",{children:["Configuration #",t+1]}),r.diamond_options.length>1&&s.jsx("button",{type:"button",onClick:()=>fe(e.key),className:"text-rose-500 hover:text-rose-600",children:"Remove"})]}),s.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-2 xl:grid-cols-3",children:[s.jsxs("label",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.3em] text-slate-500",children:["Type",s.jsxs("select",{value:e.type_id,onChange:a=>k(e.key,"type_id",a.target.value===""?"":Number(a.target.value)),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[s.jsx("option",{value:"",children:"No type"}),h.types.map(a=>s.jsx("option",{value:a.id,children:a.name},a.id))]})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.3em] text-slate-500",children:["Shape",s.jsxs("select",{value:e.shape_id,onChange:a=>k(e.key,"shape_id",a.target.value===""?"":Number(a.target.value)),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[s.jsx("option",{value:"",children:"No shape"}),h.shapes.map(a=>s.jsx("option",{value:a.id,children:a.name},a.id))]})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.3em] text-slate-500",children:["Color",s.jsxs("select",{value:e.color_id,onChange:a=>k(e.key,"color_id",a.target.value===""?"":Number(a.target.value)),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[s.jsx("option",{value:"",children:"No color"}),h.colors.map(a=>s.jsx("option",{value:a.id,children:a.name},a.id))]})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.3em] text-slate-500",children:["Clarity",s.jsxs("select",{value:e.clarity_id,onChange:a=>k(e.key,"clarity_id",a.target.value===""?"":Number(a.target.value)),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[s.jsx("option",{value:"",children:"No clarity"}),h.clarities.map(a=>s.jsx("option",{value:a.id,children:a.name},a.id))]})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.3em] text-slate-500",children:["Cut",s.jsxs("select",{value:e.cut_id,onChange:a=>k(e.key,"cut_id",a.target.value===""?"":Number(a.target.value)),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[s.jsx("option",{value:"",children:"No cut"}),h.cuts.map(a=>s.jsx("option",{value:a.id,children:a.name},a.id))]})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.3em] text-slate-500",children:["Weight (Ct)",s.jsx("input",{type:"number",step:"0.01",value:e.weight,onChange:a=>k(e.key,"weight",a.target.value),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm text-slate-700 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"})]})]})]},e.key)),s.jsxs("button",{type:"button",onClick:be,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 px-4 py-2 text-xs font-semibold text-slate-600 transition hover:border-slate-400 hover:text-slate-900",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 5v14M5 12h14"})}),"Add diamond option"]})]})]})]}):s.jsx("p",{className:"mt-6 rounded-2xl border border-dashed border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-600",children:"Variants are disabled. Customers will see the base price and making charge defined above."})]}),r.is_variant_product&&s.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-xl shadow-slate-900/10",children:[s.jsxs("div",{className:"flex flex-col gap-3 border-b border-slate-100 pb-4 lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Variant matrix"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Configure connected dropdowns. Default variant powers the customer catalogue card pricing."})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs("button",{type:"button",onClick:ve,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-600 transition hover:border-slate-400 hover:text-slate-900",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h7"})}),"Generate matrix"]}),s.jsxs("button",{type:"button",onClick:Ne,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-600 transition hover:border-slate-400 hover:text-slate-900",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 5v14M5 12h14"})}),"Add variant"]})]})]}),J&&s.jsx("p",{className:"mt-4 rounded-2xl bg-rose-50 px-4 py-3 text-sm text-rose-600",children:J}),s.jsx("div",{className:"mt-6 space-y-4",children:r.variants.map((e,t)=>s.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4 shadow-sm",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[s.jsxs("label",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.2em] text-slate-500",children:["SKU",s.jsx("input",{type:"text",value:e.sku,onChange:a=>f(t,"sku",a.target.value),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm text-slate-700 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"Optional"}),c[`variants.${t}.sku`]&&s.jsx("span",{className:"text-xs text-rose-500",children:c[`variants.${t}.sku`]})]}),r.uses_gold&&s.jsxs("label",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.2em] text-slate-500",children:["Gold purity",s.jsxs("select",{value:e.gold_purity_id===""?"":e.gold_purity_id,onChange:a=>f(t,"gold_purity_id",a.target.value===""?"":Number(a.target.value)),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[s.jsx("option",{value:"",children:"Select gold purity"}),ne.map(a=>s.jsx("option",{value:a.id,children:a.name},a.id))]}),c[`variants.${t}.gold_purity_id`]&&s.jsx("span",{className:"text-xs text-rose-500",children:c[`variants.${t}.gold_purity_id`]})]}),r.uses_silver&&s.jsxs("label",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.2em] text-slate-500",children:["Silver purity",s.jsxs("select",{value:e.silver_purity_id===""?"":e.silver_purity_id,onChange:a=>f(t,"silver_purity_id",a.target.value===""?"":Number(a.target.value)),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[s.jsx("option",{value:"",children:"Select silver purity"}),de.map(a=>s.jsx("option",{value:a.id,children:a.name},a.id))]}),c[`variants.${t}.silver_purity_id`]&&s.jsx("span",{className:"text-xs text-rose-500",children:c[`variants.${t}.silver_purity_id`]})]}),r.uses_diamond&&s.jsxs("label",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.2em] text-slate-500",children:["Diamond mix",s.jsxs("select",{value:e.diamond_option_key??"",onChange:a=>f(t,"diamond_option_key",a.target.value||""),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[s.jsx("option",{value:"",children:"Select diamond option"}),M.length===0&&s.jsx("option",{value:"",disabled:!0,children:"No options configured"}),M.map(a=>s.jsx("option",{value:a.key,children:a.label},a.key))]}),c[`variants.${t}.diamond_option_key`]&&s.jsx("span",{className:"text-xs text-rose-500",children:c[`variants.${t}.diamond_option_key`]})]}),r.size_dimension_enabled?s.jsxs("div",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.2em] text-slate-500",children:[s.jsxs("span",{children:["Size (",r.size_unit,")"]}),s.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-700",children:(()=>{const a=e.metadata??{},i=typeof a.size_value=="string"||typeof a.size_value=="number"?String(a.size_value):"",l=a.size_unit==="mm"||a.size_unit==="cm"?a.size_unit:r.size_unit;return i?`${i}${l}`:e.size_cm?`${b(parseFloat(e.size_cm))}cm`:"—"})()})]}):s.jsxs("label",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.2em] text-slate-500",children:["Size (cm)",s.jsx("input",{type:"number",step:"0.01",value:e.size_cm,onChange:a=>f(t,"size_cm",a.target.value),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm text-slate-700 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),c[`variants.${t}.size_cm`]&&s.jsx("span",{className:"text-xs text-rose-500",children:c[`variants.${t}.size_cm`]})]})]}),s.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-3",children:[s.jsxs("label",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.2em] text-slate-500",children:["Price adjustment (₹)",s.jsx("input",{type:"number",step:"0.01",value:e.price_adjustment,onChange:a=>f(t,"price_adjustment",a.target.value),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm text-slate-700 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),c[`variants.${t}.price_adjustment`]&&s.jsx("span",{className:"text-xs text-rose-500",children:c[`variants.${t}.price_adjustment`]})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.2em] text-slate-500",children:["Variant label",s.jsx("input",{type:"text",value:e.label,onChange:a=>f(t,"label",a.target.value),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm text-slate-700 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),c[`variants.${t}.label`]&&s.jsx("span",{className:"text-xs text-rose-500",children:c[`variants.${t}.label`]}),s.jsxs("span",{className:"text-[10px] uppercase tracking-[0.3em] text-slate-400",children:["Suggested: ",$(e,r).autoLabel]})]}),s.jsxs("div",{className:"flex items-center gap-3 rounded-2xl border border-slate-200 px-4 py-3",children:[s.jsx("input",{type:"radio",checked:e.is_default,onChange:()=>je(t),className:"h-4 w-4 text-slate-900 focus:ring-slate-900",name:"default-variant"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Default display variant"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Used for price cards & listing highlights."})]})]})]}),s.jsxs("div",{className:"mt-4 flex items-center justify-between text-xs text-slate-400",children:[s.jsxs("span",{children:["Row #",t+1]}),s.jsx("button",{type:"button",onClick:()=>ye(t),className:"text-rose-500 hover:text-rose-600",children:"Remove variant"})]})]},e.id??`row-${t}`))})]}),s.jsx("div",{className:"mt-8 overflow-x-auto rounded-2xl border border-slate-200",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-sm",children:[s.jsx("thead",{className:"bg-slate-50 text-xs uppercase tracking-[0.35em] text-slate-500",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left",children:"Gold"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Silver"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Diamond"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Size"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Status"}),s.jsx("th",{className:"px-4 py-3 text-left",children:"Default"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-100 bg-white",children:[r.variants.map((e,t)=>{const a=e.gold_purity_id!==""&&e.gold_purity_id!==null?L[Number(e.gold_purity_id)]??"—":"—",i=e.silver_purity_id!==""&&e.silver_purity_id!==null?P[Number(e.silver_purity_id)]??"—":"—",l=e.diamond_option_key&&q[e.diamond_option_key]?q[e.diamond_option_key]:e.diamond_option_key?"Configured mix":"—",o=e.metadata??{},n=typeof o.size_value=="string"||typeof o.size_value=="number"?String(o.size_value):"",p=o.size_unit==="mm"||o.size_unit==="cm"?o.size_unit:r.size_unit,m=n?`${n}${p}`:e.size_cm?`${b(parseFloat(e.size_cm))}cm`:"—";return s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-4 py-3 text-slate-700",children:a}),s.jsx("td",{className:"px-4 py-3 text-slate-700",children:i}),s.jsx("td",{className:"px-4 py-3 text-slate-700",children:l}),s.jsx("td",{className:"px-4 py-3 text-slate-700",children:m}),s.jsx("td",{className:"px-4 py-3 text-slate-700",children:"enabled"}),s.jsx("td",{className:"px-4 py-3 text-slate-700",children:e.is_default?"true":"false"})]},e.id??`summary-${t}`)}),r.variants.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-4 py-6 text-center text-xs uppercase tracking-[0.3em] text-slate-400",children:"No variants configured."})})]})]})}),s.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-xl shadow-slate-900/10",children:[s.jsx("div",{className:"flex items-center justify-between border-b border-slate-100 pb-4",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Pricing references"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Keep your atelier and rate cards handy for quick quoting."})]})}),s.jsx("div",{className:"mt-6 grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:Se.map(e=>s.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:e.label}),s.jsx("input",{type:e.type,value:r.standard_pricing[e.key],onChange:t=>u("standard_pricing",{...r.standard_pricing,[e.key]:t.target.value}),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),c[`standard_pricing.${e.key}`]&&s.jsx("span",{className:"text-xs text-rose-500",children:c[`standard_pricing.${e.key}`]})]},e.key))})]})]})]})}export{Ge as default};
