import{u as _,r as h,j as e,H as S,L as m,b as j}from"./app-DkJetrPT.js";import{A as C}from"./AuthenticatedLayout-DSD5Ys5v.js";import"./FlashMessage-BT8-rBiH.js";const u={brand:"Brand",gold_purity:"Gold purity",silver_purity:"Silver purity",search:"Search"},y=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0});function E(){const{mode:l,filters:d,products:g,facets:i}=_().props,r=h.useMemo(()=>{const s=t=>t?Array.isArray(t)?t:[String(t)]:[];return{brand:d.brand,search:d.search,gold_purity:s(d.gold_purity),silver_purity:s(d.silver_purity)}},[d]),[p,b]=h.useState(r.search??""),x=h.useMemo(()=>{const s=new Map;return i.goldPurities.forEach(t=>s.set(`gold_purity:${t.id}`,t.name)),i.silverPurities.forEach(t=>s.set(`silver_purity:${t.id}`,t.name)),i.brands.forEach(t=>s.set(`brand:${t}`,t)),s},[i]),n=(s,t)=>{j.get(route("frontend.catalog.index"),{...d,[s]:t??void 0,mode:l,page:void 0},{preserveScroll:!0,preserveState:!0})},v=()=>{j.get(route("frontend.catalog.index"),{mode:l})},N=s=>{s.preventDefault(),n("search",p.trim()||void 0)},w=h.useMemo(()=>{const s=[];return r.brand&&s.push({key:"brand",value:r.brand,label:u.brand,valueLabel:x.get(`brand:${r.brand}`)??r.brand}),r.gold_purity.forEach(t=>{s.push({key:"gold_purity",value:t,label:u.gold_purity,valueLabel:x.get(`gold_purity:${t}`)??t})}),r.silver_purity.forEach(t=>{s.push({key:"silver_purity",value:t,label:u.silver_purity,valueLabel:x.get(`silver_purity:${t}`)??t})}),r.search&&s.push({key:"search",value:r.search,label:u.search,valueLabel:r.search}),s},[r,x]);return e.jsxs(C,{children:[e.jsx(S,{title:"Catalogue"}),e.jsxs("div",{className:"space-y-10",id:"catalog",children:[e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-end lg:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:l==="jobwork"?"Jobwork-ready Designs":"Showcase Collection"}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:l==="jobwork"?"Explore pieces eligible for custom manufacturing. Select a design to raise a jobwork quotation.":"Filter by brand, material, or purity. Review variants and request a quotation for wholesale purchase."})]}),e.jsx("div",{children:e.jsxs("form",{onSubmit:N,className:"flex gap-3",children:[e.jsxs("div",{className:"relative flex-1 min-w-[220px]",children:[e.jsx("input",{type:"search",value:p,onChange:s=>b(s.target.value),placeholder:"Search SKU or design",className:"w-full rounded-2xl border border-slate-300 bg-white/80 px-4 py-2 text-sm text-slate-700 shadow-inner focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),r.search&&e.jsx("button",{type:"button",onClick:()=>{b(""),n("search")},className:"absolute inset-y-0 right-3 flex items-center text-xs font-medium text-slate-400 hover:text-slate-600",children:"Clear"})]}),e.jsx("button",{type:"submit",className:"rounded-2xl bg-sky-600 px-4 py-2 text-sm font-semibold text-white shadow-sky-600/30 transition hover:bg-sky-500",children:"Search"}),e.jsx("button",{type:"button",onClick:v,className:"rounded-2xl border border-slate-300 px-4 py-2 text-sm font-medium text-slate-600 hover:border-slate-400 hover:text-slate-800",children:"Reset"})]})})]}),e.jsx("div",{className:"flex flex-wrap gap-3 text-xs",children:w.map(({key:s,label:t,valueLabel:o,value:a})=>e.jsxs("button",{onClick:()=>{if(s==="gold_purity"||s==="silver_purity"){const f=(Array.isArray(r[s])?r[s]??[]:[]).filter(k=>k!==a);n(s,f.length?f:void 0);return}n(s)},className:"inline-flex items-center gap-1 rounded-full bg-slate-200 px-3 py-1 text-slate-700 hover:bg-slate-300",children:[t,": ",e.jsx("span",{className:"font-semibold",children:o}),e.jsx("span",{"aria-hidden":!0,children:"Ã—"})]},`${s}-${o}`))}),e.jsxs("div",{className:"grid gap-6 rounded-3xl bg-white p-6 shadow-xl ring-1 ring-slate-200/70 lg:grid-cols-5",children:[e.jsxs("aside",{className:"space-y-6 lg:col-span-1",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm font-semibold text-slate-800",children:"Brands"}),e.jsx("div",{className:"mt-3 space-y-2 text-sm",children:i.brands.map(s=>e.jsx("button",{onClick:()=>n("brand",s),className:`w-full rounded-xl px-3 py-2 text-left transition ${r.brand===s?"bg-sky-600/10 font-medium text-sky-700 ring-1 ring-sky-500/40":"text-slate-600 hover:bg-slate-100"}`,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm font-semibold text-slate-800",children:"Gold purities"}),e.jsx("div",{className:"mt-3 space-y-2 text-sm",children:i.goldPurities.map(s=>{const t=r.gold_purity.includes(String(s.id));return e.jsxs("label",{className:`flex items-center gap-3 rounded-2xl border px-3 py-2 text-sm transition ${t?"border-sky-500 bg-sky-50 text-slate-900":"border-slate-200 bg-white text-slate-600 hover:border-sky-300"}`,children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500",checked:t,onChange:o=>{const a=[...r.gold_purity];if(o.target.checked)a.push(String(s.id));else{const c=a.indexOf(String(s.id));c>=0&&a.splice(c,1)}n("gold_purity",a.length?a:void 0)}}),e.jsx("span",{children:s.name})]},s.id)})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm font-semibold text-slate-800",children:"Silver purities"}),e.jsx("div",{className:"mt-3 space-y-2 text-sm",children:i.silverPurities.map(s=>{const t=r.silver_purity.includes(String(s.id));return e.jsxs("label",{className:`flex items-center gap-3 rounded-2xl border px-3 py-2 text-sm transition ${t?"border-sky-500 bg-sky-50 text-slate-900":"border-slate-200 bg-white text-slate-600 hover:border-sky-300"}`,children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500",checked:t,onChange:o=>{const a=[...r.silver_purity];if(o.target.checked)a.push(String(s.id));else{const c=a.indexOf(String(s.id));c>=0&&a.splice(c,1)}n("silver_purity",a.length?a:void 0)}}),e.jsx("span",{children:s.name})]},s.id)})})]})]}),e.jsxs("section",{className:"lg:col-span-4",children:[g.data.length===0?e.jsx("div",{className:"rounded-3xl border border-dashed border-slate-300 p-10 text-center text-sm text-slate-500",children:"No products match your filters. Try broadening your search or reset filters."}):e.jsx("div",{className:"grid gap-6 sm:grid-cols-2 xl:grid-cols-3",children:g.data.map(s=>e.jsxs("article",{className:"group relative overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-lg transition hover:-translate-y-1 hover:shadow-2xl",children:[s.thumbnail&&e.jsx(m,{href:route("frontend.catalog.show",{product:s.id,mode:l}),className:"block",children:e.jsxs("div",{className:"relative h-56 w-full overflow-hidden bg-slate-100",children:[e.jsx("img",{src:s.thumbnail,alt:s.name,className:"h-full w-full object-cover transition duration-500 group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900/40 to-transparent"}),e.jsxs("div",{className:"absolute bottom-4 left-4 flex flex-col text-white",children:[e.jsx("span",{className:"text-xs uppercase tracking-[0.35em] text-white/80",children:s.category??"Signature"}),e.jsx("span",{className:"text-sm font-semibold",children:s.brand??"AurumCraft Atelier"})]})]})}),e.jsxs("div",{className:"space-y-3 p-6",children:[e.jsx(m,{href:route("frontend.catalog.show",{product:s.id,mode:l}),className:"text-lg font-semibold text-slate-900 transition hover:text-sky-600",children:s.name}),e.jsxs("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:["SKU ",s.sku]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.variants.slice(0,3).map(t=>e.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-[11px] font-medium ${t.is_default?"bg-slate-900 text-white":"bg-slate-100 text-slate-600"}`,children:t.metadata?.auto_label??t.label},t.id))}),e.jsx("div",{className:"rounded-2xl bg-slate-50 p-4",children:e.jsxs("dl",{className:"grid grid-cols-2 gap-3 text-xs text-slate-500",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"font-medium text-slate-600",children:"Material"}),e.jsx("dd",{children:s.material??"Custom blend"})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"font-medium text-slate-600",children:"Gross"}),e.jsxs("dd",{children:[s.gross_weight.toFixed(2)," g"]})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"font-medium text-slate-600",children:"Net"}),e.jsxs("dd",{children:[s.net_weight.toFixed(2)," g"]})]})]})}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Base Price"}),e.jsx("p",{className:"text-lg font-semibold text-slate-900",children:y.format(s.base_price)}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Making ",y.format(s.making_charge)]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(m,{href:route("frontend.catalog.show",{product:s.id,mode:l}),className:"rounded-full bg-sky-600 px-4 py-2 text-xs font-semibold text-white shadow-sky-600/30 transition hover:bg-sky-500",children:"View details"}),l==="jobwork"&&s.is_jobwork_allowed&&e.jsx("span",{className:"rounded-full border border-emerald-200 bg-emerald-50 px-4 py-1 text-center text-[11px] font-semibold text-emerald-700",children:"Available for jobwork"})]})]})]})]},s.id))}),e.jsx("div",{className:"mt-8 flex flex-wrap items-center justify-center gap-3 text-sm",children:g.links.map((s,t)=>e.jsx(m,{href:s.url??"#",preserveScroll:!0,className:`rounded-full px-4 py-2 transition ${s.active?"bg-sky-600 text-white shadow-lg":s.url?"bg-slate-200 text-slate-700 hover:bg-slate-300":"bg-slate-100 text-slate-400"}`,dangerouslySetInnerHTML:{__html:s.label}},t))})]})]})]})]})}export{E as default};
