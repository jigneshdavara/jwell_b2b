import{r as t,j as R}from"./app-xiOEIreu.js";const g="https://cdn.ckeditor.com/4.22.1/full-all/ckeditor.js";function w({value:a,onChange:c,onBlur:u,className:C,placeholder:l,toolbar:d}){const s=t.useRef(a??""),n=t.useRef(null),i=t.useRef(null),[m,o]=t.useState(!1);t.useEffect(()=>{s.current=a??"",n.current&&n.current.getData()!==(a??"")&&n.current.setData(a??"")},[a]),t.useEffect(()=>{if(typeof window>"u")return;if(window.CKEDITOR){o(!0);return}const e=document.querySelector('script[data-ckeditor="4"]');if(e){e.addEventListener("load",()=>o(!0),{once:!0});return}const r=document.createElement("script");r.src=g,r.async=!0,r.dataset.ckeditor="4",r.onload=()=>o(!0),document.head.appendChild(r)},[]);const f=t.useMemo(()=>({toolbar:d??[{name:"document",items:["Source","-","Preview","Print","-","Templates"]},{name:"clipboard",items:["Cut","Copy","Paste","PasteText","PasteFromWord","-","Undo","Redo"]},{name:"editing",items:["Find","Replace","-","SelectAll","-","Scayt"]},"/",{name:"basicstyles",items:["Bold","Italic","Underline","Strike","Subscript","Superscript","-","RemoveFormat"]},{name:"paragraph",items:["NumberedList","BulletedList","-","Outdent","Indent","-","Blockquote","CreateDiv"]},{name:"links",items:["Link","Unlink","Anchor"]},{name:"insert",items:["Image","Table","HorizontalRule","SpecialChar"]},"/",{name:"styles",items:["Styles","Format","Font","FontSize"]},{name:"colors",items:["TextColor","BGColor"]},{name:"tools",items:["Maximize"]}],removePlugins:"elementspath,about,cloudservices,easyimage,exportpdf",height:320,allowedContent:!0,toolbarCanCollapse:!1}),[d]),p=t.useCallback(()=>{if(!window.CKEDITOR||!i.current)return;window.CKEDITOR.config.autoParagraph=!1,window.CKEDITOR.config.versionCheck=!1;const e=window.CKEDITOR.replace(i.current,{...f,placeholder:l});n.current=e,e.on("change",()=>{const r=e.getData();s.current=r,c(r)}),e.on("blur",()=>{u?.(e.getData())}),e.on("instanceReady",()=>{s.current&&e.getData()!==s.current&&e.setData(s.current)})},[f,u,c,l]);return t.useEffect(()=>{if(m)return p(),()=>{n.current&&(n.current.destroy(),n.current=null)}},[p,m]),R.jsx("div",{className:C,children:R.jsx("textarea",{ref:i,defaultValue:a??""})})}export{w as R};
