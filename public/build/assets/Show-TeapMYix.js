import{u as n,r as c,j as e,H as o,L as i}from"./app-Bcx4Misj.js";import{A as m}from"./AuthenticatedLayout-HinZ8Gu1.js";import{M as h}from"./Modal-BXsWE5L9.js";import"./ApplicationLogo-BitWlCjo.js";import"./FlashMessage-D7fYgTCC.js";import"./transition-CQZYnOxV.js";const r=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}),p={pending:"bg-amber-100 text-amber-700",pending_payment:"bg-amber-100 text-amber-700",payment_failed:"bg-rose-100 text-rose-700",awaiting_materials:"bg-indigo-100 text-indigo-700",under_production:"bg-indigo-100 text-indigo-700",approved:"bg-emerald-100 text-emerald-700",in_production:"bg-indigo-100 text-indigo-700",quality_check:"bg-blue-100 text-blue-700",ready_to_dispatch:"bg-purple-100 text-purple-700",dispatched:"bg-elvee-blue/10 text-elvee-blue",delivered:"bg-emerald-100 text-emerald-700",cancelled:"bg-rose-100 text-rose-700",paid:"bg-emerald-100 text-emerald-700"},d=l=>l?new Date(l).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";function y(){const{order:l}=n().props,[t,x]=c.useState(null);return e.jsxs(m,{children:[e.jsx(o,{title:`Order ${l.reference}`}),e.jsxs("div",{className:"space-y-10",children:[e.jsx("header",{className:"rounded-3xl bg-white p-6 shadow-xl ring-1 ring-slate-200/70",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-semibold text-slate-900",children:["Order ",l.reference]}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"View order details and track fulfilment"})]}),e.jsx(i,{href:route("frontend.orders.index"),className:"inline-flex items-center gap-2 rounded-full border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-600 transition hover:border-slate-400 hover:text-slate-900",children:"Back to list"})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"rounded-3xl bg-white p-6 shadow-xl ring-1 ring-slate-200/70",children:e.jsxs("div",{className:"grid gap-8 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-slate-400",children:"From"}),e.jsx("p",{className:"mt-3 text-lg font-semibold text-slate-900",children:"Elvee"}),e.jsx("p",{className:"mt-1 text-sm text-slate-600",children:"123 Business Street"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Mumbai, Maharashtra 400001"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Phone: +91 98765 43210"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Email: info@elvee.com"}),e.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"GSTIN: 27AAAAA0000A1Z5"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-slate-400",children:"Bill To"}),e.jsx("p",{className:"mt-3 text-lg font-semibold text-slate-900",children:"Your Account"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("h3",{className:"text-xs font-semibold text-slate-400",children:"Order Details"}),e.jsx("p",{className:"mt-3 text-lg font-semibold text-slate-900",children:l.reference}),e.jsxs("p",{className:"mt-1 text-sm text-slate-500",children:["Date: ",e.jsx("span",{className:"font-semibold text-slate-900",children:d(l.created_at)})]}),e.jsx("div",{className:"mt-3 flex justify-end gap-2",children:e.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold ${p[l.status]??"bg-slate-200 text-slate-700"}`,children:l.status_label})})]})]})}),e.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-xl ring-1 ring-slate-200/70",children:[e.jsx("h2",{className:"mb-4 text-lg font-semibold text-slate-900",children:"Items"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"border-b-2 border-slate-200 bg-slate-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-600",children:"Item"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-600",children:"Unit Price"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-slate-600",children:"Qty"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-600",children:"Total"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-slate-600",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:l.items.map(s=>e.jsxs("tr",{className:"hover:bg-slate-50/50 transition",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[s.product?.media?.[0]&&e.jsx("img",{src:s.product.media[0].url,alt:s.product.media[0].alt,className:"h-12 w-12 rounded-lg object-cover shadow-sm"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx(i,{href:route("frontend.catalog.show",{product:s.product?.id??s.id}),className:"text-sm font-semibold text-slate-900 hover:text-feather-gold transition",children:s.name}),e.jsxs("p",{className:"text-xs text-slate-400",children:["SKU ",s.sku]})]})]})}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:r.format(s.unit_price)})}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsx("span",{className:"font-semibold text-slate-900",children:s.quantity})}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:r.format(s.total_price)})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("button",{type:"button",onClick:()=>x(s),className:"inline-flex items-center gap-1 rounded-full border border-elvee-blue/30 px-2.5 py-1.5 text-[10px] font-semibold text-elvee-blue transition hover:border-elvee-blue hover:bg-elvee-blue/5",title:"View product details",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,className:"h-3 w-3",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})})})})})]},s.id))}),e.jsxs("tfoot",{className:"border-t-2 border-slate-200 bg-slate-50",children:[e.jsxs("tr",{children:[e.jsx("td",{colSpan:2,className:"px-4 py-2 text-right text-sm text-slate-600",children:"Subtotal"}),e.jsx("td",{className:"px-4 py-2"}),e.jsx("td",{className:"px-4 py-2 text-right text-sm font-semibold text-slate-900",children:r.format(l.subtotal_amount)})]}),l.discount_amount>0&&e.jsxs("tr",{children:[e.jsx("td",{colSpan:2,className:"px-4 py-2 text-right text-sm text-slate-600",children:"Discount"}),e.jsx("td",{className:"px-4 py-2"}),e.jsxs("td",{className:"px-4 py-2 text-right text-sm font-semibold text-slate-900",children:["-",r.format(l.discount_amount)]})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:2,className:"px-4 py-2 text-right text-sm text-slate-600",children:"Tax (GST)"}),e.jsx("td",{className:"px-4 py-2"}),e.jsx("td",{className:"px-4 py-2 text-right text-sm font-semibold text-slate-900",children:r.format(l.tax_amount)})]}),e.jsxs("tr",{className:"border-t-2 border-slate-300",children:[e.jsx("td",{colSpan:2,className:"px-4 py-3 text-right text-base font-bold text-slate-900",children:"Grand Total"}),e.jsx("td",{className:"px-4 py-3"}),e.jsx("td",{className:"px-4 py-3 text-right text-lg font-bold text-slate-900",children:r.format(l.total_amount)}),e.jsx("td",{className:"px-4 py-3"})]})]})]})})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-xl ring-1 ring-slate-200/70",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Payments"}),e.jsxs("div",{className:"mt-4 space-y-3 text-sm text-slate-600",children:[l.payments.length===0&&e.jsx("p",{className:"rounded-2xl border border-dashed border-slate-300 p-6 text-center text-xs text-slate-500",children:"No payments recorded yet."}),l.payments.map(s=>e.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-slate-200 px-4 py-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-800",children:s.status}),e.jsx("p",{className:"text-xs text-slate-400",children:d(s.created_at)})]}),e.jsx("span",{className:"text-sm font-semibold text-slate-900",children:r.format(s.amount)})]},s.id))]}),(l.status==="pending_payment"||l.status==="payment_failed")&&e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(i,{href:route("frontend.orders.pay",l.id),className:"rounded-full bg-elvee-blue px-4 py-2 text-sm font-semibold text-white shadow-lg shadow-elvee-blue/30 transition hover:bg-navy",children:"Proceed to payment"})}),l.status==="payment_failed"&&e.jsx("p",{className:"mt-2 text-xs text-rose-500",children:"Previous attempt failed. Please retry the payment."})]}),e.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-xl ring-1 ring-slate-200/70",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Status History"}),e.jsx("div",{className:"mt-4 space-y-3 text-sm text-slate-600",children:l.status_history.map(s=>e.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-slate-200 px-4 py-3",children:[e.jsx("span",{className:"font-semibold text-slate-800",children:s.status.replace(/_/g," ")}),e.jsx("span",{className:"text-xs text-slate-400",children:d(s.created_at)})]},s.id))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-xl ring-1 ring-slate-200/70",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Order Timeline"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-slate-400",children:"Created"}),e.jsx("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:d(l.created_at)})]})})}),l.updated_at&&l.updated_at!==l.created_at&&e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-slate-400",children:"Last Updated"}),e.jsx("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:d(l.updated_at)})]})})})]})]}),l.quotations&&l.quotations.length>0&&e.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-xl ring-1 ring-slate-200/70",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Source Quotations"}),e.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"This order was created from the following quotations"}),e.jsx("div",{className:"mt-4 space-y-3",children:l.quotations.map(s=>e.jsxs(i,{href:route("frontend.quotations.show",s.id),className:"flex items-center gap-3 rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 transition hover:border-elvee-blue/50 hover:bg-elvee-blue/5",children:[s.product?.media?.[0]&&e.jsx("img",{src:s.product.media[0].url,alt:s.product.media[0].alt,className:"h-10 w-10 rounded-lg object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:["Quotation #",s.id]}),e.jsx("p",{className:"text-xs text-slate-500",children:s.product?.name??"Product"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-xs text-slate-500",children:["Qty: ",s.quantity]}),e.jsx("p",{className:"text-xs text-slate-400",children:s.mode==="jobwork"?"Jobwork":"Jewellery"})]})]},s.id))})]})]})]})]})]}),t&&e.jsx(h,{show:!0,onClose:()=>x(null),maxWidth:"4xl",children:e.jsxs("div",{className:"flex min-h-0 flex-col",children:[e.jsx("div",{className:"flex-shrink-0 border-b border-slate-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Product Details"}),e.jsx("button",{type:"button",onClick:()=>x(null),className:"text-slate-400 hover:text-slate-600",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,className:"h-5 w-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsx("div",{className:"min-h-0 flex-1 overflow-y-auto px-6 py-4",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-6",children:[t.product?.media?.[0]&&e.jsx("img",{src:t.product.media[0].url,alt:t.product.media[0].alt,className:"h-32 w-32 rounded-lg object-cover shadow-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-xl font-semibold text-slate-900",children:t.name}),e.jsxs("p",{className:"mt-1 text-sm text-slate-500",children:["SKU: ",t.sku]}),e.jsx("div",{className:"mt-3 flex gap-2",children:e.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-200 px-3 py-1 text-xs font-semibold text-slate-700",children:["Qty: ",t.quantity]})})]})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[e.jsx("h5",{className:"mb-3 text-sm font-semibold text-slate-700",children:"Pricing"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[t.product?.base_price&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Base Price:"}),e.jsx("span",{className:"font-semibold text-slate-900",children:r.format(Number(t.product.base_price))})]}),t.product?.making_charge&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Making Charge:"}),e.jsx("span",{className:"font-semibold text-slate-900",children:r.format(Number(t.product.making_charge))})]}),e.jsxs("div",{className:"border-t border-slate-300 pt-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-semibold text-slate-900",children:"Unit Price:"}),e.jsx("span",{className:"font-semibold text-slate-900",children:r.format(t.unit_price)})]}),e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsx("span",{className:"font-semibold text-slate-900",children:"Total Price:"}),e.jsx("span",{className:"font-semibold text-slate-900",children:r.format(t.total_price)})]})]})]})]}),(t.product?.gold_weight||t.product?.silver_weight||t.product?.other_material_weight||t.product?.total_weight)&&e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[e.jsx("h5",{className:"mb-3 text-sm font-semibold text-slate-700",children:"Weights"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[t.product.gold_weight&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Gold Weight:"}),e.jsxs("span",{className:"font-semibold text-slate-900",children:[Number(t.product.gold_weight).toFixed(3)," g"]})]}),t.product.silver_weight&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Silver Weight:"}),e.jsxs("span",{className:"font-semibold text-slate-900",children:[Number(t.product.silver_weight).toFixed(3)," g"]})]}),t.product.other_material_weight&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Other Material Weight:"}),e.jsxs("span",{className:"font-semibold text-slate-900",children:[Number(t.product.other_material_weight).toFixed(3)," g"]})]}),t.product.total_weight&&e.jsx("div",{className:"border-t border-slate-300 pt-2",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-semibold text-slate-900",children:"Total Weight:"}),e.jsxs("span",{className:"font-semibold text-slate-900",children:[Number(t.product.total_weight).toFixed(3)," g"]})]})})]})]}),t.configuration&&Object.keys(t.configuration).length>0&&e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[e.jsx("h5",{className:"mb-3 text-sm font-semibold text-slate-700",children:"Configuration"}),e.jsx("div",{className:"space-y-2 text-sm",children:Object.entries(t.configuration).map(([s,a])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-slate-600",children:[s.replace(/_/g," "),":"]}),e.jsx("span",{className:"font-semibold text-slate-900",children:a==null||a===""?"—":typeof a=="boolean"?a?"Yes":"No":String(a)})]},s))})]}),t.metadata&&Object.keys(t.metadata).length>0&&e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[e.jsx("h5",{className:"mb-3 text-sm font-semibold text-slate-700",children:"Additional Information"}),e.jsx("div",{className:"space-y-2 text-sm",children:Object.entries(t.metadata).map(([s,a])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-slate-600",children:[s.replace(/_/g," "),":"]}),e.jsx("span",{className:"font-semibold text-slate-900",children:a==null||a===""?"—":typeof a=="boolean"?a?"Yes":"No":typeof a=="object"?JSON.stringify(a):String(a)})]},s))})]})]})})]})})]})}export{y as default};
