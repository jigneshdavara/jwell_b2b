import{u as m,r as u,j as e,H as p,L as h,b as n}from"./app-CPxam-6j.js";import{A as f}from"./AuthenticatedLayout-f--Yb3FG.js";import"./FlashMessage-B-NMsk7Y.js";const b=s=>new Intl.NumberFormat("en-IN",{style:"currency",currency:s,maximumFractionDigits:0});function N(){const{cart:s}=m().props,a=u.useMemo(()=>b(s.currency||"INR"),[s.currency]),o=(t,l)=>{const x=Math.max(1,t.quantity+l);n.patch(route("frontend.cart.items.update",t.id),{quantity:x},{preserveScroll:!0,preserveState:!0})},i=(t,l)=>{n.patch(route("frontend.cart.items.update",t.id),{configuration:l},{preserveScroll:!0,preserveState:!0})},d=t=>{n.delete(route("frontend.cart.items.destroy",t.id),{preserveScroll:!0})},r=s.items.length===0,c=()=>{r||n.post(route("frontend.quotations.store-from-cart"),void 0,{preserveScroll:!0})};return e.jsxs(f,{children:[e.jsx(p,{title:"Quotation list"}),e.jsxs("div",{className:"space-y-10",id:"cart",children:[e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Quotation list"}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Adjust metal modes and notes before submitting all requests together for merchandising review."})]}),e.jsx("button",{type:"button",onClick:c,disabled:r,className:`rounded-full px-5 py-2 text-sm font-semibold transition ${r?"cursor-not-allowed bg-slate-300 text-slate-500":"bg-sky-600 text-white shadow-lg shadow-sky-600/30 hover:bg-sky-500"}`,children:"Submit quotations"})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-[2fr_1fr]",children:[e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"rounded-3xl bg-white p-6 shadow-xl ring-1 ring-slate-200/80",children:r?e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4 py-16 text-sm text-slate-500",children:[e.jsx("p",{children:"Your cart is empty. Explore the catalogue to add designs."}),e.jsx(h,{href:route("frontend.catalog.index"),className:"rounded-full bg-slate-900 px-5 py-2 text-sm font-semibold text-white hover:bg-slate-700",children:"Browse catalogue"})]}):e.jsx("div",{className:"space-y-4",children:s.items.map(t=>e.jsxs("div",{className:"flex flex-col gap-4 rounded-2xl border border-slate-200 p-5 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex flex-1 items-start gap-4",children:[t.thumbnail&&e.jsx("img",{src:t.thumbnail,alt:t.name,className:"h-20 w-20 rounded-xl object-cover shadow"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900",children:t.name}),e.jsxs("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400",children:["SKU ",t.sku]}),t.variant_label&&e.jsx("p",{className:"mt-1 text-xs font-medium text-slate-500",children:t.variant_label}),e.jsxs("p",{className:"mt-2 text-sm text-slate-500",children:["Base ",a.format(t.price_breakdown.base??0)," · Making"," ",a.format(t.price_breakdown.making??0)]}),(t.line_discount??0)>0&&e.jsxs("p",{className:"mt-1 text-xs font-semibold text-emerald-600",children:["Making discount −",a.format(t.line_discount??0),t.price_breakdown.discount_details?.name?` (${t.price_breakdown.discount_details.name})`:""]}),e.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-2",children:[e.jsxs("label",{className:"flex flex-col gap-1 text-xs uppercase tracking-[0.3em] text-slate-400",children:["Mode",e.jsxs("select",{className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm font-semibold text-slate-700 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",value:t.configuration?.mode??"purchase",onChange:l=>i(t,{mode:l.target.value}),children:[e.jsx("option",{value:"purchase",children:"Jewellery quotation"}),e.jsx("option",{value:"jobwork",children:"Jobwork"})]})]}),e.jsxs("label",{className:"flex flex-col gap-1 text-xs uppercase tracking-[0.3em] text-slate-400",children:["Notes",e.jsx("textarea",{defaultValue:t.configuration?.notes??"",onBlur:l=>i(t,{notes:l.target.value}),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm text-slate-700 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"Share expectations or deadlines",rows:3})]})]})]})]}),e.jsxs("div",{className:"flex flex-col items-start gap-3 md:flex-row md:items-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-3 rounded-full border border-slate-200 bg-slate-50 px-4 py-2",children:[e.jsx("button",{type:"button",onClick:()=>o(t,-1),className:"text-lg text-slate-500 hover:text-slate-800",children:"−"}),e.jsx("span",{className:"text-sm font-semibold text-slate-900",children:t.quantity}),e.jsx("button",{type:"button",onClick:()=>o(t,1),className:"text-lg text-slate-500 hover:text-slate-800",children:"+"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400",children:"Total"}),e.jsx("p",{className:"text-lg font-semibold text-slate-900",children:a.format(t.line_total)})]}),e.jsx("button",{type:"button",onClick:()=>d(t),className:"text-xs font-medium text-rose-500 hover:text-rose-600",children:"Remove"})]})]},t.id))})})}),e.jsx("aside",{className:"space-y-6",children:e.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-xl ring-1 ring-slate-200/80",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Summary"}),e.jsxs("div",{className:"mt-4 space-y-3 text-sm text-slate-600",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{children:a.format(s.subtotal)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Tax"}),e.jsx("span",{children:a.format(s.tax)})]}),s.discount>0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{children:["-",a.format(s.discount)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Shipping"}),e.jsx("span",{children:a.format(s.shipping)})]}),e.jsx("div",{className:"border-t border-slate-200 pt-3 font-semibold text-slate-900",children:e.jsxs("div",{className:"flex items-center justify-between text-base",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:a.format(s.total)})]})})]}),e.jsx("button",{type:"button",onClick:c,disabled:r,className:`mt-6 block w-full rounded-full px-4 py-2 text-center text-sm font-semibold transition ${r?"cursor-not-allowed bg-slate-300 text-slate-500":"bg-sky-600 text-white shadow-lg shadow-sky-600/30 hover:bg-sky-500"}`,children:"Submit quotations"})]})})]})]})]})}export{N as default};
