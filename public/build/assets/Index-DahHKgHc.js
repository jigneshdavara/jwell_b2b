import{u as d,a as n,j as e,H as x}from"./app-DkJetrPT.js";import{A as p}from"./AdminLayout-Dc2_Wi6a.js";function h(){const{rates:a,metals:r,defaultCurrency:o}=d().props,t=n({metal:r[0]??"",purity:"",price_per_gram:"",currency:o,notes:"",effective_at:""}),l=n({}),i=s=>{s.preventDefault(),t.post(route("admin.rates.override"),{preserveScroll:!0,onSuccess:()=>{t.reset("purity","price_per_gram","notes","effective_at")}})},c=()=>{l.post(route("admin.rates.sync"),{preserveScroll:!0})};return e.jsxs(p,{children:[e.jsx(x,{title:"Live Rates"}),e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"rounded-3xl bg-white p-6 shadow-xl shadow-slate-900/10 ring-1 ring-slate-200/80",children:e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"Live metal & diamond rates"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Feed pulled from configured sources for pricing and procurement."})]}),e.jsxs("button",{type:"button",disabled:l.processing,onClick:c,className:"inline-flex items-center gap-2 rounded-full bg-slate-900 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-slate-900/30 transition hover:bg-slate-700 disabled:cursor-not-allowed disabled:opacity-60",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v6h6M20 20v-6h-6M5 19a9 9 0 0014-14"})}),"Sync rates"]})]})}),e.jsxs("form",{onSubmit:i,className:"space-y-6 rounded-3xl bg-white p-6 shadow-xl shadow-slate-900/10 ring-1 ring-slate-200/80",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Add manual override"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[e.jsx("span",{children:"Metal"}),e.jsx("input",{list:"metal-library",value:t.data.metal,onChange:s=>t.setData("metal",s.target.value),className:"rounded-2xl border border-slate-300 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",required:!0}),t.errors.metal&&e.jsx("span",{className:"text-xs text-rose-500",children:t.errors.metal})]}),e.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[e.jsx("span",{children:"Purity"}),e.jsx("input",{type:"text",value:t.data.purity,onChange:s=>t.setData("purity",s.target.value),className:"rounded-2xl border border-slate-300 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"18K / VVS / etc",required:!0}),t.errors.purity&&e.jsx("span",{className:"text-xs text-rose-500",children:t.errors.purity})]}),e.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[e.jsx("span",{children:"Price per gram"}),e.jsx("input",{type:"number",step:"0.01",value:t.data.price_per_gram,onChange:s=>t.setData("price_per_gram",s.target.value),className:"rounded-2xl border border-slate-300 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",required:!0}),t.errors.price_per_gram&&e.jsx("span",{className:"text-xs text-rose-500",children:t.errors.price_per_gram})]}),e.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[e.jsx("span",{children:"Currency"}),e.jsx("input",{type:"text",value:t.data.currency,onChange:s=>t.setData("currency",s.target.value.toUpperCase()),className:"rounded-2xl border border-slate-300 px-4 py-2 uppercase focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",maxLength:10}),t.errors.currency&&e.jsx("span",{className:"text-xs text-rose-500",children:t.errors.currency})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[e.jsx("span",{children:"Effective at"}),e.jsx("input",{type:"datetime-local",value:t.data.effective_at,onChange:s=>t.setData("effective_at",s.target.value),className:"rounded-2xl border border-slate-300 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),t.errors.effective_at&&e.jsx("span",{className:"text-xs text-rose-500",children:t.errors.effective_at})]}),e.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[e.jsx("span",{children:"Notes"}),e.jsx("textarea",{value:t.data.notes,onChange:s=>t.setData("notes",s.target.value),className:"min-h-[80px] rounded-2xl border border-slate-300 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"Optional context for audit trail"}),t.errors.notes&&e.jsx("span",{className:"text-xs text-rose-500",children:t.errors.notes})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:t.processing,className:"rounded-full bg-slate-900 px-5 py-2 text-sm font-semibold text-white shadow shadow-slate-900/20 transition hover:bg-slate-700 disabled:cursor-not-allowed disabled:opacity-60",children:"Save override"})})]}),e.jsx("div",{className:"overflow-hidden rounded-3xl bg-white shadow-xl shadow-slate-900/10 ring-1 ring-slate-200/80",children:e.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs uppercase tracking-[0.3em] text-slate-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-5 py-3 text-left",children:"Metal"}),e.jsx("th",{className:"px-5 py-3 text-left",children:"Purity"}),e.jsx("th",{className:"px-5 py-3 text-right",children:"Price / g"}),e.jsx("th",{className:"px-5 py-3 text-left",children:"Source"}),e.jsx("th",{className:"px-5 py-3 text-left",children:"Effective at"}),e.jsx("th",{className:"px-5 py-3 text-left",children:"Notes"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100 bg-white",children:[a.data.map(s=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"px-5 py-3 font-semibold text-slate-900",children:s.metal}),e.jsx("td",{className:"px-5 py-3 text-slate-500",children:s.purity??"—"}),e.jsxs("td",{className:"px-5 py-3 text-right text-slate-900",children:[s.price_per_gram.toLocaleString("en-IN")," ",s.currency]}),e.jsx("td",{className:"px-5 py-3 text-slate-600",children:s.source}),e.jsx("td",{className:"px-5 py-3 text-slate-500",children:s.effective_at?new Date(s.effective_at).toLocaleString("en-IN"):"—"}),e.jsx("td",{className:"px-5 py-3 text-slate-500",children:typeof s.metadata?.notes=="string"&&s.metadata.notes.trim().length?s.metadata.notes:"—"})]},s.id)),a.data.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-5 py-6 text-center text-sm text-slate-500",children:"No rate records found."})})]})]})})]}),e.jsx("datalist",{id:"metal-library",children:r.map(s=>e.jsx("option",{value:s},s))})]})}export{h as default};
