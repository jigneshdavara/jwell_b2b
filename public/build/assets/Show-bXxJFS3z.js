import{j as e,r as n,u as le,a as ne,H as ie,b as G}from"./app-2_233VM5.js";import{A as re}from"./AuthenticatedLayout-BJ0QJLye.js";import"./ApplicationLogo-CyVPGvDd.js";import"./FlashMessage-M_rn5rUv.js";function K({children:d,isSelected:I,isDisabled:m=!1,onClick:w}){return e.jsx("button",{type:"button",onClick:w,disabled:m,className:`
                inline-flex items-center rounded-full px-4 py-2 text-sm font-medium transition-all shadow-sm
                ${I?"bg-[#0E244D] text-white shadow-md":m?"border border-slate-200 bg-slate-50 text-slate-400 cursor-not-allowed":"border border-[#0E244D]/30 bg-white text-[#0E244D] hover:bg-[#F8F5F0] hover:border-[#0E244D]/50"}
            `,children:d})}function oe({configurationOptions:d,selectedVariantId:I,onVariantChange:m}){const w=s=>{const l=s.label.replace(/\s+\d+\.?\d*\s*g\s*$/i,"").replace(/\s+\d+\.?\d*\s*grams?\s*$/i,"").trim().split(/\s+/).filter(a=>a.length>0);return l.length>=3?l.slice(0,3).join(" "):l.join(" ")},b=n.useMemo(()=>{const s=new Map;return d.forEach(t=>{if(t.metals.length===0)return;const a=t.metals.map(w).join(" + "),o=`metals_${t.metals.map(u=>`${u.metalId}_${u.metalPurityId??"null"}_${u.metalToneId??"null"}`).sort().join("|")}`;if(!s.has(o))s.set(o,{id:o,label:a,variantIds:[t.variant_id]});else{const u=s.get(o);u.variantIds.includes(t.variant_id)||u.variantIds.push(t.variant_id)}}),Array.from(s.values()).sort((t,l)=>t.label.localeCompare(l.label))},[d]),L=s=>{const t=s.label.split(" ").filter(i=>i.length>0&&!i.match(/^\d+\.\d+ct$/i)&&!i.match(/^\(\d+\)$/));let l="",a="";for(let i=0;i<t.length;i++){const o=t[i];if(/^(SI|VS|VVS|IF|FL|I[1-3]|VVS[12]|VS[12])/i.test(o)){if(l=o.toUpperCase(),i>0){const u=t[i-1];/^[A-Z]{1,2}$/i.test(u)&&u.length<=2&&(a=u.toUpperCase())}break}}return!l&&t.length>=4&&(l=t[3]?.toUpperCase()||"",a=t[2]?.toUpperCase()||""),l&&a?`${l} ${a}`:l||s.label.split(" ").slice(0,4).join(" ")},h=n.useMemo(()=>{const s=new Map;return d.forEach(t=>{if(t.diamonds.length===0)return;const a=t.diamonds.map(L).join(" + "),o=`diamonds_${t.diamonds.map(u=>`${u.diamondTypeId}_${u.diamondShapeId}_${u.diamondColorId}_${u.diamondClarityId}_${u.diamondCutId}`).sort().join("|")}`;if(!s.has(o))s.set(o,{id:o,label:a,variantIds:[t.variant_id]});else{const u=s.get(o);u.variantIds.includes(t.variant_id)||u.variantIds.push(t.variant_id)}}),Array.from(s.values()).sort((t,l)=>t.label.localeCompare(l.label))},[d]),y=n.useMemo(()=>d.find(s=>s.variant_id===I)??null,[I,d]),c=n.useMemo(()=>!y||y.metals.length===0?null:`metals_${y.metals.map(t=>`${t.metalId}_${t.metalPurityId??"null"}_${t.metalToneId??"null"}`).sort().join("|")}`,[y]),r=n.useMemo(()=>!y||y.diamonds.length===0?null:`diamonds_${y.diamonds.map(t=>`${t.diamondTypeId}_${t.diamondShapeId}_${t.diamondColorId}_${t.diamondClarityId}_${t.diamondCutId}`).sort().join("|")}`,[y]),v=n.useMemo(()=>s=>{if(!s)return new Set(h.map(a=>a.id));const t=new Set,l=b.find(a=>a.id===s);return l&&l.variantIds.forEach(a=>{const i=d.find(o=>o.variant_id===a);if(i&&i.diamonds.length>0){const u=`diamonds_${i.diamonds.map(M=>`${M.diamondTypeId}_${M.diamondShapeId}_${M.diamondColorId}_${M.diamondClarityId}_${M.diamondCutId}`).sort().join("|")}`;t.add(u)}}),t},[d,h,b]),f=n.useMemo(()=>s=>{if(!s)return new Set(b.map(a=>a.id));const t=new Set,l=h.find(a=>a.id===s);return l&&l.variantIds.forEach(a=>{const i=d.find(o=>o.variant_id===a);if(i&&i.metals.length>0){const u=`metals_${i.metals.map(M=>`${M.metalId}_${M.metalPurityId??"null"}_${M.metalToneId??"null"}`).sort().join("|")}`;t.add(u)}}),t},[d,b,h]),j=n.useMemo(()=>v(c),[c,v]),E=n.useMemo(()=>f(r),[r,f]),S=(s,t)=>{const l=b.find(o=>o.id===s),a=h.find(o=>o.id===t);return!l||!a?null:l.variantIds.find(o=>a.variantIds.includes(o))??null},k=s=>{if(c===s){m(null);return}if(r){const t=S(s,r);m(t)}else{const t=b.find(l=>l.id===s);m(t?.variantIds[0]??null)}},N=s=>{if(r===s){m(null);return}if(c){const t=S(c,s);m(t)}else{const t=h.find(l=>l.id===s);m(t?.variantIds[0]??null)}},_=c&&r&&!y;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-[#0E244D] mb-2",children:"Customization"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Select your preferred metal and diamond quality to see pricing."})]}),b.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-semibold text-[#0E244D]",children:"Metal"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:b.map(s=>{const t=!r||E.has(s.id);return e.jsx(K,{isSelected:c===s.id,isDisabled:!t,onClick:()=>k(s.id),children:s.label},s.id)})})]}),h.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-semibold text-[#0E244D]",children:"Diamond Quality"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:h.map(s=>{const t=!c||j.has(s.id);return e.jsx(K,{isSelected:r===s.id,isDisabled:!t,onClick:()=>N(s.id),children:s.label},s.id)})})]}),_&&e.jsx("div",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-600",children:"This combination is not available."})]})}function de({selectedConfig:d,productDescription:I}){const[m,w]=n.useState("details"),[b,L]=n.useState(new Set(["metal","diamond","general","description"])),h=r=>{L(v=>{const f=new Set(v);return f.has(r)?f.delete(r):f.add(r),f})},y=n.useMemo(()=>!d||d.metals.length===0?[]:d.metals.map(r=>{const v=r.label.match(/(\d+K|\d{3})/i),f=v?v[1].toUpperCase():"—",j=r.label.split(" "),E=j.findIndex(l=>["Gold","Silver","Platinum"].some(a=>l.includes(a)));let S="—";E>0?S=j[E-1]:j.length>=2&&(S=j[1]);let k="—";if(r.weightGrams){const l=parseFloat(r.weightGrams);!isNaN(l)&&l>0&&(k=l%1===0?`${l.toFixed(0)} g`:`${l.toFixed(2)} g`)}let N="—";r.label.toLowerCase().includes("gold")?N="Gold":r.label.toLowerCase().includes("silver")?N="Silver":r.label.toLowerCase().includes("platinum")&&(N="Platinum");const _=r.label.replace(/\s+\d+\.?\d*\s*g\s*$/i,"").replace(/\s+\d+\.?\d*\s*grams?\s*$/i,"").trim(),s=_.split(/\s+/).filter(l=>l.length>0),t=s.length>=3?s.slice(0,3).join(" "):_;return{id:`${r.metalId}_${r.metalPurityId??"null"}_${r.metalToneId??"null"}`,title:t,karatage:f,materialColour:S,grossMetalWeight:k,metal:N}}),[d]),c=n.useMemo(()=>{if(!d||d.diamonds.length===0)return null;const r=d.diamonds,v=r[0],f=v.label.split(" ").filter(a=>a.length>0&&!a.match(/^\d+\.\d+ct$/i)&&!a.match(/^\(\d+\)$/));let j="",E="";for(let a=0;a<f.length;a++){const i=f[a];if(/^(SI|VS|VVS|IF|FL|I[1-3]|VVS[12]|VS[12])/i.test(i)){if(j=i.toUpperCase(),a>0){const o=f[a-1];/^[A-Z]{1,2}$/i.test(o)&&o.length<=2&&(E=o.toUpperCase())}break}}const S=j&&E?`${j} ${E}`:v.label.split(" ").slice(0,4).join(" "),k=v.label.match(/\b(Round|Princess|Oval|Emerald|Cushion|Marquise|Pear|Asscher|Radiant|Heart)\b/i),N=k?k[1]:"—",_=r.reduce((a,i)=>{const o=parseFloat(i.totalCarat||"0");return a+(isNaN(o)?0:o)},0),s=_>0?`${_.toFixed(2)} ct`:"—",t=r.reduce((a,i)=>a+(i.stoneCount||0),0),l=t>0?t.toString():"—";return{diamondQuality:S,diamondShape:N,totalCaratWeight:s,numberOfDiamonds:l}},[d]);return e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"flex border-b border-[#0E244D]/20",children:[e.jsx("button",{type:"button",onClick:()=>w("details"),className:`px-4 py-2 text-sm font-semibold transition-colors ${m==="details"?"text-[#0E244D] border-b-2 border-[#0E244D]":"text-gray-500 hover:text-[#0E244D]"}`,children:"Product Details"}),e.jsx("button",{type:"button",onClick:()=>w("price"),className:`px-4 py-2 text-sm font-semibold transition-colors ${m==="price"?"text-[#0E244D] border-b-2 border-[#0E244D]":"text-gray-500 hover:text-[#0E244D]"}`,children:"Price Breakup"})]}),m==="details"&&e.jsxs("div",{className:"space-y-4",children:[d&&d.metals.length>0&&y.length>0&&e.jsxs("div",{className:"rounded-2xl bg-white border border-[#0E244D]/10 shadow-sm overflow-hidden",children:[e.jsxs("button",{type:"button",onClick:()=>h("metal"),className:"w-full flex items-center justify-between px-6 py-4 text-left hover:bg-[#F8F5F0]/50 transition-colors",children:[e.jsx("h3",{className:"text-base font-semibold text-[#0E244D]",children:"Metal Details"}),e.jsx("svg",{className:`w-5 h-5 text-[#0E244D] transition-transform ${b.has("metal")?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),b.has("metal")&&e.jsx("div",{className:"px-6 pb-6 space-y-6",children:y.map((r,v)=>e.jsxs("div",{className:v>0?"pt-6 border-t border-gray-200":"",children:[e.jsx("h4",{className:"text-sm font-semibold text-[#0E244D] mb-4",children:r.title}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] uppercase tracking-wide text-gray-500 mb-1",children:"Karatage"}),e.jsx("div",{className:"text-lg font-semibold text-[#0E244D]",children:r.karatage})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] uppercase tracking-wide text-gray-500 mb-1",children:"Material Colour"}),e.jsx("div",{className:"text-lg font-semibold text-[#0E244D]",children:r.materialColour})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] uppercase tracking-wide text-gray-500 mb-1",children:"Gross Metal Weight"}),e.jsx("div",{className:"text-lg font-semibold text-[#0E244D]",children:r.grossMetalWeight})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] uppercase tracking-wide text-gray-500 mb-1",children:"Metal"}),e.jsx("div",{className:"text-lg font-semibold text-[#0E244D]",children:r.metal})]})]})]},r.id))})]}),d&&d.diamonds.length>0&&c&&e.jsxs("div",{className:"rounded-2xl bg-white border border-[#0E244D]/10 shadow-sm overflow-hidden",children:[e.jsxs("button",{type:"button",onClick:()=>h("diamond"),className:"w-full flex items-center justify-between px-6 py-4 text-left hover:bg-[#F8F5F0]/50 transition-colors",children:[e.jsx("h3",{className:"text-base font-semibold text-[#0E244D]",children:"Diamond Details"}),e.jsx("svg",{className:`w-5 h-5 text-[#0E244D] transition-transform ${b.has("diamond")?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),b.has("diamond")&&e.jsx("div",{className:"px-6 pb-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] uppercase tracking-wide text-gray-500 mb-1",children:"Diamond Quality"}),e.jsx("div",{className:"text-lg font-semibold text-[#0E244D]",children:c.diamondQuality})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] uppercase tracking-wide text-gray-500 mb-1",children:"Diamond Shape"}),e.jsx("div",{className:"text-lg font-semibold text-[#0E244D]",children:c.diamondShape})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] uppercase tracking-wide text-gray-500 mb-1",children:"Total Carat Weight"}),e.jsx("div",{className:"text-lg font-semibold text-[#0E244D]",children:c.totalCaratWeight})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] uppercase tracking-wide text-gray-500 mb-1",children:"Number of Diamonds"}),e.jsx("div",{className:"text-lg font-semibold text-[#0E244D]",children:c.numberOfDiamonds})]})]})})]}),e.jsxs("div",{className:"rounded-2xl bg-white border border-[#0E244D]/10 shadow-sm overflow-hidden",children:[e.jsxs("button",{type:"button",onClick:()=>h("general"),className:"w-full flex items-center justify-between px-6 py-4 text-left hover:bg-[#F8F5F0]/50 transition-colors",children:[e.jsx("h3",{className:"text-base font-semibold text-[#0E244D]",children:"General Details"}),e.jsx("svg",{className:`w-5 h-5 text-[#0E244D] transition-transform ${b.has("general")?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),b.has("general")&&e.jsx("div",{className:"px-6 pb-6",children:e.jsx("div",{className:"text-sm text-gray-600",children:"General product information will be displayed here."})})]}),I&&e.jsxs("div",{className:"rounded-2xl bg-white border border-[#0E244D]/10 shadow-sm overflow-hidden",children:[e.jsxs("button",{type:"button",onClick:()=>h("description"),className:"w-full flex items-center justify-between px-6 py-4 text-left hover:bg-[#F8F5F0]/50 transition-colors",children:[e.jsx("h3",{className:"text-base font-semibold text-[#0E244D]",children:"Description"}),e.jsx("svg",{className:`w-5 h-5 text-[#0E244D] transition-transform ${b.has("description")?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),b.has("description")&&e.jsx("div",{className:"px-6 pb-6",children:e.jsx("div",{className:"text-sm text-gray-700 leading-relaxed",children:I})})]})]}),m==="price"&&d&&e.jsxs("div",{className:"rounded-2xl bg-white border border-[#0E244D]/10 shadow-sm p-6",children:[e.jsx("h3",{className:"text-base font-semibold text-[#0E244D] mb-4",children:"Price Breakdown"}),e.jsxs("div",{className:"space-y-3",children:[d.price_breakup.metal>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Metal"}),e.jsxs("span",{className:"text-sm font-semibold text-[#0E244D]",children:["₹",d.price_breakup.metal.toLocaleString("en-IN")]})]}),d.price_breakup.diamond>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Diamond"}),e.jsxs("span",{className:"text-sm font-semibold text-[#0E244D]",children:["₹",d.price_breakup.diamond.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Making Charge"}),e.jsxs("span",{className:"text-sm font-semibold text-[#0E244D]",children:["₹",d.price_breakup.making.toLocaleString("en-IN")]})]}),d.price_breakup.adjustment!==0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Adjustment"}),e.jsxs("span",{className:"text-sm font-semibold text-[#0E244D]",children:["₹",d.price_breakup.adjustment.toLocaleString("en-IN")]})]}),e.jsx("div",{className:"border-t border-gray-200 pt-3 mt-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-base font-semibold text-[#0E244D]",children:"Total"}),e.jsxs("span",{className:"text-lg font-bold text-[#0E244D]",children:["₹",d.price_total.toLocaleString("en-IN")]})]})})]})]})]})}const q=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0});function fe(){const d=le(),{mode:I,product:m,configurationOptions:w}=d.props,b=d.props.wishlist?.product_ids??[],L=n.useMemo(()=>new Set(b),[b]),[h,y]=n.useState(w[0]?.variant_id??null),c=n.useMemo(()=>w.find(x=>x.variant_id===h)??null,[h,w]),[r]=n.useState("purchase"),[v,f]=n.useState(!1),[j,E]=n.useState(!1),[S,k]=n.useState("1"),[N,_]=n.useState(0);n.useRef(null);const[s,t]=n.useState(!1),[l,a]=n.useState(1.5),i=m.media.length,o=i>0,u=o?m.media[Math.min(N,i-1)]:null,M=(x,p,$)=>Math.min($,Math.max(p,x)),{data:D,setData:C,post:O,processing:V,errors:P}=ne({product_id:m.id,product_variant_id:h??null,mode:r,quantity:1,notes:"",selections:{metal_id:null,metal_purity_id:null,metal_tone_id:null,diamond_option_keys:[],size_cm:null}});n.useEffect(()=>{C("mode",r)},[r,C]),n.useEffect(()=>{k(String(D.quantity))},[h,D.quantity]);const F=I==="jobwork",W=F&&!m.is_jobwork_allowed;n.useEffect(()=>{C("product_variant_id",h??null)},[h,C]);const[ce,me]=n.useState(!1),[ue,Z]=n.useState(L.has(m.id));n.useEffect(()=>{Z(L.has(m.id))},[L,m.id]),n.useEffect(()=>{_(0)},[m.id]),n.useEffect(()=>{N>i-1&&_(Math.max(i-1,0))},[N,i]);const H=n.useMemo(()=>c?F?c.price_breakup.making+c.price_breakup.adjustment:c.price_total:0,[c,F]),J=x=>{if(x.preventDefault(),V||z||W)return;const p={product_id:m.id,product_variant_id:D.product_variant_id,quantity:D.quantity,configuration:{mode:r,notes:D.notes,selections:D.selections}};G.post(route("frontend.cart.items.store"),p,{preserveScroll:!0})},X=()=>{V||j||(E(!0),O(route("frontend.quotations.store"),{preserveScroll:!0,onSuccess:()=>f(!1),onFinish:()=>E(!1)}))},Y=()=>{const x={product_id:m.id,product_variant_id:D.product_variant_id,quantity:D.quantity,configuration:{mode:I,notes:D.notes,selections:D.selections}};G.post(route("frontend.cart.items.store"),x,{preserveScroll:!0,onSuccess:()=>{f(!1)}})},ee=n.useCallback(()=>{o&&t(!0)},[o]),Q=n.useCallback(()=>{t(!1)},[]);n.useCallback(x=>{a(p=>M(p+x,1,3))},[]);const R=n.useCallback(()=>a(1.5),[]),B=n.useCallback(()=>{!o||i<=1||_(x=>(x-1+i)%i)},[o,i]),U=n.useCallback(()=>{!o||i<=1||_(x=>(x+1)%i)},[o,i]);n.useEffect(()=>{if(!s||typeof document>"u")return;const x=document.body.style.overflow;document.body.style.overflow="hidden";const p=$=>{$.key==="Escape"?Q():$.key==="ArrowRight"?U():$.key==="ArrowLeft"&&B()};return window.addEventListener("keydown",p),()=>{document.body.style.overflow=x,window.removeEventListener("keydown",p)}},[s,Q,U,B]),n.useEffect(()=>{s&&R()},[N,s,R]);const z=w.length>0&&!c,g=c?.inventory_quantity??null,A=g!==null&&g===0,te=parseInt(S,10)||1,T=g!==null&&g>0&&te>g,se=A||T;return n.useEffect(()=>{k(String(D.quantity))},[h]),e.jsxs(re,{children:[e.jsx(ie,{title:m.name}),e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"grid gap-10 lg:grid-cols-[1.6fr_1fr]",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-xl ring-1 ring-slate-200/80",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:m.name}),m.brand&&e.jsxs("p",{className:"mt-1 text-sm text-slate-500",children:["by ",m.brand]})]}),o&&e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"relative aspect-square w-full overflow-hidden rounded-2xl bg-slate-100",children:e.jsx("img",{src:u?.url,alt:u?.alt??m.name,className:"h-full w-full object-cover",onClick:ee,onError:x=>{const p=x.target;p.src="/placeholder-image.png"}})}),i>1&&e.jsx("div",{className:"mt-4 flex gap-2 overflow-x-auto pb-2",children:m.media.map((x,p)=>e.jsx("button",{type:"button",onClick:()=>_(p),className:`relative h-20 w-20 flex-shrink-0 overflow-hidden rounded-xl border-2 transition ${p===N?"border-feather-gold":"border-transparent hover:border-slate-300"}`,children:e.jsx("img",{src:x.url,alt:x.alt??m.name,className:"h-full w-full object-cover",onError:$=>{const ae=$.target;ae.src="/placeholder-image.png"}})},p))})]}),e.jsx(de,{selectedConfig:c,productDescription:m.description})]})}),e.jsx("div",{className:"space-y-6",children:e.jsxs("form",{onSubmit:J,className:"w-full space-y-5 rounded-3xl bg-white p-6 shadow-xl ring-1 ring-slate-200/80",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Request quotation"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Select your configuration and our merchandising desk will share pricing shortly."})]}),w.length>0&&e.jsx(oe,{configurationOptions:w,selectedVariantId:h,onVariantChange:y}),e.jsxs("label",{className:"block space-y-1",children:[e.jsxs("span",{className:"text-xs font-semibold text-slate-600",children:["Quantity",g!==null&&g>0&&!T&&e.jsxs("span",{className:"ml-1 font-normal text-slate-500",children:["(Available: ",g,")"]})]}),e.jsx("input",{type:"number",min:"1",max:g!==null&&g>0?g:void 0,value:S,onChange:x=>{const p=x.target.value;k(p);const $=parseInt(p,10);!isNaN($)&&$>=1&&C("quantity",$)},onBlur:x=>{const p=parseInt(S,10);isNaN(p)||p<1?(k("1"),C("quantity",1)):(k(String(p)),C("quantity",p))},className:`w-full rounded-2xl border px-4 py-2.5 text-sm text-slate-900 focus:outline-none focus:ring-2 ${T&&!A?"border-rose-300 bg-rose-50 focus:border-rose-400 focus:ring-rose-400/20":"border-slate-200 bg-white focus:border-feather-gold focus:ring-feather-gold/20"}`}),P.quantity&&e.jsx("span",{className:"text-xs text-rose-500",children:P.quantity}),T&&!A&&!P.quantity&&g!==null&&e.jsxs("span",{className:"text-xs text-rose-500",children:["Only ",g," ",g===1?"item is":"items are"," available. Maximum ",g," ",g===1?"item":"items"," allowed for request."]})]}),e.jsxs("label",{className:"block space-y-1",children:[e.jsx("span",{className:"text-xs font-semibold text-slate-600",children:"Notes (optional)"}),e.jsx("textarea",{rows:4,value:D.notes,onChange:x=>C("notes",x.target.value),className:"w-full rounded-2xl border border-slate-200 bg-white px-4 py-2.5 text-sm text-slate-900 focus:border-feather-gold focus:outline-none focus:ring-2 focus:ring-feather-gold/20",placeholder:"List required scope: hallmarking, hallmark packaging, diamond certification, delivery deadlines…"}),P.notes&&e.jsx("span",{className:"text-xs text-rose-500",children:P.notes})]}),e.jsxs("div",{className:"rounded-2xl bg-slate-50 px-4 py-3 text-sm text-slate-600",children:[e.jsx("p",{className:"font-semibold text-slate-700",children:"Estimated total"}),c?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"mt-1 text-xl font-semibold text-slate-900",children:q.format(H)}),e.jsx("p",{className:"text-xs text-slate-500",children:F?"Includes making charge only. Final quotation may vary with labour costs.":"Includes metal, diamond, making charge & adjustment. Final quotation may vary with bullion/diamond parity and labour."}),!F&&e.jsxs("div",{className:"mt-2 space-y-1 text-xs",children:[c.price_breakup.metal>0&&e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{children:"Metal:"}),e.jsx("span",{className:"font-medium",children:q.format(c.price_breakup.metal)})]}),c.price_breakup.diamond>0&&e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{children:"Diamond:"}),e.jsx("span",{className:"font-medium",children:q.format(c.price_breakup.diamond)})]}),e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{children:"Making:"}),e.jsx("span",{className:"font-medium",children:q.format(c.price_breakup.making)})]}),c.price_breakup.adjustment!==0&&e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{children:"Adjustment:"}),e.jsx("span",{className:"font-medium",children:q.format(c.price_breakup.adjustment)})]})]}),F&&e.jsxs("div",{className:"mt-2 space-y-1 text-xs",children:[e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{children:"Making charge:"}),e.jsx("span",{className:"font-medium",children:q.format(c.price_breakup.making)})]}),c.price_breakup.adjustment!==0&&e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{children:"Adjustment:"}),e.jsx("span",{className:"font-medium",children:q.format(c.price_breakup.adjustment)})]})]})]}):e.jsx("p",{className:"mt-1 text-sm text-rose-600",children:"Please select a configuration to see pricing."})]}),A&&e.jsx("div",{className:"rounded-2xl border border-amber-300 bg-amber-50 px-4 py-3 text-sm text-amber-800",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"h-5 w-5 flex-shrink-0 text-amber-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Out of Stock"}),e.jsx("p",{className:"text-xs mt-0.5",children:"This product variant is currently out of stock. Quotation requests are not available."})]})]})}),e.jsx("button",{type:"submit",disabled:V||z||W||se,className:"w-full rounded-full bg-elvee-blue px-4 py-2 text-sm font-semibold text-white shadow-lg shadow-elvee-blue/30 transition hover:bg-navy disabled:cursor-not-allowed disabled:opacity-60",children:V?"Submitting…":"Request quotation"})]})})]})}),v&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"w-full max-w-md space-y-4 rounded-3xl bg-white p-6 shadow-2xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Confirm quotation"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Submit this quotation request with the selected configuration? Our merchandising desk will review and respond shortly."}),e.jsxs("div",{className:"space-y-2 rounded-2xl bg-slate-50 p-4 text-xs text-slate-500",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-slate-700",children:"Mode:"})," ",I==="jobwork"?"Jobwork":"Jewellery"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold text-slate-700",children:"Quantity:"})," ",D.quantity]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",className:"rounded-full border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-600 hover:border-slate-400 hover:text-slate-900",onClick:()=>f(!1),disabled:j,children:"Review again"}),e.jsx("button",{type:"button",className:"rounded-full border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-600 hover:border-slate-400 hover:text-slate-900",onClick:Y,disabled:j,children:"Add to quotation list"}),e.jsx("button",{type:"button",className:"rounded-full bg-elvee-blue px-4 py-2 text-sm font-semibold text-white shadow-elvee-blue/30 hover:bg-navy disabled:cursor-not-allowed disabled:opacity-60",onClick:X,disabled:j,children:j?"Submitting…":"Confirm submission"})]})]})})]})}export{fe as default};
