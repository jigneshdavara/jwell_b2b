import{u as me,a as xe,r as x,j as s,H as pe}from"./app-DkJetrPT.js";import{A as ge}from"./AdminLayout-Dc2_Wi6a.js";const C=(k=!1)=>({sku:"",label:"",gold_purity_id:"",silver_purity_id:"",diamond_option_key:null,size_cm:"",price_adjustment:"0",is_default:k,metadata:{}}),$=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`local-${Date.now()}-${Math.random().toString(16).slice(2,8)}`,S=()=>({key:$(),type_id:"",shape_id:"",color_id:"",clarity_id:"",cut_id:"",weight:""});function fe(){const{props:k}=me(),{product:i,brands:G,categories:B,goldPurities:h,silverPurities:b,diamondCatalog:p,customerGroups:_e,errors:d}=k,A=i?.diamond_options?.length?i.diamond_options.map((e,t)=>({key:e.key??`${$()}-${t}`,type_id:e.type_id??"",shape_id:e.shape_id??"",color_id:e.color_id??"",clarity_id:e.clarity_id??"",cut_id:e.cut_id??"",weight:e.weight!==null&&e.weight!==void 0?String(e.weight):""})):[],K=i?.variants?.length?i.variants.map((e,t)=>({id:e.id,sku:e.sku??"",label:e.label??"",gold_purity_id:e.gold_purity_id??"",silver_purity_id:e.silver_purity_id??"",diamond_option_key:e.diamond_option_key??null,size_cm:e.size_cm?String(e.size_cm):"",price_adjustment:String(e.price_adjustment??0),is_default:e.is_default??t===0,metadata:e.metadata??{}})):[C(!0)],W=i?.making_charge_discount_overrides?.length?i.making_charge_discount_overrides.map((e,t)=>({localKey:`${$()}-${t}`,customer_group_id:e.customer_group_id!==null&&e.customer_group_id!==void 0?Number(e.customer_group_id):"",type:e.type??"percentage",value:e.value!==null&&e.value!==void 0?String(e.value):""})):[],w=xe(()=>({sku:i?.sku??"",name:i?.name??"",description:i?.description??"",brand_id:String(i?.brand_id??""),category_id:String(i?.category_id??""),gross_weight:i?.gross_weight?String(i.gross_weight):"",net_weight:i?.net_weight?String(i.net_weight):"",base_price:i?.base_price?String(i.base_price):"",making_charge:i?.making_charge?String(i.making_charge):"",making_charge_discount_type:i?.making_charge_discount_type??null,making_charge_discount_value:i?.making_charge_discount_value!==null&&i?.making_charge_discount_value!==void 0?String(i.making_charge_discount_value):null,making_charge_discount_overrides:W,is_jobwork_allowed:i?.is_jobwork_allowed??!1,visibility:i?.visibility??"public",standard_pricing:{labour_brand:i?.standard_pricing?.labour_brand?String(i.standard_pricing.labour_brand):"",diamond_rate:i?.standard_pricing?.diamond_rate?String(i.standard_pricing.diamond_rate):"",gold_rate:i?.standard_pricing?.gold_rate?String(i.standard_pricing.gold_rate):"",colourstone_rate:i?.standard_pricing?.colourstone_rate?String(i.standard_pricing.colourstone_rate):""},variants:K,is_variant_product:i?.is_variant_product??!0,uses_gold:i?.uses_gold??!1,uses_silver:i?.uses_silver??!1,uses_diamond:i?.uses_diamond??!1,gold_purity_ids:i?.gold_purity_ids??[],silver_purity_ids:i?.silver_purity_ids??[],diamond_options:A,media_uploads:[],removed_media_ids:[]})),{setData:c,post:M,put:D,processing:P}=w,n=w.data,O=x.useMemo(()=>Object.fromEntries(h.map(e=>[e.id,e.name])),[h]),L=x.useMemo(()=>Object.fromEntries(b.map(e=>[e.id,e.name])),[b]),f=x.useMemo(()=>({types:Object.fromEntries(p.types.map(e=>[e.id,e.name])),shapes:Object.fromEntries(p.shapes.map(e=>[e.id,e.name])),colors:Object.fromEntries(p.colors.map(e=>[e.id,e.name])),clarities:Object.fromEntries(p.clarities.map(e=>[e.id,e.name])),cuts:Object.fromEntries(p.cuts.map(e=>[e.id,e.name]))}),[p]),v=x.useCallback(e=>{if(!e)return"";const t=[];return e.weight&&t.push(`${e.weight} Ct`),e.shape_id&&t.push(f.shapes[Number(e.shape_id)]??""),e.clarity_id&&t.push(f.clarities[Number(e.clarity_id)]??""),e.color_id&&t.push(f.colors[Number(e.color_id)]??""),e.type_id&&t.push(f.types[Number(e.type_id)]??""),e.cut_id&&t.push(f.cuts[Number(e.cut_id)]??""),t.filter(Boolean).join(" - ")},[f]),N=x.useCallback((e,t)=>{const a=e.gold_purity_id!==""&&e.gold_purity_id!==null?O[Number(e.gold_purity_id)]??"":"",l=e.silver_purity_id!==""&&e.silver_purity_id!==null?L[Number(e.silver_purity_id)]??"":"",o=t.diamond_options.find(ue=>ue.key===e.diamond_option_key)??null,r=v(o),u=e.size_cm?`${e.size_cm} cm`:"",j=[r,a,l,u].filter(Boolean),g=j.length?j.join(" / "):"Variant",oe=[a,l].filter(Boolean).join(" + "),de=r,ce={gold_purity_id:e.gold_purity_id!==""&&e.gold_purity_id!==null?Number(e.gold_purity_id):null,silver_purity_id:e.silver_purity_id!==""&&e.silver_purity_id!==null?Number(e.silver_purity_id):null,diamond_option_key:e.diamond_option_key??null,diamond:o?{key:o.key,type_id:o.type_id!==""?Number(o.type_id):null,shape_id:o.shape_id!==""?Number(o.shape_id):null,color_id:o.color_id!==""?Number(o.color_id):null,clarity_id:o.clarity_id!==""?Number(o.clarity_id):null,cut_id:o.cut_id!==""?Number(o.cut_id):null,weight:o.weight?Number(o.weight):null}:null,size_cm:e.size_cm?Number(e.size_cm):null,auto_label:g};return{autoLabel:g,metalTone:oe,stoneQuality:de,sizeText:u,metadata:ce}},[v,O,L]),m=x.useCallback(e=>e.variants.map((t,a)=>{const l=N(t,e),o=t.metadata?.auto_label??"",r=!t.label||t.label===o;return{...t,label:r?l.autoLabel:t.label,metadata:l.metadata,is_default:t.is_default??a===0}}),[N]),F=x.useMemo(()=>h.filter(e=>n.gold_purity_ids.includes(e.id)),[n.gold_purity_ids,h]),T=x.useMemo(()=>b.filter(e=>n.silver_purity_ids.includes(e.id)),[n.silver_purity_ids,b]),z=x.useMemo(()=>n.diamond_options.map(e=>({key:e.key,label:v(e)||`Option ${e.key.slice(-4)}`})),[v,n.diamond_options]),q=e=>{c(t=>{const a={...t,is_variant_product:e,uses_gold:e?t.uses_gold:!1,uses_silver:e?t.uses_silver:!1,uses_diamond:e?t.uses_diamond:!1,gold_purity_ids:e?t.gold_purity_ids:[],silver_purity_ids:e?t.silver_purity_ids:[],diamond_options:e?t.diamond_options:[],variants:e?t.variants.length>0?t.variants:[C(!0)]:[]};return a.variants=m(a),a})},H=e=>{c(t=>{const a={...t,uses_gold:e,gold_purity_ids:e?t.gold_purity_ids:[],variants:e?t.variants:t.variants.map(l=>({...l,gold_purity_id:""}))};return a.variants=m(a),a})},J=e=>{c(t=>{const a={...t,uses_silver:e,silver_purity_ids:e?t.silver_purity_ids:[],variants:e?t.variants:t.variants.map(l=>({...l,silver_purity_id:""}))};return a.variants=m(a),a})},Q=e=>{c(t=>{const a=e&&t.diamond_options.length===0?[S()]:e?t.diamond_options:[],l={...t,uses_diamond:e,diamond_options:a,variants:e?t.variants:t.variants.map(o=>({...o,diamond_option_key:null}))};return l.variants=m(l),l})},Y=e=>{c(t=>{const l=t.gold_purity_ids.includes(e)?t.gold_purity_ids.filter(r=>r!==e):[...t.gold_purity_ids,e],o={...t,gold_purity_ids:l,variants:t.variants.map(r=>typeof r.gold_purity_id=="number"&&!l.includes(r.gold_purity_id)?{...r,gold_purity_id:""}:r)};return o.variants=m(o),o})},X=e=>{c(t=>{const l=t.silver_purity_ids.includes(e)?t.silver_purity_ids.filter(r=>r!==e):[...t.silver_purity_ids,e],o={...t,silver_purity_ids:l,variants:t.variants.map(r=>typeof r.silver_purity_id=="number"&&!l.includes(r.silver_purity_id)?{...r,silver_purity_id:""}:r)};return o.variants=m(o),o})},Z=()=>{c(e=>{const t={...e,diamond_options:[...e.diamond_options,S()]};return t.variants=m(t),t})},y=(e,t,a)=>{c(l=>{const o=l.diamond_options.map(u=>{if(u.key!==e)return u;if(t==="weight")return{...u,weight:a===null?"":String(a)};const j=a===null||a===""?"":typeof a=="number"?a:a===""?"":Number(a);return{...u,[t]:j}}),r={...l,diamond_options:o};return r.variants=m(r),r})},I=e=>{c(t=>{const a=t.diamond_options.filter(o=>o.key!==e),l={...t,diamond_options:a,variants:t.variants.map(o=>o.diamond_option_key===e?{...o,diamond_option_key:null}:o)};return l.variants=m(l),l})},ee=e=>{c(t=>{if(t.variants.length===1)return t;const a=t.variants.filter((o,r)=>r!==e);a.every(o=>!o.is_default)&&a.length>0&&(a[0].is_default=!0);const l={...t,variants:a};return l.variants=m(l),l})},_=(e,t,a)=>{c(l=>{const o=l.variants.map((u,j)=>{if(j!==e)return u;const g={...u};switch(t){case"is_default":typeof a=="boolean"&&(g.is_default=a);break;case"gold_purity_id":(a===""||typeof a=="number")&&(g.gold_purity_id=a);break;case"silver_purity_id":(a===""||typeof a=="number")&&(g.silver_purity_id=a);break;case"diamond_option_key":g.diamond_option_key=a?String(a):null;break;case"size_cm":typeof a=="string"&&(g.size_cm=a);break;case"price_adjustment":typeof a=="string"&&(g.price_adjustment=a);break;case"sku":case"label":typeof a=="string"&&(g[t]=a);break}return g}),r={...l,variants:o};return r.variants=m(r),r})},se=e=>{c(t=>({...t,variants:t.variants.map((a,l)=>({...a,is_default:l===e}))}))},te=()=>{c(e=>{const t={...e,variants:[...e.variants,C(e.variants.length===0)]};return t.variants=m(t),t})};x.useEffect(()=>{n.uses_diamond&&n.diamond_options.length===0&&c(e=>{const t={...e,diamond_options:[S()]};return t.variants=m(t),t})},[n.uses_diamond,n.diamond_options.length,m,c]);const ae=e=>{e.preventDefault(),w.transform(t=>{const a=t,l={...a};l.uses_gold=a.uses_gold,l.uses_silver=a.uses_silver,l.uses_diamond=a.uses_diamond,l.gold_purity_ids=a.uses_gold?[...a.gold_purity_ids]:[],l.silver_purity_ids=a.uses_silver?[...a.silver_purity_ids]:[],l.diamond_options=a.uses_diamond?a.diamond_options.map(r=>({key:r.key,type_id:r.type_id!==""?Number(r.type_id):null,shape_id:r.shape_id!==""?Number(r.shape_id):null,color_id:r.color_id!==""?Number(r.color_id):null,clarity_id:r.clarity_id!==""?Number(r.clarity_id):null,cut_id:r.cut_id!==""?Number(r.cut_id):null,weight:r.weight?Number(r.weight):null})):[];const o=r=>r==null||r===""?null:typeof r=="number"?r:Number(r);return l.making_charge_discount_type=a.making_charge_discount_type||null,l.making_charge_discount_value=a.making_charge_discount_type?o(a.making_charge_discount_value):null,l.making_charge_discount_overrides=a.making_charge_discount_overrides.map(r=>({customer_group_id:r.customer_group_id!==""?Number(r.customer_group_id):null,type:r.type,value:o(r.value)})).filter(r=>r.customer_group_id!==null&&r.value!==null),l.variants=a.is_variant_product?a.variants.map(r=>{const u=N(r,a);return{id:r.id,sku:r.sku,label:r.label||u.autoLabel,metal_tone:u.metalTone||null,stone_quality:u.stoneQuality||null,size:u.sizeText||null,price_adjustment:r.price_adjustment,is_default:r.is_default,metadata:u.metadata}}):[],a.is_variant_product||(l.uses_gold=!1,l.uses_silver=!1,l.uses_diamond=!1),(l.media_uploads?.length??0)===0&&delete l.media_uploads,(l.removed_media_ids?.length??0)===0&&delete l.removed_media_ids,l}),i?.id?(n.media_uploads?.length??0)>0?D(route("admin.products.update",i.id),{forceFormData:!0}):D(route("admin.products.update",i.id)):(n.media_uploads?.length??0)>0?M(route("admin.products.store"),{forceFormData:!0}):M(route("admin.products.store"))},U=d.variants,V=x.useMemo(()=>Object.entries(d??{}).filter(([e])=>e.startsWith("media_uploads")).map(([,e])=>e),[d]),E=x.useMemo(()=>i?.media?[...i.media].sort((e,t)=>e.position-t.position):[],[i?.media]),re=e=>{const t=n.removed_media_ids??[],l=t.includes(e)?t.filter(o=>o!==e):[...t,e];c("removed_media_ids",l)},le=e=>{const t=e.target.files?Array.from(e.target.files):[];t.length!==0&&(c("media_uploads",[...n.media_uploads??[],...t]),e.target.value="")},ie=e=>{c("media_uploads",(n.media_uploads??[]).filter((t,a)=>a!==e))},R=e=>(n.removed_media_ids??[]).includes(e),ne=x.useMemo(()=>[{key:"labour_brand",label:"Labour brand / atelier",type:"text"},{key:"diamond_rate",label:"Diamond rate (₹/ct)",type:"number"},{key:"gold_rate",label:"Gold rate (₹/g)",type:"number"},{key:"colourstone_rate",label:"Colour stone rate (₹/ct)",type:"number"}],[]);return s.jsxs(ge,{children:[s.jsx(pe,{title:i?.id?`Edit ${i.name}`:"New Product"}),s.jsxs("form",{onSubmit:ae,className:"space-y-10",children:[s.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-xl shadow-slate-900/10",children:[s.jsxs("div",{className:"flex flex-col gap-4 border-b border-slate-100 pb-6 sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:i?.id?"Update catalogue record":"Create catalogue record"}),s.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Define product master information, atelier references, and jobwork eligibility."})]}),s.jsx("button",{type:"submit",disabled:P,className:"inline-flex items-center gap-2 rounded-full bg-slate-900 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-slate-900/20 transition hover:bg-slate-700 disabled:cursor-not-allowed disabled:opacity-60",children:P?"Saving…":i?.id?"Save changes":"Create product"})]}),s.jsxs("div",{className:"mt-6 grid gap-6 lg:grid-cols-2",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:"SKU *"}),s.jsx("input",{type:"text",value:n.sku,onChange:e=>c("sku",e.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),d.sku&&s.jsx("span",{className:"text-xs text-rose-500",children:d.sku})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:"Product name *"}),s.jsx("input",{type:"text",value:n.name,onChange:e=>c("name",e.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),d.name&&s.jsx("span",{className:"text-xs text-rose-500",children:d.name})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:"Description"}),s.jsx("textarea",{value:n.description,onChange:e=>c("description",e.target.value),className:"min-h-[120px] rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),d.description&&s.jsx("span",{className:"text-xs text-rose-500",children:d.description})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:"Brand *"}),s.jsxs("select",{value:n.brand_id,onChange:e=>c("brand_id",e.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[s.jsx("option",{value:"",children:"Select brand"}),Object.entries(G).map(([e,t])=>s.jsx("option",{value:e,children:t},e))]}),d.brand_id&&s.jsx("span",{className:"text-xs text-rose-500",children:d.brand_id})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:"Category *"}),s.jsxs("select",{value:n.category_id,onChange:e=>c("category_id",e.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[s.jsx("option",{value:"",children:"Select category"}),Object.entries(B).map(([e,t])=>s.jsx("option",{value:e,children:t},e))]}),d.category_id&&s.jsx("span",{className:"text-xs text-rose-500",children:d.category_id})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:"Gross weight (g)"}),s.jsx("input",{type:"number",step:"0.001",value:n.gross_weight,onChange:e=>c("gross_weight",e.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),d.gross_weight&&s.jsx("span",{className:"text-xs text-rose-500",children:d.gross_weight})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:"Net weight (g)"}),s.jsx("input",{type:"number",step:"0.001",value:n.net_weight,onChange:e=>c("net_weight",e.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),d.net_weight&&s.jsx("span",{className:"text-xs text-rose-500",children:d.net_weight})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:"Base price (₹) *"}),s.jsx("input",{type:"number",step:"0.01",value:n.base_price,onChange:e=>c("base_price",e.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),d.base_price&&s.jsx("span",{className:"text-xs text-rose-500",children:d.base_price})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:"Making charge (₹) *"}),s.jsx("input",{type:"number",step:"0.01",value:n.making_charge,onChange:e=>c("making_charge",e.target.value),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),d.making_charge&&s.jsx("span",{className:"text-xs text-rose-500",children:d.making_charge})]})]}),s.jsxs("label",{className:"inline-flex items-center gap-3 rounded-2xl border border-slate-200 px-4 py-3 text-sm text-slate-600",children:[s.jsx("input",{type:"checkbox",checked:n.is_jobwork_allowed,onChange:e=>c("is_jobwork_allowed",e.target.checked),className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),"Jobwork requests allowed for this SKU"]})]})]})]}),s.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-xl shadow-slate-900/10",children:[s.jsx("div",{className:"flex flex-col gap-4 border-b border-slate-100 pb-4 lg:flex-row lg:items-center lg:justify-between",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Product media"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Upload product images or videos for catalogue displays. You can also remove outdated media assets."})]})}),s.jsxs("div",{className:"mt-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-slate-400",children:"Current media"}),s.jsx("div",{className:"mt-3 grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:E.length>0?E.map(e=>s.jsxs("div",{className:`relative overflow-hidden rounded-3xl border border-slate-200 bg-slate-50 shadow-sm transition ${R(e.id)?"opacity-50 ring-2 ring-rose-200":""}`,children:[e.type==="video"?s.jsx("video",{src:e.url,className:"h-48 w-full rounded-t-3xl bg-black object-cover",controls:!0,children:"Your browser does not support the video tag."}):s.jsx("img",{src:e.url,alt:"Product media",className:"h-48 w-full rounded-t-3xl object-cover"}),s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 text-xs text-slate-500",children:[s.jsx("span",{className:"rounded-full bg-white/70 px-3 py-1 font-semibold text-slate-700",children:e.type.toUpperCase()}),s.jsx("button",{type:"button",onClick:()=>re(e.id),className:"text-rose-500 transition hover:text-rose-600",children:R(e.id)?"Undo removal":"Remove"})]})]},e.id)):s.jsx("p",{className:"rounded-2xl border border-dashed border-slate-200 px-4 py-6 text-sm text-slate-500",children:"No media uploaded yet."})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-slate-400",children:"Upload new files"}),s.jsxs("label",{className:"mt-3 flex cursor-pointer flex-col items-center justify-center gap-3 rounded-3xl border border-dashed border-slate-300 bg-slate-50 px-6 py-10 text-center text-slate-500 transition hover:border-slate-400 hover:bg-slate-100",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-slate-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 15a4 4 0 014-4h10a4 4 0 014 4v3a2 2 0 01-2 2H5a2 2 0 01-2-2v-3z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 10l5-5m0 0l5 5m-5-5v12"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"Click to upload"}),s.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"JPEG, PNG, WebP, MP4 up to 50MB each."})]}),s.jsx("input",{type:"file",multiple:!0,accept:"image/*,video/*",onChange:le,className:"hidden"})]}),V.length>0&&s.jsx("ul",{className:"mt-3 space-y-1",children:V.map((e,t)=>s.jsx("li",{className:"text-xs text-rose-500",children:e},`${t}-${e}`))}),(n.media_uploads??[]).length>0&&s.jsx("ul",{className:"mt-4 space-y-2",children:(n.media_uploads??[]).map((e,t)=>s.jsxs("li",{className:"flex items-center justify-between rounded-2xl border border-slate-200 px-4 py-2 text-sm text-slate-600",children:[s.jsx("span",{className:"truncate",children:e.name}),s.jsx("button",{type:"button",onClick:()=>ie(t),className:"text-rose-500 transition hover:text-rose-600",children:"Remove"})]},`${e.name}-${t}`))})]})]})]}),s.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-xl shadow-slate-900/10",children:[s.jsxs("div",{className:"flex flex-col gap-3 border-b border-slate-100 pb-4 lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Variant configuration"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Decide whether this product uses a single price or multiple combinations across metals and diamonds."})]}),s.jsxs("label",{className:"inline-flex items-center gap-3 rounded-2xl border border-slate-200 px-4 py-3 text-sm text-slate-600",children:[s.jsx("input",{type:"checkbox",checked:n.is_variant_product,onChange:e=>q(e.target.checked),className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),"Variant product (multi-option catalogue)"]})]}),n.is_variant_product?s.jsxs("div",{className:"mt-6 space-y-6",children:[s.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-200 p-4",children:[s.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-slate-500",children:"Gold purities"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Choose which gold purities can appear in your variant matrix."})]}),s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-600",children:[s.jsx("input",{type:"checkbox",checked:n.uses_gold,onChange:e=>H(e.target.checked),className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),"Use gold in variants"]})]}),n.uses_gold&&s.jsx("div",{className:"rounded-2xl bg-slate-50 p-4",children:h.length>0?s.jsx("div",{className:"flex flex-wrap gap-3",children:h.map(e=>{const t=n.gold_purity_ids.includes(e.id);return s.jsxs("label",{className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 text-xs font-semibold transition ${t?"border-sky-400 bg-white text-sky-700":"border-slate-200 bg-white text-slate-600 hover:border-slate-300"}`,children:[s.jsx("input",{type:"checkbox",checked:t,onChange:()=>Y(e.id),className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),e.name]},e.id)})}):s.jsx("p",{className:"text-xs text-slate-400",children:"No gold purities available yet."})})]}),s.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-200 p-4",children:[s.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-slate-500",children:"Silver purities"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Optional silver fineness values that can pair with your variants."})]}),s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-600",children:[s.jsx("input",{type:"checkbox",checked:n.uses_silver,onChange:e=>J(e.target.checked),className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),"Use silver in variants"]})]}),n.uses_silver&&s.jsx("div",{className:"rounded-2xl bg-slate-50 p-4",children:b.length>0?s.jsx("div",{className:"flex flex-wrap gap-3",children:b.map(e=>{const t=n.silver_purity_ids.includes(e.id);return s.jsxs("label",{className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 text-xs font-semibold transition ${t?"border-sky-400 bg-white text-sky-700":"border-slate-200 bg-white text-slate-600 hover:border-slate-300"}`,children:[s.jsx("input",{type:"checkbox",checked:t,onChange:()=>X(e.id),className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),e.name]},e.id)})}):s.jsx("p",{className:"text-xs text-slate-400",children:"No silver purities available yet."})})]}),s.jsxs("div",{className:"space-y-4 rounded-2xl border border-slate-200 p-4",children:[s.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-slate-500",children:"Diamond mixes"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Define reusable diamond combinations that variants can reference (type, shape, clarity, weight, etc.)."})]}),s.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-slate-600",children:[s.jsx("input",{type:"checkbox",checked:n.uses_diamond,onChange:e=>Q(e.target.checked),className:"h-4 w-4 rounded border-slate-300 text-sky-600 focus:ring-sky-500"}),"Use diamonds in variants"]})]}),n.uses_diamond&&s.jsxs("div",{className:"space-y-4",children:[n.diamond_options.map((e,t)=>s.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs uppercase tracking-[0.3em] text-slate-400",children:[s.jsxs("span",{children:["Configuration #",t+1]}),n.diamond_options.length>1&&s.jsx("button",{type:"button",onClick:()=>I(e.key),className:"text-rose-500 hover:text-rose-600",children:"Remove"})]}),s.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-2 xl:grid-cols-3",children:[s.jsxs("label",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.3em] text-slate-500",children:["Type",s.jsxs("select",{value:e.type_id,onChange:a=>y(e.key,"type_id",a.target.value===""?"":Number(a.target.value)),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[s.jsx("option",{value:"",children:"No type"}),p.types.map(a=>s.jsx("option",{value:a.id,children:a.name},a.id))]})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.3em] text-slate-500",children:["Shape",s.jsxs("select",{value:e.shape_id,onChange:a=>y(e.key,"shape_id",a.target.value===""?"":Number(a.target.value)),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[s.jsx("option",{value:"",children:"No shape"}),p.shapes.map(a=>s.jsx("option",{value:a.id,children:a.name},a.id))]})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.3em] text-slate-500",children:["Color",s.jsxs("select",{value:e.color_id,onChange:a=>y(e.key,"color_id",a.target.value===""?"":Number(a.target.value)),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[s.jsx("option",{value:"",children:"No color"}),p.colors.map(a=>s.jsx("option",{value:a.id,children:a.name},a.id))]})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.3em] text-slate-500",children:["Clarity",s.jsxs("select",{value:e.clarity_id,onChange:a=>y(e.key,"clarity_id",a.target.value===""?"":Number(a.target.value)),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[s.jsx("option",{value:"",children:"No clarity"}),p.clarities.map(a=>s.jsx("option",{value:a.id,children:a.name},a.id))]})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.3em] text-slate-500",children:["Cut",s.jsxs("select",{value:e.cut_id,onChange:a=>y(e.key,"cut_id",a.target.value===""?"":Number(a.target.value)),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[s.jsx("option",{value:"",children:"No cut"}),p.cuts.map(a=>s.jsx("option",{value:a.id,children:a.name},a.id))]})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.3em] text-slate-500",children:["Weight (Ct)",s.jsx("input",{type:"number",step:"0.01",value:e.weight,onChange:a=>y(e.key,"weight",a.target.value),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm text-slate-700 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"})]})]})]},e.key)),s.jsxs("button",{type:"button",onClick:Z,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 px-4 py-2 text-xs font-semibold text-slate-600 transition hover:border-slate-400 hover:text-slate-900",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 5v14M5 12h14"})}),"Add diamond option"]})]})]})]}):s.jsx("p",{className:"mt-6 rounded-2xl border border-dashed border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-600",children:"Variants are disabled. Customers will see the base price and making charge defined above."})]}),n.is_variant_product&&s.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-xl shadow-slate-900/10",children:[s.jsxs("div",{className:"flex flex-col gap-3 border-b border-slate-100 pb-4 lg:flex-row lg:items-center lg:justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Variant matrix"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Configure connected dropdowns. Default variant powers the customer catalogue card pricing."})]}),s.jsxs("button",{type:"button",onClick:te,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-600 transition hover:border-slate-400 hover:text-slate-900",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 5v14M5 12h14"})}),"Add variant"]})]}),U&&s.jsx("p",{className:"mt-4 rounded-2xl bg-rose-50 px-4 py-3 text-sm text-rose-600",children:U}),s.jsx("div",{className:"mt-6 space-y-4",children:n.variants.map((e,t)=>s.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4 shadow-sm",children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[s.jsxs("label",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.2em] text-slate-500",children:["SKU",s.jsx("input",{type:"text",value:e.sku,onChange:a=>_(t,"sku",a.target.value),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm text-slate-700 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"Optional"}),d[`variants.${t}.sku`]&&s.jsx("span",{className:"text-xs text-rose-500",children:d[`variants.${t}.sku`]})]}),n.uses_gold&&s.jsxs("label",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.2em] text-slate-500",children:["Gold purity",s.jsxs("select",{value:e.gold_purity_id===""?"":e.gold_purity_id,onChange:a=>_(t,"gold_purity_id",a.target.value===""?"":Number(a.target.value)),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[s.jsx("option",{value:"",children:"Select gold purity"}),F.map(a=>s.jsx("option",{value:a.id,children:a.name},a.id))]}),d[`variants.${t}.gold_purity_id`]&&s.jsx("span",{className:"text-xs text-rose-500",children:d[`variants.${t}.gold_purity_id`]})]}),n.uses_silver&&s.jsxs("label",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.2em] text-slate-500",children:["Silver purity",s.jsxs("select",{value:e.silver_purity_id===""?"":e.silver_purity_id,onChange:a=>_(t,"silver_purity_id",a.target.value===""?"":Number(a.target.value)),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[s.jsx("option",{value:"",children:"Select silver purity"}),T.map(a=>s.jsx("option",{value:a.id,children:a.name},a.id))]}),d[`variants.${t}.silver_purity_id`]&&s.jsx("span",{className:"text-xs text-rose-500",children:d[`variants.${t}.silver_purity_id`]})]}),n.uses_diamond&&s.jsxs("label",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.2em] text-slate-500",children:["Diamond mix",s.jsxs("select",{value:e.diamond_option_key??"",onChange:a=>_(t,"diamond_option_key",a.target.value||""),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:[s.jsx("option",{value:"",children:"Select diamond option"}),z.length===0&&s.jsx("option",{value:"",disabled:!0,children:"No options configured"}),z.map(a=>s.jsx("option",{value:a.key,children:a.label},a.key))]}),d[`variants.${t}.diamond_option_key`]&&s.jsx("span",{className:"text-xs text-rose-500",children:d[`variants.${t}.diamond_option_key`]})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.2em] text-slate-500",children:["Size (cm)",s.jsx("input",{type:"number",step:"0.01",value:e.size_cm,onChange:a=>_(t,"size_cm",a.target.value),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm text-slate-700 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),d[`variants.${t}.size_cm`]&&s.jsx("span",{className:"text-xs text-rose-500",children:d[`variants.${t}.size_cm`]})]})]}),s.jsxs("div",{className:"mt-4 grid gap-4 md:grid-cols-3",children:[s.jsxs("label",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.2em] text-slate-500",children:["Price adjustment (₹)",s.jsx("input",{type:"number",step:"0.01",value:e.price_adjustment,onChange:a=>_(t,"price_adjustment",a.target.value),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm text-slate-700 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),d[`variants.${t}.price_adjustment`]&&s.jsx("span",{className:"text-xs text-rose-500",children:d[`variants.${t}.price_adjustment`]})]}),s.jsxs("label",{className:"flex flex-col gap-2 text-xs font-medium uppercase tracking-[0.2em] text-slate-500",children:["Variant label",s.jsx("input",{type:"text",value:e.label,onChange:a=>_(t,"label",a.target.value),className:"rounded-2xl border border-slate-200 px-3 py-2 text-sm text-slate-700 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),d[`variants.${t}.label`]&&s.jsx("span",{className:"text-xs text-rose-500",children:d[`variants.${t}.label`]}),s.jsxs("span",{className:"text-[10px] uppercase tracking-[0.3em] text-slate-400",children:["Suggested: ",N(e,n).autoLabel]})]}),s.jsxs("div",{className:"flex items-center gap-3 rounded-2xl border border-slate-200 px-4 py-3",children:[s.jsx("input",{type:"radio",checked:e.is_default,onChange:()=>se(t),className:"h-4 w-4 text-slate-900 focus:ring-slate-900",name:"default-variant"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Default display variant"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Used for price cards & listing highlights."})]})]})]}),s.jsxs("div",{className:"mt-4 flex items-center justify-between text-xs text-slate-400",children:[s.jsxs("span",{children:["Row #",t+1]}),s.jsx("button",{type:"button",onClick:()=>ee(t),className:"text-rose-500 hover:text-rose-600",children:"Remove variant"})]})]},e.id??`row-${t}`))})]}),s.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-xl shadow-slate-900/10",children:[s.jsx("div",{className:"flex items-center justify-between border-b border-slate-100 pb-4",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Pricing references"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Keep your atelier and rate cards handy for quick quoting."})]})}),s.jsx("div",{className:"mt-6 grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:ne.map(e=>s.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:e.label}),s.jsx("input",{type:e.type,value:n.standard_pricing[e.key],onChange:t=>c("standard_pricing",{...n.standard_pricing,[e.key]:t.target.value}),className:"rounded-2xl border border-slate-200 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200"}),d[`standard_pricing.${e.key}`]&&s.jsx("span",{className:"text-xs text-rose-500",children:d[`standard_pricing.${e.key}`]})]},e.key))})]})]})]})}export{fe as default};
