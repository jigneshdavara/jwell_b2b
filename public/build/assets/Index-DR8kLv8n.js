import{u as S,r as i,a as C,j as e,H as k}from"./app-xiOEIreu.js";import{A as E}from"./AdminLayout-XCW1ytWV.js";const A=["Asia/Kolkata","Asia/Dubai","Asia/Singapore","America/New_York","America/Los_Angeles","Europe/London","Europe/Paris"],F=["INR","USD","EUR","GBP","AED","SGD"];function R(){const{settings:t}=S().props,[u,m]=i.useState(t.logo_url??null),[x,p]=i.useState(t.favicon_url??null),[q,c]=i.useState(!1),[b,y]=i.useState(0),[_,v]=i.useState(0),s=C({admin_email:t.admin_email||"",company_name:t.company_name||"",company_address:t.company_address||"",company_city:t.company_city||"",company_state:t.company_state||"",company_pincode:t.company_pincode||"",company_phone:t.company_phone||"",company_email:t.company_email||"",company_gstin:t.company_gstin||"",logo:null,favicon:null,remove_logo:!1,remove_favicon:!1,app_name:t.app_name||"",app_timezone:t.app_timezone||"",app_currency:t.app_currency||""});i.useEffect(()=>{s.clearErrors()},[]),i.useEffect(()=>{!s.data.logo&&!s.data.remove_logo&&m(t.logo_url??null),!s.data.favicon&&!s.data.remove_favicon&&p(t.favicon_url??null)},[t.logo_url,t.favicon_url,s.data.logo,s.data.favicon,s.data.remove_logo,s.data.remove_favicon]),i.useEffect(()=>{t.logo_url&&!u&&!s.data.logo&&m(t.logo_url),t.favicon_url&&!x&&!s.data.favicon&&p(t.favicon_url)},[]);const j=a=>{const r=a.target.files?.[0]??null;if(s.setData("logo",r),r){const l=new FileReader;l.onload=d=>{m(d.target?.result)},l.readAsDataURL(r)}else m(t.logo_url??null)},N=a=>{const r=a.target.files?.[0]??null;if(s.setData("favicon",r),r){const l=new FileReader;l.onload=d=>{p(d.target?.result)},l.readAsDataURL(r)}else p(t.favicon_url??null)},w=a=>{a.preventDefault(),c(!0);const r=s.data.admin_email?.trim()||"",l=s.data.company_name?.trim()||"",d=s.data.app_name?.trim()||"",f=s.data.logo,g=s.data.favicon,D=f instanceof File||g instanceof File;if(!r){s.setError("admin_email","The admin email field is required."),c(!1);return}if(!l){s.setError("company_name","The company name field is required."),c(!1);return}if(!d){s.setError("app_name","The app name field is required."),c(!1);return}s.transform(o=>{const n={admin_email:r,company_name:l,company_address:o.company_address?.trim()||null,company_city:o.company_city?.trim()||null,company_state:o.company_state?.trim()||null,company_pincode:o.company_pincode?.trim()||null,company_phone:o.company_phone?.trim()||null,company_email:o.company_email?.trim()||null,company_gstin:o.company_gstin?.trim()||null,app_name:d,app_timezone:o.app_timezone,app_currency:o.app_currency,_method:"PUT"};return o.remove_logo&&(n.remove_logo=!0),o.remove_favicon&&(n.remove_favicon=!0),f instanceof File&&(n.logo=f),g instanceof File&&(n.favicon=g),n}),s.post(route("admin.settings.general.update"),{preserveScroll:!0,forceFormData:D,onSuccess:()=>{s.clearErrors(),c(!1),s.setData("logo",null),s.setData("favicon",null),s.setData("remove_logo",!1),s.setData("remove_favicon",!1),y(o=>o+1),v(o=>o+1)},onError:o=>{if(c(!1),o&&Object.keys(o).length>0){const n=Object.keys(o)[0],h=document.querySelector(`[name="${n}"]`)||document.querySelector(`input[id*="${n}"]`);h&&h.scrollIntoView({behavior:"smooth",block:"center"})}},onFinish:()=>{s.transform(o=>o)}})};return e.jsxs(E,{children:[e.jsx(k,{title:"General Settings"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-xl shadow-slate-900/10 ring-1 ring-slate-200/80",children:[e.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"General Settings"}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Manage basic application settings, company details, and branding."})]}),e.jsxs("form",{onSubmit:w,className:"space-y-8",children:[e.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-xl shadow-slate-900/10 ring-1 ring-slate-200/80",children:[e.jsx("h2",{className:"mb-6 text-lg font-semibold text-slate-900",children:"Email Settings"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-semibold text-slate-700",children:["Admin Email ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("input",{type:"email",value:s.data.admin_email,onChange:a=>s.setData("admin_email",a.target.value),className:"w-full rounded-2xl border border-slate-300 px-4 py-2.5 text-sm focus:border-feather-gold focus:outline-none focus:ring-2 focus:ring-feather-gold/20",required:!0}),s.errors.admin_email&&e.jsx("p",{className:"mt-1 text-xs text-rose-500",children:s.errors.admin_email})]})})]}),e.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-xl shadow-slate-900/10 ring-1 ring-slate-200/80",children:[e.jsx("h2",{className:"mb-6 text-lg font-semibold text-slate-900",children:"Company Details"}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-semibold text-slate-700",children:["Company Name ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.data.company_name,onChange:a=>s.setData("company_name",a.target.value),className:"w-full rounded-2xl border border-slate-300 px-4 py-2.5 text-sm focus:border-feather-gold focus:outline-none focus:ring-2 focus:ring-feather-gold/20",required:!0}),s.errors.company_name&&e.jsx("p",{className:"mt-1 text-xs text-rose-500",children:s.errors.company_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-semibold text-slate-700",children:"GSTIN"}),e.jsx("input",{type:"text",value:s.data.company_gstin,onChange:a=>s.setData("company_gstin",a.target.value),className:"w-full rounded-2xl border border-slate-300 px-4 py-2.5 text-sm focus:border-feather-gold focus:outline-none focus:ring-2 focus:ring-feather-gold/20"}),s.errors.company_gstin&&e.jsx("p",{className:"mt-1 text-xs text-rose-500",children:s.errors.company_gstin})]}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("label",{className:"mb-2 block text-sm font-semibold text-slate-700",children:"Address"}),e.jsx("textarea",{value:s.data.company_address,onChange:a=>s.setData("company_address",a.target.value),rows:2,className:"w-full rounded-2xl border border-slate-300 px-4 py-2.5 text-sm focus:border-feather-gold focus:outline-none focus:ring-2 focus:ring-feather-gold/20"}),s.errors.company_address&&e.jsx("p",{className:"mt-1 text-xs text-rose-500",children:s.errors.company_address})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-semibold text-slate-700",children:"City"}),e.jsx("input",{type:"text",value:s.data.company_city,onChange:a=>s.setData("company_city",a.target.value),className:"w-full rounded-2xl border border-slate-300 px-4 py-2.5 text-sm focus:border-feather-gold focus:outline-none focus:ring-2 focus:ring-feather-gold/20"}),s.errors.company_city&&e.jsx("p",{className:"mt-1 text-xs text-rose-500",children:s.errors.company_city})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-semibold text-slate-700",children:"State"}),e.jsx("input",{type:"text",value:s.data.company_state,onChange:a=>s.setData("company_state",a.target.value),className:"w-full rounded-2xl border border-slate-300 px-4 py-2.5 text-sm focus:border-feather-gold focus:outline-none focus:ring-2 focus:ring-feather-gold/20"}),s.errors.company_state&&e.jsx("p",{className:"mt-1 text-xs text-rose-500",children:s.errors.company_state})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-semibold text-slate-700",children:"Pincode"}),e.jsx("input",{type:"text",value:s.data.company_pincode,onChange:a=>s.setData("company_pincode",a.target.value),className:"w-full rounded-2xl border border-slate-300 px-4 py-2.5 text-sm focus:border-feather-gold focus:outline-none focus:ring-2 focus:ring-feather-gold/20"}),s.errors.company_pincode&&e.jsx("p",{className:"mt-1 text-xs text-rose-500",children:s.errors.company_pincode})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-semibold text-slate-700",children:"Phone"}),e.jsx("input",{type:"text",value:s.data.company_phone,onChange:a=>s.setData("company_phone",a.target.value),className:"w-full rounded-2xl border border-slate-300 px-4 py-2.5 text-sm focus:border-feather-gold focus:outline-none focus:ring-2 focus:ring-feather-gold/20"}),s.errors.company_phone&&e.jsx("p",{className:"mt-1 text-xs text-rose-500",children:s.errors.company_phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-semibold text-slate-700",children:"Email"}),e.jsx("input",{type:"email",value:s.data.company_email,onChange:a=>s.setData("company_email",a.target.value),className:"w-full rounded-2xl border border-slate-300 px-4 py-2.5 text-sm focus:border-feather-gold focus:outline-none focus:ring-2 focus:ring-feather-gold/20"}),s.errors.company_email&&e.jsx("p",{className:"mt-1 text-xs text-rose-500",children:s.errors.company_email})]})]})]}),e.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-xl shadow-slate-900/10 ring-1 ring-slate-200/80",children:[e.jsx("h2",{className:"mb-6 text-lg font-semibold text-slate-900",children:"Branding"}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-semibold text-slate-700",children:"Logo"}),e.jsxs("div",{className:"space-y-3",children:[u&&e.jsxs("div",{className:"flex items-center gap-4 rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[e.jsx("img",{src:u,alt:"Logo preview",className:"h-16 w-auto object-contain"}),e.jsx("button",{type:"button",onClick:()=>{s.setData("logo",null),s.setData("remove_logo",!0),m(null)},className:"rounded-full border border-rose-200 px-3 py-1 text-xs font-semibold text-rose-600 transition hover:border-rose-300 hover:bg-rose-50",children:"Remove"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:j,className:"w-full rounded-2xl border border-slate-300 px-4 py-2.5 text-sm focus:border-feather-gold focus:outline-none focus:ring-2 focus:ring-feather-gold/20"},b),s.errors.logo&&e.jsx("p",{className:"mt-1 text-xs text-rose-500",children:s.errors.logo})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-semibold text-slate-700",children:"Favicon"}),e.jsxs("div",{className:"space-y-3",children:[x&&e.jsxs("div",{className:"flex items-center gap-4 rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[e.jsx("img",{src:x,alt:"Favicon preview",className:"h-8 w-8 object-contain"}),e.jsx("button",{type:"button",onClick:()=>{s.setData("favicon",null),s.setData("remove_favicon",!0),p(null)},className:"rounded-full border border-rose-200 px-3 py-1 text-xs font-semibold text-rose-600 transition hover:border-rose-300 hover:bg-rose-50",children:"Remove"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:N,className:"w-full rounded-2xl border border-slate-300 px-4 py-2.5 text-sm focus:border-feather-gold focus:outline-none focus:ring-2 focus:ring-feather-gold/20"},_),s.errors.favicon&&e.jsx("p",{className:"mt-1 text-xs text-rose-500",children:s.errors.favicon})]})]})]})]}),e.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-xl shadow-slate-900/10 ring-1 ring-slate-200/80",children:[e.jsx("h2",{className:"mb-6 text-lg font-semibold text-slate-900",children:"Application Settings"}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-semibold text-slate-700",children:["App Name ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.data.app_name,onChange:a=>s.setData("app_name",a.target.value),className:"w-full rounded-2xl border border-slate-300 px-4 py-2.5 text-sm focus:border-feather-gold focus:outline-none focus:ring-2 focus:ring-feather-gold/20",required:!0}),s.errors.app_name&&e.jsx("p",{className:"mt-1 text-xs text-rose-500",children:s.errors.app_name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-semibold text-slate-700",children:["Timezone ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("select",{value:s.data.app_timezone,onChange:a=>s.setData("app_timezone",a.target.value),className:"w-full rounded-2xl border border-slate-300 px-4 py-2.5 text-sm focus:border-feather-gold focus:outline-none focus:ring-2 focus:ring-feather-gold/20",required:!0,children:A.map(a=>e.jsx("option",{value:a,children:a},a))}),s.errors.app_timezone&&e.jsx("p",{className:"mt-1 text-xs text-rose-500",children:s.errors.app_timezone})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-2 block text-sm font-semibold text-slate-700",children:["Currency ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("select",{value:s.data.app_currency,onChange:a=>s.setData("app_currency",a.target.value),className:"w-full rounded-2xl border border-slate-300 px-4 py-2.5 text-sm focus:border-feather-gold focus:outline-none focus:ring-2 focus:ring-feather-gold/20",required:!0,children:F.map(a=>e.jsx("option",{value:a,children:a},a))}),s.errors.app_currency&&e.jsx("p",{className:"mt-1 text-xs text-rose-500",children:s.errors.app_currency})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:s.processing,className:"rounded-full bg-elvee-blue px-6 py-3 text-sm font-semibold text-white shadow-lg shadow-elvee-blue/20 transition hover:bg-navy disabled:cursor-not-allowed disabled:opacity-70",children:s.processing?"Saving...":"Save Settings"})})]})]})]})}export{R as default};
