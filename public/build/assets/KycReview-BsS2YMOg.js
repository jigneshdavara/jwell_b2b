import{u,a as m,j as e,H as p,r as h}from"./app-CPxam-6j.js";import{A as f}from"./AdminLayout-CgpCltH7.js";import{I as x}from"./InputError-DjGag3ML.js";function N(){const{user:s,statuses:o,documentStatuses:i}=u().props,{data:l,setData:n,post:d,processing:c,errors:r}=m({status:s.kyc_status,remarks:s.kyc_notes??""}),t=a=>{a.preventDefault(),d(route("admin.customers.update-kyc",s.id),{preserveScroll:!0})};return e.jsxs(f,{children:[e.jsx(p,{title:`KYC Review - ${s.name}`}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-xl shadow-slate-900/10 ring-1 ring-slate-200/80",children:[e.jsx("h1",{className:"text-2xl font-semibold text-slate-900",children:"KYC Review"}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Review submitted documents and update status."})]}),e.jsxs("form",{onSubmit:t,className:"space-y-6 rounded-3xl bg-white p-6 shadow-xl shadow-slate-900/10 ring-1 ring-slate-200/80",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:s.name}),e.jsx("p",{className:"text-sm text-slate-500",children:s.email})]}),e.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-900 px-3 py-1 text-xs font-semibold text-white",children:s.kyc_status_label})]}),s.kyc_notes&&e.jsxs("div",{className:"rounded-2xl bg-amber-50 p-4 text-sm text-amber-700",children:[e.jsx("p",{className:"font-semibold uppercase tracking-[0.3em] text-amber-600",children:"Partner notes"}),e.jsx("p",{className:"mt-2 whitespace-pre-line",children:s.kyc_notes})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[e.jsx("span",{className:"font-semibold text-slate-800",children:"Update status"}),e.jsx("select",{className:"rounded-2xl border border-slate-300 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",value:l.status,onChange:a=>n("status",a.target.value),children:o.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))}),r.status&&e.jsx("span",{className:"text-xs text-rose-500",children:r.status})]}),e.jsxs("label",{className:"flex flex-col gap-2 text-sm text-slate-600",children:[e.jsx("span",{className:"font-semibold text-slate-800",children:"Internal remarks"}),e.jsx("textarea",{className:"min-h-[120px] rounded-2xl border border-slate-300 px-4 py-2 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",value:l.remarks,onChange:a=>n("remarks",a.target.value),placeholder:"Add context for the customer success team (optional)"}),r.remarks&&e.jsx("span",{className:"text-xs text-rose-500",children:r.remarks})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:c,className:"rounded-full bg-slate-900 px-5 py-2 text-sm font-semibold text-white shadow shadow-slate-900/20 transition hover:bg-slate-700 disabled:cursor-not-allowed disabled:opacity-60",children:"Save decision"})})]}),e.jsxs("div",{className:"space-y-4",children:[s.kyc_profile&&e.jsxs("div",{className:"rounded-3xl bg-white p-5 shadow-xl shadow-slate-900/10 ring-1 ring-slate-200/80",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-slate-500",children:"Business information"}),e.jsxs("dl",{className:"mt-4 grid gap-4 text-sm text-slate-700 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"font-medium text-slate-500",children:"Store name"}),e.jsx("dd",{className:"mt-1 text-slate-900",children:s.kyc_profile.business_name??"—"})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"font-medium text-slate-500",children:"Website"}),e.jsx("dd",{className:"mt-1 text-slate-900",children:s.kyc_profile.business_website??"—"})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"font-medium text-slate-500",children:"GST"}),e.jsx("dd",{className:"mt-1 text-slate-900",children:s.kyc_profile.gst_number??"—"})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"font-medium text-slate-500",children:"PAN"}),e.jsx("dd",{className:"mt-1 text-slate-900",children:s.kyc_profile.pan_number??"—"})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"font-medium text-slate-500",children:"Registration no."}),e.jsx("dd",{className:"mt-1 text-slate-900",children:s.kyc_profile.registration_number??"—"})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"font-medium text-slate-500",children:"Contact"}),e.jsxs("dd",{className:"mt-1 text-slate-900",children:[s.kyc_profile.contact_name??"—",s.kyc_profile.contact_phone?` · ${s.kyc_profile.contact_phone}`:""]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("dt",{className:"font-medium text-slate-500",children:"Address"}),e.jsxs("dd",{className:"mt-1 text-slate-900",children:[[s.kyc_profile.address_line1,s.kyc_profile.address_line2].filter(Boolean).join(", ")||"—",e.jsx("br",{}),[s.kyc_profile.city,s.kyc_profile.state,s.kyc_profile.postal_code].filter(Boolean).join(", ")||"",s.kyc_profile.country?`, ${s.kyc_profile.country}`:""]})]})]})]}),s.kyc_documents.length===0?e.jsx("div",{className:"rounded-3xl border border-dashed border-slate-300 p-12 text-center text-slate-500",children:"No documents uploaded yet."}):s.kyc_documents.map(a=>e.jsx(j,{document:a,statuses:i},a.id))]})]})]})}function j({document:s,statuses:o}){const{data:i,setData:l,put:n,processing:d,errors:c}=m({status:s.status,remarks:s.remarks??""});h.useEffect(()=>{l(t=>({...t,status:s.status,remarks:s.remarks??""}))},[s.id,s.status,s.remarks,l]);const r=t=>{t.preventDefault(),n(route("admin.customers.kyc.documents.update",s.id),{preserveScroll:!0})};return e.jsxs("form",{onSubmit:r,className:"space-y-4 rounded-3xl bg-white p-5 shadow-xl shadow-slate-900/10 ring-1 ring-slate-200/80",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900",children:s.type}),e.jsx("p",{className:"text-xs text-slate-500 break-all",children:s.file_path})]}),e.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-700",children:s.status})]}),s.file_url&&e.jsx("a",{href:s.file_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-xs font-semibold text-sky-600 hover:text-sky-500",children:"View document"}),e.jsxs("label",{className:"flex flex-col gap-2 text-xs text-slate-600",children:[e.jsx("span",{className:"font-semibold uppercase tracking-[0.2em] text-slate-500",children:"Status"}),e.jsx("select",{value:i.status,onChange:t=>l("status",t.target.value),className:"rounded-2xl border border-slate-300 px-4 py-2 text-sm capitalize focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",children:o.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))}),e.jsx(x,{message:c.status})]}),e.jsxs("label",{className:"flex flex-col gap-2 text-xs text-slate-600",children:[e.jsx("span",{className:"font-semibold uppercase tracking-[0.2em] text-slate-500",children:"Comment for partner"}),e.jsx("textarea",{value:i.remarks??"",onChange:t=>l("remarks",t.target.value),className:"min-h-[100px] rounded-2xl border border-slate-300 px-4 py-2 text-sm focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-200",placeholder:"Explain missing pages, clarity issues, or alternate docs required"}),e.jsx(x,{message:c.remarks})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:d,className:"rounded-full bg-slate-900 px-4 py-2 text-xs font-semibold text-white shadow shadow-slate-900/20 transition hover:bg-slate-700 disabled:cursor-not-allowed disabled:opacity-60",children:d?"Saving…":"Save feedback"})})]})}export{N as default};
