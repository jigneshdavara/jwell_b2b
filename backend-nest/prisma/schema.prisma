generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model Admin {
  id                BigInt              @id @default(autoincrement())
  name              String              @db.VarChar(191)
  email             String              @unique(map: "admins_email_unique") @db.VarChar(191)
  email_verified_at DateTime?           @db.Timestamptz(0)
  password          String              @db.VarChar(191)
  type              String              @default("admin") @db.VarChar(191)
  admin_group_id    BigInt?
  remember_token    String?             @db.VarChar(100)
  created_at        DateTime?           @default(now()) @db.Timestamptz(0)
  updated_at        DateTime?           @updatedAt @db.Timestamptz(0)
  user_kyc_messages user_kyc_messages[]
  admin_groups      admin_groups?        @relation(fields: [admin_group_id], references: [id], onUpdate: NoAction, map: "admins_admin_group_id_foreign")

  @@map("admins")
}

model User {
  id                     BigInt                   @id @default(autoincrement())
  name                   String                   @db.VarChar(191)
  email                  String                   @unique(map: "users_email_unique") @db.VarChar(191)
  email_verified_at      DateTime?                @db.Timestamptz(0)
  password               String                   @db.VarChar(191)
  phone                  String?                  @db.VarChar(191)
  type                   String                   @default("retailer") @db.VarChar(191)
  user_group_id          BigInt?
  user_groups            user_groups?             @relation(fields: [user_group_id], references: [id], onUpdate: NoAction, map: "users_user_group_id_foreign")
  kyc_status             String                   @default("pending") @db.VarChar(191)
  kyc_notes              String?
  preferred_language     String?                  @db.VarChar(191)
  credit_limit           Decimal?                 @default(0) @db.Decimal(12, 2)
  is_active              Boolean                  @default(true)
  remember_token         String?                  @db.VarChar(100)
  created_at             DateTime?                @default(now()) @db.Timestamptz(0)
  updated_at             DateTime?                @updatedAt @db.Timestamptz(0)
  kyc_comments_enabled   Boolean                  @default(true)
  business_name          String                   @db.VarChar(191)
  business_website       String?                  @db.VarChar(191)
  gst_number             String?                  @db.VarChar(191)
  pan_number             String?                  @db.VarChar(191)
  registration_number    String?                  @db.VarChar(191)
  address_line1          String?                  @db.VarChar(191)
  address_line2          String?                  @db.VarChar(191)
  city                   String?                  @db.VarChar(191)
  state                  String?                  @db.VarChar(191)
  postal_code            String?                  @db.VarChar(191)
  country                String                   @default("India") @db.VarChar(191)
  contact_name           String?                  @db.VarChar(191)
  contact_phone          String?                  @db.VarChar(191)
  kyc_metadata           Json?
  carts                  carts[]
  notification_logs      notification_logs[]
  order_status_histories order_status_histories[]
  orders                 orders[]
  quotation_messages     quotation_messages[]
  quotations             quotations[]
  user_kyc_documents     user_kyc_documents[]
  user_kyc_messages      user_kyc_messages[]
  loginOtps              UserLoginOtp[]
  wishlists              wishlists?

  @@map("users")
}

model UserLoginOtp {
  id          BigInt    @id @default(autoincrement())
  user_id     BigInt
  code        String    @db.VarChar(191)
  expires_at  DateTime  @db.Timestamptz(0)
  consumed_at DateTime? @db.Timestamptz(0)
  created_at  DateTime? @default(now()) @db.Timestamptz(0)
  updated_at  DateTime? @updatedAt @db.Timestamptz(0)
  user        User      @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "user_login_otps_user_id_foreign")

  @@map("user_login_otps")
}

model brands {
  id                      BigInt                    @id @default(autoincrement())
  code                    String                    @unique(map: "brands_code_unique") @db.VarChar(191)
  name                    String                    @unique(map: "brands_name_unique") @db.VarChar(191)
  description             String?
  display_order           Int                       @default(0)
  is_active               Boolean                   @default(true)
  cover_image             String?                   @db.VarChar(191)
  created_at              DateTime?                 @default(now()) @db.Timestamptz(0)
  updated_at              DateTime?                 @updatedAt @db.Timestamptz(0)
  making_charge_discounts making_charge_discounts[]
  products                products[]

  @@index([display_order], map: "brands_display_order_index")
}

model cart_items {
  id                 BigInt            @id @default(autoincrement())
  cart_id            BigInt
  product_id         BigInt
  quantity           Int               @default(1)
  configuration      Json?
  price_breakdown    Json?
  created_at         DateTime?         @default(now()) @db.Timestamptz(0)
  updated_at         DateTime?         @updatedAt @db.Timestamptz(0)
  product_variant_id BigInt?
  carts              carts             @relation(fields: [cart_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "cart_items_cart_id_foreign")
  products           products          @relation(fields: [product_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "cart_items_product_id_foreign")
  product_variants   product_variants? @relation(fields: [product_variant_id], references: [id], onUpdate: NoAction, map: "cart_items_product_variant_id_foreign")
}

model carts {
  id         BigInt       @id @default(autoincrement())
  user_id    BigInt
  status     String       @default("active") @db.VarChar(191)
  currency   String       @default("INR") @db.VarChar(191)
  metadata   Json?
  created_at DateTime?    @default(now()) @db.Timestamptz(0)
  updated_at DateTime?    @updatedAt @db.Timestamptz(0)
  cart_items cart_items[]
  users      User         @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "carts_user_id_foreign")
}

model catalog_products {
  id         BigInt    @id @default(autoincrement())
  catalog_id BigInt
  product_id BigInt
  created_at DateTime? @default(now()) @db.Timestamptz(0)
  updated_at DateTime? @updatedAt @db.Timestamptz(0)
  catalogs   catalogs  @relation(fields: [catalog_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "catalog_products_catalog_id_foreign")
  products   products  @relation(fields: [product_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "catalog_products_product_id_foreign")

  @@unique([catalog_id, product_id], map: "catalog_product_unique")
}

model catalogs {
  id               BigInt             @id @default(autoincrement())
  code             String             @unique(map: "catalogs_code_unique") @db.VarChar(191)
  name             String             @unique(map: "catalogs_name_unique") @db.VarChar(191)
  description      String?
  display_order    Int                @default(0)
  is_active        Boolean            @default(true)
  created_at       DateTime?          @default(now()) @db.Timestamptz(0)
  updated_at       DateTime?          @updatedAt @db.Timestamptz(0)
  catalog_products catalog_products[]

  @@index([display_order], map: "catalogs_display_order_index")
}

model categories {
  id                      BigInt                    @id @default(autoincrement())
  parent_id               BigInt?
  code                    String?                   @db.VarChar(191)
  name                    String                    @db.VarChar(191)
  description             String?
  display_order           Int                       @default(0)
  is_active               Boolean                   @default(true)
  cover_image             String?                   @db.VarChar(191)
  created_at              DateTime?                 @default(now()) @db.Timestamptz(0)
  updated_at              DateTime?                 @updatedAt @db.Timestamptz(0)
  categories              categories?               @relation("categoriesTocategories", fields: [parent_id], references: [id], onUpdate: NoAction, map: "categories_parent_id_foreign")
  other_categories        categories[]              @relation("categoriesTocategories")
  category_sizes          category_sizes[]
  category_styles         category_styles[]
  making_charge_discounts making_charge_discounts[]
  products                products[]

  @@index([code], map: "categories_code_index")
  @@index([display_order], map: "categories_display_order_index")
  @@index([parent_id], map: "categories_parent_id_index")
}

model category_sizes {
  id          BigInt     @id @default(autoincrement())
  category_id BigInt
  size_id     BigInt
  created_at  DateTime?  @default(now()) @db.Timestamp(0)
  updated_at  DateTime?  @updatedAt @db.Timestamp(0)
  categories  categories @relation(fields: [category_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "category_sizes_category_id_foreign")
  sizes       sizes      @relation(fields: [size_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "category_sizes_size_id_foreign")

  @@unique([category_id, size_id], map: "category_sizes_category_id_size_id_unique")
  @@index([category_id], map: "category_sizes_category_id_index")
  @@index([size_id], map: "category_sizes_size_id_index")
}

model category_styles {
  id          BigInt     @id @default(autoincrement())
  category_id BigInt
  style_id    BigInt
  created_at  DateTime?  @default(now()) @db.Timestamp(0)
  updated_at  DateTime?  @updatedAt @db.Timestamp(0)
  categories  categories @relation(fields: [category_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "category_styles_category_id_foreign")
  styles      styles     @relation(fields: [style_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "category_styles_style_id_foreign")

  @@unique([category_id, style_id], map: "category_styles_category_id_style_id_unique")
  @@index([category_id], map: "category_styles_category_id_index")
  @@index([style_id], map: "category_styles_style_id_index")
}

model user_groups {
  id                      BigInt                    @id @default(autoincrement())
  name                    String                    @unique(map: "user_groups_name_unique") @db.VarChar(191)
  code                    String                    @unique @db.VarChar(191)
  description             String?
  is_active               Boolean                   @default(true)
  display_order           Int                       @default(0)
  created_at              DateTime?                 @default(now()) @db.Timestamptz(0)
  updated_at              DateTime?                 @updatedAt @db.Timestamptz(0)
  making_charge_discounts making_charge_discounts[]
  users                   User[]

  @@map("user_groups")
}

model user_types {
  id            BigInt    @id @default(autoincrement())
  name          String    @unique(map: "user_types_name_unique") @db.VarChar(191)
  code          String    @unique(map: "user_types_code_unique") @db.VarChar(191)
  description   String?
  is_active     Boolean   @default(true)
  display_order Int       @default(0)
  created_at    DateTime? @default(now()) @db.Timestamptz(0)
  updated_at    DateTime? @updatedAt @db.Timestamptz(0)

  @@index([is_active, display_order], map: "user_types_is_active_display_order_index")
  @@map("user_types")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model diamond_clarities {
  id              BigInt        @id @default(autoincrement())
  diamond_type_id BigInt
  code            String?       @db.VarChar(191)
  name            String        @db.VarChar(191)
  description     String?
  display_order   Int           @default(0)
  is_active       Boolean       @default(true)
  created_at      DateTime?     @default(now()) @db.Timestamptz(0)
  updated_at      DateTime?     @updatedAt @db.Timestamptz(0)
  diamond_types   diamond_types @relation(fields: [diamond_type_id], references: [id], onUpdate: NoAction, map: "diamond_clarities_diamond_type_id_foreign")
  diamonds        diamonds[]

  @@index([code], map: "diamond_clarities_code_index")
  @@index([display_order], map: "diamond_clarities_display_order_index")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model diamond_colors {
  id              BigInt        @id @default(autoincrement())
  diamond_type_id BigInt
  code            String        @db.VarChar(191)
  name            String        @db.VarChar(191)
  description     String?
  display_order   Int           @default(0)
  is_active       Boolean       @default(true)
  created_at      DateTime?     @default(now()) @db.Timestamptz(0)
  updated_at      DateTime?     @updatedAt @db.Timestamptz(0)
  diamond_types   diamond_types @relation(fields: [diamond_type_id], references: [id], onUpdate: NoAction, map: "diamond_colors_diamond_type_id_foreign")
  diamonds        diamonds[]

  @@index([code], map: "diamond_colors_code_index")
  @@index([display_order], map: "diamond_colors_display_order_index")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model diamond_shape_sizes {
  id               BigInt         @id @default(autoincrement())
  diamond_type_id  BigInt
  diamond_shape_id BigInt
  size             String         @db.VarChar(191)
  secondary_size   String?        @db.VarChar(191)
  description      String?
  display_order    Int            @default(0)
  ctw              Decimal        @default(0) @db.Decimal(10, 3)
  created_at       DateTime?      @default(now()) @db.Timestamptz(0)
  updated_at       DateTime?      @updatedAt @db.Timestamptz(0)
  diamond_shapes   diamond_shapes @relation(fields: [diamond_shape_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "diamond_shape_sizes_diamond_shape_id_foreign")
  diamond_types    diamond_types  @relation(fields: [diamond_type_id], references: [id], onUpdate: NoAction, map: "diamond_shape_sizes_diamond_type_id_foreign")
  diamonds         diamonds[]

  @@index([diamond_shape_id, display_order], map: "diamond_shape_sizes_diamond_shape_id_display_order_index")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model diamond_shapes {
  id                  BigInt                @id @default(autoincrement())
  diamond_type_id     BigInt
  code                String                @db.VarChar(191)
  name                String                @db.VarChar(191)
  description         String?
  is_active           Boolean               @default(true)
  display_order       Int                   @default(0)
  created_at          DateTime?             @default(now()) @db.Timestamptz(0)
  updated_at          DateTime?             @updatedAt @db.Timestamptz(0)
  diamond_shape_sizes diamond_shape_sizes[]
  diamond_types       diamond_types         @relation(fields: [diamond_type_id], references: [id], onUpdate: NoAction, map: "diamond_shapes_diamond_type_id_foreign")
  diamonds            diamonds[]

  @@index([code], map: "diamond_shapes_code_index")
  @@index([display_order], map: "diamond_shapes_display_order_index")
}

model diamond_types {
  id                  BigInt                @id @default(autoincrement())
  code                String                @unique(map: "diamond_types_code_unique") @db.VarChar(191)
  name                String                @unique(map: "diamond_types_name_unique") @db.VarChar(191)
  description         String?
  display_order       Int                   @default(0)
  is_active           Boolean               @default(true)
  created_at          DateTime?             @default(now()) @db.Timestamp(0)
  updated_at          DateTime?             @updatedAt @db.Timestamp(0)
  diamond_clarities   diamond_clarities[]
  diamond_colors      diamond_colors[]
  diamond_shape_sizes diamond_shape_sizes[]
  diamond_shapes      diamond_shapes[]
  diamonds            diamonds[]

  @@index([display_order], map: "diamond_types_display_order_index")
}

model diamonds {
  id                       BigInt                     @id @default(autoincrement())
  name                     String                     @db.VarChar(191)
  diamond_type_id          BigInt
  diamond_clarity_id       BigInt
  diamond_color_id         BigInt
  diamond_shape_id         BigInt
  diamond_shape_size_id    BigInt
  weight                   Decimal                    @default(0) @db.Decimal(10, 3)
  price                    Decimal                    @default(0) @db.Decimal(12, 2)
  description              String?
  is_active                Boolean                    @default(true)
  created_at               DateTime?                  @default(now()) @db.Timestamptz(0)
  updated_at               DateTime?                  @updatedAt @db.Timestamptz(0)
  diamond_clarities        diamond_clarities          @relation(fields: [diamond_clarity_id], references: [id], onUpdate: NoAction, map: "diamonds_diamond_clarity_id_foreign")
  diamond_colors           diamond_colors             @relation(fields: [diamond_color_id], references: [id], onUpdate: NoAction, map: "diamonds_diamond_color_id_foreign")
  diamond_shapes           diamond_shapes             @relation(fields: [diamond_shape_id], references: [id], onUpdate: NoAction, map: "diamonds_diamond_shape_id_foreign")
  diamond_shape_sizes      diamond_shape_sizes        @relation(fields: [diamond_shape_size_id], references: [id], onUpdate: NoAction, map: "diamonds_diamond_shape_size_id_foreign")
  diamond_types            diamond_types              @relation(fields: [diamond_type_id], references: [id], onUpdate: NoAction, map: "diamonds_diamond_type_id_foreign")
  product_variant_diamonds product_variant_diamonds[]

  @@index([diamond_clarity_id, diamond_color_id, diamond_shape_id], map: "diamonds_diamond_clarity_id_diamond_color_id_diamond_shape_id_i")
  @@index([is_active], map: "diamonds_is_active_index")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model making_charge_discounts {
  id                BigInt           @id @default(autoincrement())
  name              String           @db.VarChar(191)
  description       String?          @db.VarChar(191)
  discount_type     String           @default("percentage") @db.VarChar(255)
  value             Decimal          @db.Decimal(10, 2)
  brand_id          BigInt?
  category_id       BigInt?
  user_group_id BigInt?
  min_cart_total    Decimal?         @db.Decimal(12, 2)
  is_auto           Boolean          @default(true)
  is_active         Boolean          @default(true)
  starts_at         DateTime?        @db.Timestamptz(0)
  ends_at           DateTime?        @db.Timestamptz(0)
  user_types        Json?
  created_at        DateTime?        @default(now()) @db.Timestamptz(0)
  updated_at        DateTime?        @updatedAt @db.Timestamptz(0)
  brands            brands?          @relation(fields: [brand_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "making_charge_discounts_brand_id_foreign")
  categories        categories?      @relation(fields: [category_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "making_charge_discounts_category_id_foreign")
  user_groups       user_groups?     @relation(fields: [user_group_id], references: [id], onUpdate: NoAction, map: "making_charge_discounts_user_group_id_foreign")

  @@index([is_active, starts_at, ends_at], map: "making_charge_discounts_is_active_starts_at_ends_at_index")
}

model metal_purities {
  id                     BigInt                   @id @default(autoincrement())
  metal_id               BigInt
  code                   String                   @db.VarChar(191)
  name                   String                   @db.VarChar(191)
  description            String?
  display_order          Int                      @default(0)
  is_active              Boolean                  @default(true)
  created_at             DateTime?                @default(now()) @db.Timestamptz(0)
  updated_at             DateTime?                @updatedAt @db.Timestamptz(0)
  metals                 metals                   @relation(fields: [metal_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "metal_purities_metal_id_foreign")
  product_variant_metals product_variant_metals[]

  @@unique([metal_id, name], map: "metal_purities_metal_id_name_unique")
  @@index([code], map: "metal_purities_code_index")
  @@index([display_order], map: "metal_purities_display_order_index")
}

model metal_tones {
  id                     BigInt                   @id @default(autoincrement())
  metal_id               BigInt
  code                   String                   @db.VarChar(191)
  name                   String                   @db.VarChar(191)
  description            String?
  display_order          Int                      @default(0)
  is_active              Boolean                  @default(true)
  created_at             DateTime?                @default(now()) @db.Timestamptz(0)
  updated_at             DateTime?                @updatedAt @db.Timestamptz(0)
  metals                 metals                   @relation(fields: [metal_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "metal_tones_metal_id_foreign")
  product_variant_metals product_variant_metals[]

  @@unique([metal_id, name], map: "metal_tones_metal_id_name_unique")
  @@index([code], map: "metal_tones_code_index")
  @@index([display_order], map: "metal_tones_display_order_index")
}

model metals {
  id                     BigInt                   @id @default(autoincrement())
  code                   String                   @db.VarChar(191)
  name                   String                   @db.VarChar(191)
  description            String?
  display_order          Int                      @default(0)
  is_active              Boolean                  @default(true)
  created_at             DateTime?                @default(now()) @db.Timestamptz(0)
  updated_at             DateTime?                @updatedAt @db.Timestamptz(0)
  metal_purities         metal_purities[]
  metal_tones            metal_tones[]
  product_variant_metals product_variant_metals[]

  @@index([code], map: "metals_code_index")
  @@index([display_order], map: "metals_display_order_index")
}

model notification_logs {
  id         BigInt    @id @default(autoincrement())
  user_id    BigInt?
  channel    String    @db.VarChar(191)
  template   String    @db.VarChar(191)
  payload    Json?
  sent_at    DateTime? @db.Timestamptz(0)
  status     String    @default("queued") @db.VarChar(191)
  response   Json?
  created_at DateTime? @default(now()) @db.Timestamptz(0)
  updated_at DateTime? @updatedAt @db.Timestamptz(0)
  users      User?     @relation(fields: [user_id], references: [id], onUpdate: NoAction, map: "notification_logs_user_id_foreign")
}

model offers {
  id          BigInt    @id @default(autoincrement())
  code        String    @unique(map: "offers_code_unique") @db.VarChar(191)
  name        String    @db.VarChar(191)
  description String?
  type        String    @db.VarChar(191)
  value       Decimal   @db.Decimal(12, 2)
  constraints Json?
  starts_at   DateTime? @db.Timestamptz(0)
  ends_at     DateTime? @db.Timestamptz(0)
  is_active   Boolean   @default(true)
  created_at  DateTime? @default(now()) @db.Timestamptz(0)
  updated_at  DateTime? @updatedAt @db.Timestamptz(0)
}

model order_items {
  id            BigInt    @id @default(autoincrement())
  order_id      BigInt
  product_id    BigInt?
  sku           String    @db.VarChar(191)
  name          String    @db.VarChar(191)
  quantity      Int       @default(1)
  unit_price    Decimal   @default(0) @db.Decimal(12, 2)
  total_price   Decimal   @default(0) @db.Decimal(12, 2)
  configuration Json?
  metadata      Json?
  created_at    DateTime? @default(now()) @db.Timestamptz(0)
  updated_at    DateTime? @updatedAt @db.Timestamptz(0)
  orders        orders    @relation(fields: [order_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "order_items_order_id_foreign")
  products      products? @relation(fields: [product_id], references: [id], onUpdate: NoAction, map: "order_items_product_id_foreign")
}

model order_status_histories {
  id         BigInt    @id @default(autoincrement())
  order_id   BigInt
  user_id    BigInt?
  status     String    @db.VarChar(191)
  meta       Json?
  created_at DateTime? @default(now()) @db.Timestamptz(0)
  updated_at DateTime? @updatedAt @db.Timestamptz(0)
  orders     orders    @relation(fields: [order_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "order_status_histories_order_id_foreign")
  users      User?     @relation(fields: [user_id], references: [id], onUpdate: NoAction, map: "order_status_histories_user_id_foreign")
}

model order_statuses {
  id            BigInt    @id @default(autoincrement())
  name          String    @unique(map: "order_statuses_name_unique") @db.VarChar(191)
  code          String    @unique(map: "order_statuses_code_unique") @db.VarChar(191)
  color         String    @default("#64748b") @db.VarChar(191)
  is_default    Boolean   @default(false)
  is_active     Boolean   @default(true)
  display_order Int       @default(0)
  created_at    DateTime? @default(now()) @db.Timestamptz(0)
  updated_at    DateTime? @updatedAt @db.Timestamptz(0)

  @@index([is_active, display_order], map: "order_statuses_is_active_display_order_index")
}

model orders {
  id                     BigInt                   @id @default(autoincrement())
  user_id                BigInt
  status                 String                   @default("pending") @db.VarChar(191)
  reference              String                   @unique(map: "orders_reference_unique") @db.VarChar(191)
  currency               String                   @default("INR") @db.VarChar(191)
  subtotal_amount        Decimal                  @default(0) @db.Decimal(12, 2)
  tax_amount             Decimal                  @default(0) @db.Decimal(12, 2)
  discount_amount        Decimal                  @default(0) @db.Decimal(12, 2)
  total_amount           Decimal                  @default(0) @db.Decimal(12, 2)
  price_breakdown        Json?
  locked_rates           Json?
  status_meta            Json?
  created_at             DateTime?                @default(now()) @db.Timestamptz(0)
  updated_at             DateTime?                @updatedAt @db.Timestamptz(0)
  order_items            order_items[]
  order_status_histories order_status_histories[]
  users                  User                     @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "orders_user_id_foreign")
  payments               payments[]
  quotations             quotations[]
}

model password_reset_tokens {
  email      String    @id @db.VarChar(191)
  token      String    @db.VarChar(191)
  created_at DateTime? @default(now()) @db.Timestamptz(0)
}

model payment_gateways {
  id         BigInt     @id @default(autoincrement())
  name       String     @db.VarChar(191)
  slug       String     @unique(map: "payment_gateways_slug_unique") @db.VarChar(191)
  driver     String     @db.VarChar(191)
  is_active  Boolean    @default(false)
  is_default Boolean    @default(false)
  config     Json?
  created_at DateTime?  @default(now()) @db.Timestamptz(0)
  updated_at DateTime?  @updatedAt @db.Timestamptz(0)
  payments   payments[]
}

model payments {
  id                 BigInt           @id @default(autoincrement())
  order_id           BigInt
  payment_gateway_id BigInt
  provider_reference String           @unique(map: "payments_provider_reference_unique") @db.VarChar(191)
  status             String           @default("pending") @db.VarChar(191)
  amount             Decimal          @db.Decimal(12, 2)
  currency           String           @default("INR") @db.VarChar(3)
  meta               Json?
  created_at         DateTime?        @default(now()) @db.Timestamptz(0)
  updated_at         DateTime?        @updatedAt @db.Timestamptz(0)
  orders             orders           @relation(fields: [order_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "payments_order_id_foreign")
  payment_gateways   payment_gateways @relation(fields: [payment_gateway_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "payments_payment_gateway_id_foreign")
}

model price_rates {
  id             BigInt    @id @default(autoincrement())
  metal          String    @db.VarChar(191)
  purity         String?   @db.VarChar(191)
  price_per_gram Decimal   @db.Decimal(12, 2)
  currency       String    @default("INR") @db.VarChar(191)
  source         String    @default("manual") @db.VarChar(191)
  effective_at   DateTime? @db.Timestamptz(0)
  metadata       Json?
  created_at     DateTime? @default(now()) @db.Timestamptz(0)
  updated_at     DateTime? @updatedAt @db.Timestamptz(0)
}

model product_medias {
  id            BigInt    @id @default(autoincrement())
  product_id    BigInt
  type          String    @default("image") @db.VarChar(191)
  url           String    @db.VarChar(191)
  display_order Int       @default(0)
  metadata      Json?
  created_at    DateTime? @default(now()) @db.Timestamptz(0)
  updated_at    DateTime? @updatedAt @db.Timestamptz(0)
  products      products  @relation(fields: [product_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "product_medias_product_id_foreign")
}

model product_variant_diamonds {
  id                 BigInt           @id @default(autoincrement())
  product_variant_id BigInt
  diamond_id         BigInt?
  diamonds_count     Int?
  metadata           Json?
  display_order      Int              @default(0)
  created_at         DateTime?        @default(now()) @db.Timestamptz(0)
  updated_at         DateTime?        @updatedAt @db.Timestamptz(0)
  diamonds           diamonds?        @relation(fields: [diamond_id], references: [id], onUpdate: NoAction, map: "product_variant_diamonds_diamond_id_foreign")
  product_variants   product_variants @relation(fields: [product_variant_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "product_variant_diamonds_product_variant_id_foreign")

  @@index([product_variant_id], map: "product_variant_diamonds_product_variant_id_index")
}

model product_variant_metals {
  id                 BigInt           @id @default(autoincrement())
  product_variant_id BigInt
  metal_id           BigInt
  metal_purity_id    BigInt?
  metal_tone_id      BigInt?
  metal_weight       Decimal?         @db.Decimal(10, 3)
  metadata           Json?
  display_order      Int              @default(0)
  created_at         DateTime?        @default(now()) @db.Timestamptz(0)
  updated_at         DateTime?        @updatedAt @db.Timestamptz(0)
  metals             metals           @relation(fields: [metal_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "product_variant_metals_metal_id_foreign")
  metal_purities     metal_purities?  @relation(fields: [metal_purity_id], references: [id], onUpdate: NoAction, map: "product_variant_metals_metal_purity_id_foreign")
  metal_tones        metal_tones?     @relation(fields: [metal_tone_id], references: [id], onUpdate: NoAction, map: "product_variant_metals_metal_tone_id_foreign")
  product_variants   product_variants @relation(fields: [product_variant_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "product_variant_metals_product_variant_id_foreign")

  @@index([product_variant_id, metal_id], map: "product_variant_metals_product_variant_id_metal_id_index")
}

model product_variants {
  id                       BigInt                     @id @default(autoincrement())
  product_id               BigInt
  sku                      String?                    @unique(map: "product_variants_sku_unique") @db.VarChar(191)
  label                    String                     @db.VarChar(191)
  size_id                  BigInt?
  inventory_quantity       Int                        @default(0)
  is_default               Boolean                    @default(false)
  metadata                 Json?
  created_at               DateTime?                  @default(now()) @db.Timestamptz(0)
  updated_at               DateTime?                  @updatedAt @db.Timestamptz(0)
  cart_items               cart_items[]
  product_variant_diamonds product_variant_diamonds[]
  product_variant_metals   product_variant_metals[]
  products                 products                   @relation(fields: [product_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "product_variants_product_id_foreign")
  sizes                    sizes?                     @relation(fields: [size_id], references: [id], onUpdate: NoAction, map: "product_variants_size_id_foreign")
  quotations               quotations[]
  wishlist_items           wishlist_items[]
}

model products {
  id                       BigInt             @id @default(autoincrement())
  name                     String             @db.VarChar(191)
  titleline                String?            @db.VarChar(191)
  brand_id                 BigInt
  category_id              BigInt
  subcategory_ids          Json?
  style_ids                Json?
  collection               String?            @db.VarChar(191)
  producttype              String?            @db.VarChar(191)
  gender                   String?            @db.VarChar(191)
  sku                      String             @unique(map: "products_sku_unique") @db.VarChar(191)
  description              String?
  making_charge_amount     Decimal?           @db.Decimal(12, 2)
  making_charge_percentage Decimal?           @db.Decimal(10, 2)
  is_active                Boolean            @default(true)
  metadata                 Json?
  created_at               DateTime?          @default(now()) @db.Timestamptz(0)
  updated_at               DateTime?          @updatedAt @db.Timestamptz(0)
  cart_items               cart_items[]
  catalog_products         catalog_products[]
  order_items              order_items[]
  product_medias           product_medias[]
  product_variants         product_variants[]
  brands                   brands             @relation(fields: [brand_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "products_brand_id_foreign")
  categories               categories         @relation(fields: [category_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "products_category_id_foreign")
  quotations               quotations[]
  wishlist_items           wishlist_items[]
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model quotation_messages {
  id           BigInt     @id @default(autoincrement())
  quotation_id BigInt
  user_id      BigInt?
  sender       String     @db.VarChar(255)
  message      String
  created_at   DateTime?  @default(now()) @db.Timestamptz(0)
  updated_at   DateTime?  @updatedAt @db.Timestamptz(0)
  quotations   quotations @relation(fields: [quotation_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "quotation_messages_quotation_id_foreign")
  users        User?      @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "quotation_messages_user_id_foreign")
}

model quotations {
  id                 BigInt               @id @default(autoincrement())
  user_id            BigInt
  quotation_group_id String?              @db.VarChar(191)
  product_id         BigInt
  product_variant_id BigInt?
  status             String               @default("pending") @db.VarChar(191)
  quantity           Int                  @default(1)
  notes              String?
  metadata           Json?
  order_id           BigInt?
  approved_at        DateTime?            @db.Timestamptz(0)
  admin_notes        String?
  created_at         DateTime?            @default(now()) @db.Timestamptz(0)
  updated_at         DateTime?            @updatedAt @db.Timestamptz(0)
  quotation_messages quotation_messages[]
  orders             orders?              @relation(fields: [order_id], references: [id], onUpdate: NoAction, map: "quotations_order_id_foreign")
  products           products             @relation(fields: [product_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "quotations_product_id_foreign")
  product_variants   product_variants?    @relation(fields: [product_variant_id], references: [id], onUpdate: NoAction, map: "quotations_product_variant_id_foreign")
  users              User                 @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "quotations_user_id_foreign")

  @@index([quotation_group_id], map: "quotations_quotation_group_id_index")
}

model settings {
  id         BigInt    @id @default(autoincrement())
  key        String    @unique(map: "settings_key_unique") @db.VarChar(191)
  value      String?
  type       String    @default("string") @db.VarChar(191)
  group      String    @default("general") @db.VarChar(191)
  created_at DateTime? @default(now()) @db.Timestamptz(0)
  updated_at DateTime? @updatedAt @db.Timestamptz(0)
}

model sizes {
  id               BigInt             @id @default(autoincrement())
  code             String?            @db.VarChar(191)
  name             String             @db.VarChar(191)
  description      String?
  display_order    Int                @default(0)
  is_active        Boolean            @default(true)
  created_at       DateTime?          @default(now()) @db.Timestamptz(0)
  updated_at       DateTime?          @updatedAt @db.Timestamptz(0)
  category_sizes   category_sizes[]
  product_variants product_variants[]

  @@index([code], map: "sizes_code_index")
  @@index([display_order], map: "sizes_display_order_index")
}

model styles {
  id              BigInt            @id @default(autoincrement())
  code            String?           @db.VarChar(191)
  name            String            @db.VarChar(191)
  description     String?
  display_order   Int               @default(0)
  is_active       Boolean           @default(true)
  created_at      DateTime?         @default(now()) @db.Timestamptz(0)
  updated_at      DateTime?         @updatedAt @db.Timestamptz(0)
  category_styles category_styles[]

  @@index([code], map: "styles_code_index")
  @@index([display_order], map: "styles_display_order_index")
}

model tax_groups {
  id          BigInt    @id @default(autoincrement())
  name        String    @db.VarChar(191)
  description String?
  is_active   Boolean   @default(true)
  created_at  DateTime? @default(now()) @db.Timestamptz(0)
  updated_at  DateTime? @updatedAt @db.Timestamptz(0)
  taxes       taxes[]
}

model taxes {
  id           BigInt     @id @default(autoincrement())
  tax_group_id BigInt
  name         String     @db.VarChar(191)
  code         String     @unique(map: "taxes_code_unique") @db.VarChar(191)
  rate         Decimal    @db.Decimal(5, 2)
  description  String?
  is_active    Boolean    @default(true)
  created_at   DateTime?  @default(now()) @db.Timestamptz(0)
  updated_at   DateTime?  @updatedAt @db.Timestamptz(0)
  tax_groups   tax_groups @relation(fields: [tax_group_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "taxes_tax_group_id_foreign")
}

model admin_groups {
  id            BigInt    @id @default(autoincrement())
  name          String    @unique(map: "admin_groups_name_unique") @db.VarChar(191)
  code          String    @unique @db.VarChar(191)
  description   String?
  features      Json?
  is_active     Boolean   @default(true)
  display_order Int       @default(0)
  created_at    DateTime? @default(now()) @db.Timestamptz(0)
  updated_at    DateTime? @updatedAt @db.Timestamptz(0)
  admins        Admin[]

  @@index([is_active, display_order], map: "admin_groups_is_active_display_order_index")
  @@map("admin_groups")
}

model user_kyc_documents {
  id         BigInt    @id @default(autoincrement())
  user_id    BigInt
  type       String    @db.VarChar(191)
  file_path  String    @db.VarChar(191)
  status     String    @default("pending") @db.VarChar(191)
  remarks    String?   @db.VarChar(191)
  metadata   Json?
  created_at DateTime? @default(now()) @db.Timestamptz(0)
  updated_at DateTime? @updatedAt @db.Timestamptz(0)
  users      User      @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "user_kyc_documents_user_id_foreign")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model user_kyc_messages {
  id          BigInt    @id @default(autoincrement())
  user_id     BigInt
  admin_id    BigInt?
  sender_type String    @db.VarChar(255)
  message     String
  created_at  DateTime? @default(now()) @db.Timestamptz(0)
  updated_at  DateTime? @updatedAt @db.Timestamptz(0)
  admins      Admin?     @relation(fields: [admin_id], references: [id], onUpdate: NoAction, map: "user_kyc_messages_admin_id_foreign")
  users       User      @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "user_kyc_messages_user_id_foreign")
}

model wishlist_items {
  id                 BigInt            @id @default(autoincrement())
  wishlist_id        BigInt
  product_id         BigInt
  product_variant_id BigInt?
  configuration      Json?
  created_at         DateTime?         @default(now()) @db.Timestamptz(0)
  updated_at         DateTime?         @updatedAt @db.Timestamptz(0)
  products           products          @relation(fields: [product_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "wishlist_items_product_id_foreign")
  product_variants   product_variants? @relation(fields: [product_variant_id], references: [id], onUpdate: NoAction, map: "wishlist_items_product_variant_id_foreign")
  wishlists          wishlists         @relation(fields: [wishlist_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "wishlist_items_wishlist_id_foreign")

  @@unique([wishlist_id, product_id, product_variant_id], map: "wishlist_item_unique")
}

model wishlists {
  id             BigInt           @id @default(autoincrement())
  customer_id    BigInt           @unique(map: "wishlists_customer_id_unique")
  name           String           @default("Primary") @db.VarChar(191)
  metadata       Json?
  created_at     DateTime?        @default(now()) @db.Timestamptz(0)
  updated_at     DateTime?        @updatedAt @db.Timestamptz(0)
  wishlist_items wishlist_items[]
  users          User             @relation(fields: [customer_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "wishlists_customer_id_foreign")
}
